(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([[4],{1795:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"/* Imported by other addons */\n\n.sa-block-color {\n  --sa-block-colored-background: var(--sa-block-background-primary);\n  --sa-block-colored-background-secondary: var(--sa-block-field-background);\n  --sa-block-bright-background: var(--sa-block-background-primary);\n  --sa-block-text: white;\n  --sa-block-gray-text: white;\n  --sa-block-colored-text: var(--sa-block-background-primary);\n  --sa-block-text-on-bright-background: white;\n}\n\n.sa-block-color-motion {\n  --sa-block-background-primary: var(--editorTheme3-motion-primary, #4c97ff);\n  --sa-block-background-secondary: var(--editorTheme3-motion-secondary, #4280d7);\n  --sa-block-background-tertiary: var(--editorTheme3-motion-tertiary, #3373cc);\n  --sa-block-field-background: var(--editorTheme3-motion-field, #3373cc);\n}\n\n.sa-block-color-looks {\n  --sa-block-background-primary: var(--editorTheme3-looks-primary, #9966ff);\n  --sa-block-background-secondary: var(--editorTheme3-looks-secondary, #855cd6);\n  --sa-block-background-tertiary: var(--editorTheme3-looks-tertiary, #774dcb);\n  --sa-block-field-background: var(--editorTheme3-looks-field, #774dcb);\n}\n\n.sa-block-color-sounds {\n  --sa-block-background-primary: var(--editorTheme3-sounds-primary, #cf63cf);\n  --sa-block-background-secondary: var(--editorTheme3-sounds-secondary, #c94fc9);\n  --sa-block-background-tertiary: var(--editorTheme3-sounds-tertiary, #bd42bd);\n  --sa-block-field-background: var(--editorTheme3-sounds-field, #bd42bd);\n}\n\n.sa-block-color-events {\n  --sa-block-background-primary: var(--editorTheme3-event-primary, #ffbf00);\n  --sa-block-background-secondary: var(--editorTheme3-event-secondary, #e6ac00);\n  --sa-block-background-tertiary: var(--editorTheme3-event-tertiary, #cc9900);\n  --sa-block-field-background: var(--editorTheme3-event-field, #cc9900);\n}\n\n.sa-block-color-control {\n  --sa-block-background-primary: var(--editorTheme3-control-primary, #ffab19);\n  --sa-block-background-secondary: var(--editorTheme3-control-secondary, #ec9c13);\n  --sa-block-background-tertiary: var(--editorTheme3-control-tertiary, #cf8b17);\n  --sa-block-field-background: var(--editorTheme3-control-field, #cf8b17);\n}\n\n.sa-block-color-sensing {\n  --sa-block-background-primary: var(--editorTheme3-sensing-primary, #5cb1d6);\n  --sa-block-background-secondary: var(--editorTheme3-sensing-secondary, #47a8d1);\n  --sa-block-background-tertiary: var(--editorTheme3-sensing-tertiary, #2e8eb8);\n  --sa-block-field-background: var(--editorTheme3-sensing-field, #2e8eb8);\n}\n\n.sa-block-color-operators {\n  --sa-block-background-primary: var(--editorTheme3-operators-primary, #59c059);\n  --sa-block-background-secondary: var(--editorTheme3-operators-secondary, #46b946);\n  --sa-block-background-tertiary: var(--editorTheme3-operators-tertiary, #389438);\n  --sa-block-field-background: var(--editorTheme3-operators-field, #389438);\n}\n\n.sa-block-color-data {\n  --sa-block-background-primary: var(--editorTheme3-data-primary, #ff8c1a);\n  --sa-block-background-secondary: var(--editorTheme3-data-secondary, #ff8000);\n  --sa-block-background-tertiary: var(--editorTheme3-data-tertiary, #db6e00);\n  --sa-block-field-background: var(--editorTheme3-data-field, #db6e00);\n}\n\n.sa-block-color-data-lists,\n.sa-block-color-list {\n  --sa-block-background-primary: var(--editorTheme3-data_lists-primary, #ff661a);\n  --sa-block-background-secondary: var(--editorTheme3-data_lists-secondary, #ff5500);\n  --sa-block-background-tertiary: var(--editorTheme3-data_lists-tertiary, #e64d00);\n  --sa-block-field-background: var(--editorTheme3-data_lists-field, #e64d00);\n}\n\n.sa-block-color-more,\n.sa-block-color-null {\n  --sa-block-background-primary: var(--editorTheme3-more-primary, #ff6680);\n  --sa-block-background-secondary: var(--editorTheme3-more-secondary, #ff4d6a);\n  --sa-block-background-tertiary: var(--editorTheme3-more-tertiary, #ff3355);\n  --sa-block-field-background: var(--editorTheme3-more-field, #ff3355);\n}\n\n.sa-block-color-pen {\n  --sa-block-background-primary: var(--editorTheme3-pen-primary, #0fbd8c);\n  --sa-block-background-secondary: var(--editorTheme3-pen-secondary, #0da57a);\n  --sa-block-background-tertiary: var(--editorTheme3-pen-tertiary, #0b8e69);\n  --sa-block-field-background: var(--editorTheme3-pen-field, #0b8e69);\n}\n\n.sa-block-color-addon-custom-block {\n  --sa-block-background-primary: var(--editorTheme3-sa-primary, #29beb8);\n  --sa-block-background-secondary: var(--editorTheme3-sa-secondary, #3aa8a4);\n  --sa-block-background-tertiary: var(--editorTheme3-sa-tertiary, #3aa8a4);\n  --sa-block-field-background: var(--editorTheme3-sa-field, #3aa8a4);\n}\n\n.sa-block-color-TurboWarp {\n  --sa-block-background-primary: var(--editorTheme3-tw-primary, #ff4c4c);\n  --sa-block-background-secondary: var(--editorTheme3-tw-secondary, #e64444);\n  --sa-block-background-tertiary: var(--editorTheme3-tw-tertiary, #e64444);\n  --sa-block-field-background: var(--editorTheme3-tw-field, #e64444);\n}\n",""])},1798:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));const o=()=>/^#?[0-9a-fA-F]{3,8}$/,r=e=>{let t=String(e);if(!o().test(t))return"#000000";if(t.startsWith("#")||(t="#".concat(t)),4===t.length){const[e,n,o,r]=t;t="#".concat(n).concat(n).concat(o).concat(o).concat(r).concat(r)}return t.toLowerCase()}},1799:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));class o{constructor(e){this.timeout=null,this.callback=null,this.wait=e}abort(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.timeout&&(clearTimeout(this.timeout),e&&this.callback(),this.timeout=this.callback=null)}limit(e){this.abort(!1),this.callback=e,this.timeout=setTimeout(()=>{this.timeout=this.callback=null,e()},this.wait)}}},1800:function(e,t,n){"use strict";const o=function(e){var t=/^\s+/,n=/\s+$/,o=0,r=e.round,s=e.min,i=e.max,a=e.random;function c(a,l){if(l=l||{},(a=a||"")instanceof c)return a;if(!(this instanceof c))return new c(a,l);var d=function(o){var r={r:0,g:0,b:0},a=1,c=null,l=null,d=null,u=!1,p=!1;"string"==typeof o&&(o=function(e){e=e.replace(t,"").replace(n,"").toLowerCase();var o,r=!1;if(C[e])e=C[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(o=z.rgb.exec(e))return{r:o[1],g:o[2],b:o[3]};if(o=z.rgba.exec(e))return{r:o[1],g:o[2],b:o[3],a:o[4]};if(o=z.hsl.exec(e))return{h:o[1],s:o[2],l:o[3]};if(o=z.hsla.exec(e))return{h:o[1],s:o[2],l:o[3],a:o[4]};if(o=z.hsv.exec(e))return{h:o[1],s:o[2],v:o[3]};if(o=z.hsva.exec(e))return{h:o[1],s:o[2],v:o[3],a:o[4]};if(o=z.hex8.exec(e))return{r:A(o[1]),g:A(o[2]),b:A(o[3]),a:B(o[4]),format:r?"name":"hex8"};if(o=z.hex6.exec(e))return{r:A(o[1]),g:A(o[2]),b:A(o[3]),format:r?"name":"hex"};if(o=z.hex4.exec(e))return{r:A(o[1]+""+o[1]),g:A(o[2]+""+o[2]),b:A(o[3]+""+o[3]),a:B(o[4]+""+o[4]),format:r?"name":"hex8"};if(o=z.hex3.exec(e))return{r:A(o[1]+""+o[1]),g:A(o[2]+""+o[2]),b:A(o[3]+""+o[3]),format:r?"name":"hex"};return!1}(o));"object"==typeof o&&(W(o.r)&&W(o.g)&&W(o.b)?(h=o.r,g=o.g,f=o.b,r={r:255*E(h,255),g:255*E(g,255),b:255*E(f,255)},u=!0,p="%"===String(o.r).substr(-1)?"prgb":"rgb"):W(o.h)&&W(o.s)&&W(o.v)?(c=j(o.s),l=j(o.v),r=function(t,n,o){t=6*E(t,360),n=E(n,100),o=E(o,100);var r=e.floor(t),s=t-r,i=o*(1-n),a=o*(1-s*n),c=o*(1-(1-s)*n),l=r%6;return{r:255*[o,a,i,i,c,o][l],g:255*[c,o,o,a,i,i][l],b:255*[i,i,c,o,o,a][l]}}(o.h,c,l),u=!0,p="hsv"):W(o.h)&&W(o.s)&&W(o.l)&&(c=j(o.s),d=j(o.l),r=function(e,t,n){var o,r,s;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=E(e,360),t=E(t,100),n=E(n,100),0===t)o=r=s=n;else{var a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;o=i(c,a,e+1/3),r=i(c,a,e),s=i(c,a,e-1/3)}return{r:255*o,g:255*r,b:255*s}}(o.h,c,d),u=!0,p="hsl"),o.hasOwnProperty("a")&&(a=o.a));var h,g,f;return a=M(a),{ok:u,format:o.format||p,r:s(255,i(r.r,0)),g:s(255,i(r.g,0)),b:s(255,i(r.b,0)),a:a}}(a);this._originalInput=a,this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=r(100*this._a)/100,this._format=l.format||d.format,this._gradientType=l.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=d.ok,this._tc_id=o++}function l(e,t,n){e=E(e,255),t=E(t,255),n=E(n,255);var o,r,a=i(e,t,n),c=s(e,t,n),l=(a+c)/2;if(a==c)o=r=0;else{var d=a-c;switch(r=l>.5?d/(2-a-c):d/(a+c),a){case e:o=(t-n)/d+(t<n?6:0);break;case t:o=(n-e)/d+2;break;case n:o=(e-t)/d+4}o/=6}return{h:o,s:r,l:l}}function d(e,t,n){e=E(e,255),t=E(t,255),n=E(n,255);var o,r,a=i(e,t,n),c=s(e,t,n),l=a,d=a-c;if(r=0===a?0:d/a,a==c)o=0;else{switch(a){case e:o=(t-n)/d+(t<n?6:0);break;case t:o=(n-e)/d+2;break;case n:o=(e-t)/d+4}o/=6}return{h:o,s:r,v:l}}function u(e,t,n,o){var s=[N(r(e).toString(16)),N(r(t).toString(16)),N(r(n).toString(16))];return o&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function p(e,t,n,o){return[N(D(o)),N(r(e).toString(16)),N(r(t).toString(16)),N(r(n).toString(16))].join("")}function h(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=L(n.s),c(n)}function g(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=L(n.s),c(n)}function f(e){return c(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=L(n.l),c(n)}function b(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=i(0,s(255,n.r-r(-t/100*255))),n.g=i(0,s(255,n.g-r(-t/100*255))),n.b=i(0,s(255,n.b-r(-t/100*255))),c(n)}function y(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=L(n.l),c(n)}function v(e,t){var n=c(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,c(n)}function k(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function x(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function w(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function I(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function _(e,t,n){t=t||6,n=n||30;var o=c(e).toHsl(),r=360/n,s=[c(e)];for(o.h=(o.h-(r*t>>1)+720)%360;--t;)o.h=(o.h+r)%360,s.push(c(o));return s}function S(e,t){t=t||6;for(var n=c(e).toHsv(),o=n.h,r=n.s,s=n.v,i=[],a=1/t;t--;)i.push(c({h:o,s:r,v:s})),s=(s+a)%1;return i}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,o,r=this.toRgb();return t=r.r/255,n=r.g/255,o=r.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:e.pow((o+.055)/1.055,2.4))},setAlpha:function(e){return this._a=M(e),this._roundA=r(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=r(360*e.h),n=r(100*e.s),o=r(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=l(this._r,this._g,this._b),t=r(360*e.h),n=r(100*e.s),o=r(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return u(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,s){var i=[N(r(e).toString(16)),N(r(t).toString(16)),N(r(n).toString(16)),N(D(o))];if(s&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0);return i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*E(this._r,255))+"%",g:r(100*E(this._g,255))+"%",b:r(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*E(this._r,255))+"%, "+r(100*E(this._g,255))+"%, "+r(100*E(this._b,255))+"%)":"rgba("+r(100*E(this._r,255))+"%, "+r(100*E(this._g,255))+"%, "+r(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+p(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var r=c(e);n="#"+p(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(f,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:j(e[o]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:a(),g:a(),b:a()})},c.mix=function(e,t,n){n=0===n?0:n||50;var o=c(e).toRgb(),r=c(t).toRgb(),s=n/100;return c({r:(r.r-o.r)*s+o.r,g:(r.g-o.g)*s+o.g,b:(r.b-o.b)*s+o.b,a:(r.a-o.a)*s+o.a})},c.readability=function(t,n){var o=c(t),r=c(n);return(e.max(o.getLuminance(),r.getLuminance())+.05)/(e.min(o.getLuminance(),r.getLuminance())+.05)},c.isReadable=function(e,t,n){var o,r,s=c.readability(e,t);switch(r=!1,(o=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+o.size){case"AAsmall":case"AAAlarge":r=s>=4.5;break;case"AAlarge":r=s>=3;break;case"AAAsmall":r=s>=7}return r},c.mostReadable=function(e,t,n){var o,r,s,i,a=null,l=0;r=(n=n||{}).includeFallbackColors,s=n.level,i=n.size;for(var d=0;d<t.length;d++)(o=c.readability(e,t[d]))>l&&(l=o,a=c(t[d]));return c.isReadable(e,a,{level:s,size:i})||!r?a:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var C=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(C);function M(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function E(t,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(t)&&(t="100%");var o=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(t);return t=s(n,i(0,parseFloat(t))),o&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function L(e){return s(1,i(0,e))}function A(e){return parseInt(e,16)}function N(e){return 1==e.length?"0"+e:""+e}function j(e){return e<=1&&(e=100*e+"%"),e}function D(t){return e.round(255*parseFloat(t)).toString(16)}function B(e){return A(e)/255}var O,P,R,z=(P="[\\s|\\(]+("+(O="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+O+")[,|\\s]+("+O+")\\s*\\)?",R="[\\s|\\(]+("+O+")[,|\\s]+("+O+")[,|\\s]+("+O+")[,|\\s]+("+O+")\\s*\\)?",{CSS_UNIT:new RegExp(O),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(e){return!!z.CSS_UNIT.exec(e)}return c}(Math);t.a=o},1804:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return u}));let o=!1,r=!1;function s(e,t){o=e,r=e&&t}let i=!1;function a(e){i=e}let c=!1,l=!1;document.addEventListener("mousedown",(function(e){c=e.ctrlKey||e.metaKey,l=e.altKey}),{capture:!0});let d=!1;async function u(e){if(d)return;d=!0;const t=await e.tab.traps.getBlockly(),n=t.Gesture.prototype.startDraggingBlock_;t.Gesture.prototype.startDraggingBlock_=function(){let e=this.targetBlock_;const s=!(this.mostRecentEvent_ instanceof MouseEvent),a=i&&l&&!s&&!this.flyout_&&!this.shouldDuplicateOnDrag_&&("procedures_definition"!==this.targetBlock_.type||"procedures_definition_return"!==this.targetBlock_.type),d=r&&!s&&e.getParent(),u=o||a,p=u&&c===!d&&!e.isShadow();if((a||p)&&(t.Events.getGroup()||t.Events.setGroup(!0)),a){let n;this.startWorkspace_.setResizesEnabled(!1),t.Events.disable();try{const o=t.Xml.blockToDom(e);n=t.Xml.domToBlock(o,this.startWorkspace_),t.scratchBlocksUtils.changeObscuredShadowIds(n);const r=e.getRelativeToSurfaceXY();n.moveBy(r.x,r.y)}catch(e){console.error(e)}t.Events.enable(),n&&(e=n,this.targetBlock_=n,t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockCreate(n)))}if(p){if(s||a){const t=e.getNextBlock();t&&t.dispose()}e.unplug(!0)}for(var h=arguments.length,g=new Array(h),f=0;f<h;f++)g[f]=arguments[f];return n.call(this,...g)}}},1830:function(e,t,n){(t=e.exports=n(10)(!1)).i(n(1795),""),t.push([e.i,'.sa-find-bar {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  width: 100%;\n  height: 100%;\n  margin-left: 1em;\n}\n.sa-find-bar[hidden] {\n  /* !important to override displayNoneWhileDisabled */\n  display: none !important;\n}\n\n.sa-find-wrapper {\n  overflow: visible;\n  position: relative;\n  height: 2rem;\n  width: 100%;\n  max-width: 16em;\n}\n\n.sa-find-dropdown-out {\n  display: block;\n  top: -6px;\n  z-index: 100;\n  width: 100%;\n  max-width: 16em;\n  position: relative;\n  padding: 4px;\n  border: none;\n  border-radius: 4px;\n  margin-top: 6px;\n}\n\n.sa-find-dropdown-out.visible {\n  position: absolute;\n  width: 16em;\n  box-shadow: 0px 0px 8px 1px var(--ui-black-transparent, rgba(0, 0, 0, 0.3));\n  background-color: var(--ui-primary, white);\n}\n\n/* We need to modify Scratch styles so that the place where the find bar is injected */\n/* has actually correct size information, which is used to make the find bar not cover up controls */\n[class*="gui_tab-list_"] {\n  width: 100%;\n}\n[class*="gui_tab_"] {\n  flex-grow: 0;\n}\n\n.sa-find-input {\n  width: 100%;\n  box-sizing: border-box !important;\n  /* !important required for extension, because CSS injection method (and hence order) differs from addon */\n  height: 1.5rem;\n\n  /* Change Scratch default styles */\n  border-radius: 0.25rem;\n  font-size: 0.75rem;\n  padding-left: 0.4em;\n}\n\n.sa-find-input:focus {\n  /* Change Scratch default styles */\n  box-shadow: none;\n}\n\n.sa-find-dropdown {\n  display: none;\n  position: relative;\n  padding: 0.2em 0;\n  font-size: 0.75rem;\n  line-height: 1;\n  overflow-y: auto;\n  min-height: 128px;\n  max-height: 65vh;\n  user-select: none;\n  max-width: 100%;\n  margin-top: 6px;\n  border: none;\n}\n\n.sa-find-dropdown-out.visible > .sa-find-dropdown {\n  display: block;\n}\n\n.sa-find-dropdown > li {\n  display: block;\n  padding: 0.5em 0.3em;\n  white-space: nowrap;\n  margin: 0;\n  font-weight: bold;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.sa-find-dropdown > li > b {\n  background-color: #aaffaa;\n  color: black;\n}\n\n/* Drop down items */\n.sa-find-dropdown > li:hover,\n.sa-find-dropdown > li.sel {\n  color: var(--sa-block-text-on-bright-background);\n  cursor: pointer;\n}\n\n.sa-find-dropdown > li::before {\n  content: "\\25CF   "; /* â— */\n}\n\n.sa-find-flag {\n  color: #4cbf56;\n}\n/* .sa-find-dropdown added for specificity */\n.sa-find-dropdown > .sa-find-flag:hover,\n.sa-find-dropdown > .sa-find-flag.sel {\n  background-color: #4cbf56;\n  color: white;\n}\n\n.sa-find-dropdown .sa-block-color {\n  color: var(--sa-block-colored-text);\n}\n.sa-find-dropdown .sa-block-color:hover,\n.sa-find-dropdown .sa-block-color.sel {\n  background-color: var(--sa-block-bright-background);\n}\n\n.sa-find-carousel {\n  font-weight: normal;\n  position: absolute;\n  right: 0;\n  white-space: nowrap;\n  background-color: inherit;\n  z-index: 1;\n  padding: 0;\n}\n\n.sa-find-carousel-control {\n  padding: 0 6px;\n}\n\n.sa-find-carousel-control:hover {\n  color: #ffff80;\n}\n',""])},1831:function(e,t,n){(t=e.exports=n(10)(!1)).i(n(1795),""),t.push([e.i,'.sa-mcp-root {\n  display: flex;\n  white-space: nowrap;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n\n  position: absolute;\n  min-width: 100px;\n  background-color: white;\n  border-radius: 4px;\n  box-shadow:\n    rgba(0, 0, 0, 0.3) 0 0 3px,\n    rgba(0, 0, 0, 0.2) 0 3px 10px;\n\n  z-index: 999;\n}\n\n.sa-mcp-container {\n  display: flex;\n  flex-flow: column;\n  top: -6px;\n  z-index: 100;\n  position: absolute;\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.3);\n  background-color: white;\n  border: none;\n  border-radius: 4px;\n  overflow: auto;\n  resize: both;\n}\n[theme="dark"] .sa-mcp-container {\n  background-color: #222;\n}\n\n.sa-mcp-input-wrapper {\n  position: relative;\n  margin: 4px;\n  /* !important required for extension, because CSS injection method (and hence order) differs from addon */\n  box-sizing: border-box !important;\n  height: 1.5rem;\n  min-height: 1.5rem;\n\n  /* Change Scratch default styles */\n  border-radius: 0.25rem;\n  font-size: 0.75rem;\n  padding-left: 0.2rem;\n  padding-right: 0.2rem;\n}\n\n.sa-mcp-input-wrapper:focus {\n  /* Change Scratch default styles */\n  box-shadow: none;\n}\n\n.sa-mcp-input-wrapper[data-error="true"] {\n  border-color: red;\n}\n\n.sa-mcp-input-wrapper > input {\n  position: absolute;\n  border: 0;\n  background-color: transparent;\n  outline: none;\n  width: 100%;\n  height: 100%;\n  line-height: 100%;\n  box-sizing: border-box;\n}\n\n.sa-mcp-input-suggestion {\n  color: hsla(225, 15%, 40%, 0.65);\n}\n\n.sa-mcp-preview-container {\n  flex: auto;\n  overflow-y: scroll;\n  scrollbar-width: none;\n}\n\n.sa-mcp-preview-container::-webkit-scrollbar {\n  width: 0;\n  height: 0;\n}\n\n.sa-mcp-preview-blocks {\n  width: 100%;\n  min-height: 100%;\n  /* https://stackoverflow.com/a/22166728/8448397 */\n  float: left;\n}\n\n.sa-mcp-preview-scrollbar {\n  position: absolute;\n  width: 11px;\n  right: 0;\n  bottom: 0;\n}\n\n.sa-mcp-preview-block-bg {\n  width: 100%;\n  fill: transparent;\n  cursor: grab;\n}\n\n.sa-mcp-preview-block {\n  filter: brightness(95%);\n  cursor: grab;\n}\n\n.sa-mcp-preview-block-selection {\n  filter: brightness(103%);\n}\n\n.sa-mcp-preview-block-bg-selection {\n  fill: #7774;\n}\n',""])},1832:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,".u-dropdown-searchbar {\n  width: 100%;\n  box-sizing: border-box;\n  /* based on styles for the title input */\n  color: white;\n  background-color: hsla(0, 100%, 100%, 0.25);\n  border: 1px solid hsla(0, 0%, 0%, 0.15);\n  padding: 0.5rem;\n  outline: none;\n  transition: 0.25s ease-out;\n  font-size: 13px;\n  font-weight: bold;\n  border-radius: 4px;\n}\n.u-dropdown-searchbar:hover {\n  background-color: hsla(0, 100%, 100%, 0.5);\n}\n.u-dropdown-searchbar:focus {\n  background-color: white;\n  color: black;\n}\n.blocklyDropDownDiv .goog-menu {\n  overflow-x: hidden;\n}\n",""])},1858:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,'.sa-color-picker {\n  display: flex;\n}\n\n.sa-color-picker-code {\n  margin: 8px 0;\n}\n\n.sa-color-picker-paint {\n  margin-top: 16px;\n  margin-bottom: 4px;\n}\n\n.sa-color-picker > .sa-color-picker-color {\n  border: none;\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  padding: 0;\n  padding-left: 0.6rem;\n  padding-right: 0.4rem;\n  margin-left: 0.5rem;\n  outline: none;\n  box-sizing: border-box;\n  width: 3rem;\n  height: 2rem;\n}\n[theme="dark"] .sa-color-picker > .sa-color-picker-color {\n  background: var(--ui-secondary);\n}\n\n.sa-color-picker > .sa-color-picker-text {\n  box-sizing: border-box;\n  width: calc(150px - 3rem);\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n[dir="rtl"] .sa-color-picker > .sa-color-picker-color {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 1rem;\n  border-bottom-right-radius: 1rem;\n  margin-left: 0;\n  margin-right: 0.5rem;\n}\n\n[dir="rtl"] .sa-color-picker > .sa-color-picker-text {\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\nbody.sa-hide-eye-dropper-background div[class*="stage_color-picker-background"] {\n  /* Do not show eye dropper background if the color picker is "fake" */\n  display: none;\n}\n',""])},1859:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,'.sa-onion-button {\n  position: relative;\n}\n.sa-onion-button:focus-within {\n  background-color: hsla(194, 100%, 50%, 0.2);\n}\n[theme="dark"] .sa-onion-image {\n  filter: brightness(0) invert(0.8);\n}\n.sa-onion-button[data-enabled="true"] .sa-onion-image {\n  filter: brightness(0) invert(1);\n}\n.sa-onion-button[data-enabled="true"] {\n  background-color: #00c3ff;\n}\n\n.sa-onion-group {\n  position: relative;\n  flex-direction: row;\n}\n\n.sa-onion-settings-wrapper {\n  position: absolute;\n  justify-items: center;\n  left: 50%;\n  width: 1.95rem;\n  height: 1.95rem;\n  display: grid;\n}\n\n.sa-onion-settings {\n  position: absolute;\n  bottom: 100%;\n  /* based on the styles for the color dropdown */\n  padding: 4px;\n  border-radius: 4px;\n  border: 1px solid var(--paint-ui-pane-border, #ddd);\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.3);\n  transition-property: bottom, opacity;\n  transition-duration: 500ms;\n  transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n  opacity: 0;\n  pointer-events: none;\n  background: var(--ui-primary, white);\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25em;\n}\n.sa-onion-settings[data-visible="true"] {\n  bottom: calc(100% + 22px);\n  pointer-events: auto;\n  opacity: 1;\n}\n\n.sa-onion-settings-line {\n  display: flex;\n  justify-content: flex-end;\n  align-items: baseline;\n  gap: 0.25em;\n}\n\n.sa-onion-settings-input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  text-align: center;\n  border: 0;\n  background: transparent;\n  -moz-appearance: textfield;\n  border: 0;\n  outline: 0;\n}\n\n.sa-onion-settings-input::-webkit-outer-spin-button,\n.sa-onion-settings-input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n.sa-onion-settings-tip {\n  position: absolute;\n  bottom: 0;\n  transform: translateY(100%);\n  right: calc(50% - 7px);\n}\n.sa-onion-settings-polygon {\n  fill: var(--ui-primary, white);\n  stroke: var(--paint-ui-pane-border, #ddd);\n}\n\n.sa-onion-settings-label {\n  white-space: nowrap;\n}\n',""])},1863:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,'.sa-stage-color-picker-picking [class^="stage_color-picker-background_"] {\n  display: none;\n}\n',""])},1881:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,'.sa-folders-contextmenu-item {\n  max-width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[sa-folders-context-type="folder"] .react-contextmenu > :not(.sa-ctx-menu) {\n  display: none;\n}\n',""])},1892:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return r}));var o=n(1893);const r={"userstyle.css":n.n(o).a}},1893:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,'[class*="blocks_blocks_"] .blocklyFlyout:has(.blocklyDraggable:hover) {\n    overflow: visible;\n    z-index: 31;\n}\n\n[class*="blocks_blocks_"] .blocklyFlyout:has(.blocklyDraggable:hover) .blocklyWorkspace {\n    clip-path: unset !important;\n}',""])},1894:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,'div[class="scratchCategoryMenuRow"][data-dragger="true"] > div {\n    background: white;\n    font-size: 0.65rem;\n}\n\n[theme="dark"] div[class="scratchCategoryMenuRow"][data-dragger="true"] > div {\n    background: var(--ui-secondary);\n}',""])},1895:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,".sa-comment-preview-outer {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 100000000;\n  pointer-events: none;\n}\n\n.sa-comment-preview-inner {\n  width: calc(200px - 16px);\n  max-height: calc(132px - 8px);\n  padding: 8px;\n  overflow: hidden;\n\n  font-size: 12px;\n  white-space: pre-wrap;\n  pointer-events: none;\n\n  color: rgb(87, 94, 117);\n  background-color: rgb(255 255 255 / 90%);\n  border-style: none;\n  border-radius: 8px;\n  filter: drop-shadow(0px 5px 5px rgb(0 0 0 / 10%));\n\n  transform: perspective(200px);\n}\n\n@supports (backdrop-filter: blur(16px)) {\n  .sa-comment-preview-inner {\n    background-color: rgb(255 255 255 / 75%);\n    backdrop-filter: blur(16px);\n  }\n}\n\n.sa-comment-preview-fade {\n  transition: opacity 0.1s, filter 0.1s, transform 0.1s linear;\n}\n\n.sa-comment-preview-hidden {\n  opacity: 0;\n  filter: none;\n  transform: perspective(200px) translateZ(-20px);\n}\n\n.sa-comment-preview-reduce-transparency {\n  background-color: rgb(255 255 255);\n  backdrop-filter: none;\n}\n",""])},1906:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,".tab-scroller {\n  width: max-content;\n  display: flex;\n  position: absolute;\n}\n.tab-scrollbar {\n  position: absolute;\n  background-color: black;\n  height: 1px;\n  width: 20px;\n  bottom: 0;\n}\n.tab-scrollbar:hover { height: 3px; }\n.tab-wrapper {\n  position: absolute;\n  right: 0;\n  height: 17px;\n  overflow-x: hidden;\n  overflow-y: visible;\n  scrollbar-width: thin;\n}\n.tab-wrapper.copying {\n  height: 29px;\n}\n.tab-adder-button {\n  width: 12px;\n  height: 12px;\n  margin: 1px;\n  margin-right: 11px;\n  border-radius: 3px;\n  border: none;\n}\n[theme=dark] .tab-adder-button {\n  filter: invert(1);\n}\n.tab-adder-button:hover {\n  background-color: rgba(0 0 0 / 15%);\n}\n.tab-bounds {\n  height: 14px;\n  display: inline-flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: max-content;\n}\n.tab-bounds.copying {\n  height: 28px;\n}\n.tab {\n  border-radius: 3px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  padding: 1px 4px;\n  min-width: 20px;\n  font-size: 10px;\n  text-align: center;\n  cursor: pointer;\n  overflow-y: hidden;\n  user-select: none;\n  background-color: var(--ui-primary, hsla(215, 100%, 95%, 1));\n  border: 1px solid var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15));\n  color: var(--text-primary, hsla(225, 15%, 40%, 1));\n  border-top: none;\n  transition: height 100ms ease-in, color 100ms ease-in;\n}\n.tab.unselected {\n  height: 7px;\n  color: transparent;\n}\n.tab.hover {\n  height: 10px;\n  color: #333;\n}\n.tab.selected {\n  height: 14px;\n  color: var(--text-primary, hsla(225, 15%, 40%, 1));\n}\n.tab.copying {\n  height: 28px;\n  color: var(--text-primary, hsla(225, 15%, 40%, 1));\n}",""])},1907:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,".blocklyTextShiftArrow {\n  position: absolute;\n  top: -50px;\n  left: 50%;\n  margin-left: -12.5px;\n  cursor: pointer;\n}\n",""])},1912:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return c}));class o{constructor(e){this.addon=e,this.vm=e.tab.traps.vm,this.events=[]}triggerDragAndDrop(e,t,n,o){o=o||!1;let r=function(e,t,n,r){let s=document.createEvent("MouseEvents");s.initMouseEvent(e,!0,!0,window,1,1,1,n,r,o,!1,!1,!1,0,t),t.dispatchEvent(s)},s=e,i=t;if(!s)return!1;let a=s.getBoundingClientRect(),c=Math.floor((a.left+a.right)/2),l=Math.floor((a.top+a.bottom)/2);if(r("mouseover",s,c,l),r("mousedown",s,c,l),r("dragstart",s,c,l),r("drag",s,c,l),r("mousemove",s,c,l),!i){if(n){let e=n.x,t=n.y;r("drag",s,e,t),r("mousemove",s,e,t)}return!1}a=i.getBoundingClientRect();let d=Math.floor((a.left+a.right)/2),u=Math.floor((a.top+a.bottom)/2);return r("drag",s,d,u),r("mousemove",i,d,u),r("mouseenter",i,d,u),r("dragenter",i,d,u),r("mouseover",i,d,u),r("dragover",i,d,u),r("drop",i,d,u),r("dragend",s,d,u),r("mouseup",s,d,u),!0}bindOnce(e,t,n,o){o=!!o,e.removeEventListener(t,n,o),e.addEventListener(t,n,o),this.events.push(new r(e,t,n,o))}unbindAllEvents(){for(const e of this.events)e.dom.removeEventListener(e.event,e.func,e.capture);this.events=[]}}class r{constructor(e,t,n,o){this.dom=e,this.event=t,this.func=n,this.capture=o}}class s{static startUndoGroup(e){const t=e.undoStack_;t.length&&(t[t.length-1]._devtoolsLastUndo=!0)}static endUndoGroup(e){const t=e.undoStack_;setTimeout(()=>{const e=function(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#$%()*+,-./:;=?@[]^_`{|}~";let t="";for(let n=0;n<20;n++)t+=e[Math.floor(Math.random()*e.length)];return t}();for(let n=t.length-1;n>=0&&!t[n]._devtoolsLastUndo;n--)t[n].group=e},0)}}class i{constructor(e,t,n){this.addon=e,this.msg=t,this.m=n,this.domHelpers=new o(e),this.codeTab=null,this.costTab=null,this.costTabBody=null,this.selVarID=null,this.canShare=!1,this.mouseXY={x:0,y:0}}async init(){for(this.addContextMenus();;){const e=await this.addon.tab.waitForElement("ul[class*=gui_tab-list_]",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"],reduxCondition:e=>!e.scratchGui.mode.isPlayerOnly});this.initInner(e)}}async addContextMenus(){const e=await this.addon.tab.traps.getBlockly(),t=e.WorkspaceSvg.prototype.cleanUp,n=this;e.WorkspaceSvg.prototype.cleanUp=function(){n.addon.settings.get("enableCleanUpPlus")?n.doCleanUp():t.call(this)};let o=e.Msg.CLEAN_UP;this.addon.settings.get("enableCleanUpPlus")&&(e.Msg.CLEAN_UP=this.m("clean-plus")),this.addon.settings.addEventListener("change",()=>{this.addon.settings.get("enableCleanUpPlus")?e.Msg.CLEAN_UP=this.m("clean-plus"):e.Msg.CLEAN_UP=o}),this.addon.tab.createBlockContextMenu((t,n)=>(t.push({enabled:e.clipboardXml_,text:this.m("paste"),separator:!0,_isDevtoolsFirstItem:!0,callback:()=>{let e=this.getTopBlockIDs();document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:86,ctrlKey:!0,griff:!0})),setTimeout(()=>{this.beginDragOfNewBlocksNotInIDs(e)},10)}}),t),{workspace:!0}),this.addon.tab.createBlockContextMenu((e,t)=>(e.push({enabled:!0,text:this.m("make-space"),_isDevtoolsFirstItem:!0,callback:()=>{this.doCleanUp(t)},separator:!0},{enabled:!0,text:this.m("copy-all"),callback:()=>{this.eventCopyClick(t)},separator:!0},{enabled:!0,text:this.m("copy-block"),callback:()=>{this.eventCopyClick(t,1)}},{enabled:!0,text:this.m("cut-block"),callback:()=>{this.eventCopyClick(t,2)}}),e),{blocks:!0}),this.addon.tab.createBlockContextMenu((e,t)=>("data"!==t.getCategory()&&"data-lists"!==t.getCategory()||(this.selVarID=t.getVars()[0],e.push({enabled:!0,text:this.m("swap",{var:"data"===t.getCategory()?this.m("variables"):this.m("lists")}),callback:async()=>{let e=this.getWorkspace().getVariableById(this.selVarID),t=await window.prompt(this.msg("replace",{name:e.name}));t&&this.doReplaceVariable(this.selVarID,t,e.type)},separator:!0})),e),{blocks:!0,flyout:!0})}getWorkspace(){return Blockly.getMainWorkspace()}isCostumeEditor(){return this.costTab.className.indexOf("gui_is-selected")>=0}getTopBlocks(){let e=this.getOrderedTopBlockColumns().cols,t=[];for(const n of e)t=t.concat(n.blocks);return t}doCleanUp(e){let t=this.getWorkspace(),n=e&&e.getRootBlock();s.startUndoGroup(t);let o=this.getOrderedTopBlockColumns(!0),r=o.cols,i=o.orphans.blocks.length;if(i>0&&!e){let e=this.msg("orphaned",{count:i});if(confirm(e))for(const e of o.orphans.blocks)e.dispose();else r.unshift(o.orphans)}let a=48,c=o.maxWidths;for(const e of r){let t=64,o=0;for(const r of e.blocks){let e=r===n?380:0,s=r===n?480:72,i=r.getRelativeToSurfaceXY();a-i.x==0&&t-i.y==0||r.moveBy(a-i.x,t-i.y);let l=r.getHeightWidth();t+=l.height+s;let d=c[r.id]||0;o=Math.max(o,Math.max(l.width+e,d))}a+=o+96}let l=t.getTopComments();for(const e of l)e.setVisible&&(e.setVisible(!1),e.needsAutoPositioning_=!0,e.setVisible(!0));setTimeout(()=>{let e=this.getWorkspace(),t=e.getVariableMap(),n=t.getVariablesOfType(""),o=[];for(const e of n)if(e.isLocal){let n=t.getVariableUsesById(e.getId());n&&0!==n.length||o.push(e)}if(o.length>0){const t=o.length;let n=this.msg("unused-var",{count:t});for(let e=0;e<o.length;e++){let t=o[e];e>0&&(n+=", "),n+=t.name}if(confirm(n))for(const t of o)e.deleteVariableById(t.getId())}let r=t.getVariablesOfType("list"),i=[];for(const e of r)if(e.isLocal){let n=t.getVariableUsesById(e.getId());n&&0!==n.length||i.push(e)}if(i.length>0){const t=i.length;let n=this.msg("unused-list",{count:t});for(let e=0;e<i.length;e++){let t=i[e];e>0&&(n+=", "),n+=t.name}if(confirm(n))for(const t of i)e.deleteVariableById(t.getId())}s.endUndoGroup(e)},100)}isBlockAnOrphan(e){return!!e.outputConnection}getOrderedTopBlockColumns(e){let t=this.getWorkspace(),n=t.getTopBlocks(),o={};if(e){let e=t.getTopComments();for(const t of e)if(t.setVisible){t.setVisible(!1),t.needsAutoPositioning_=!0,t.setVisible(!0);let e=t.getBoundingRectangle().bottomRight.x,n=t.block_.getRootBlock(),r=n.getBoundingRectangle().topLeft.x;o[n.id]=Math.max(e-r,o[n.id]||0)}}let r=[];let s={x:-999999,count:0,blocks:[]};for(const t of n){let n=t.getRelativeToSurfaceXY(),o=null,i=256;if(e&&this.isBlockAnOrphan(t))s.blocks.push(t);else{for(const e of r){let t=Math.abs(n.x-e.x);t<i&&(i=t,o=e)}o?(o.x=(o.x*o.count+n.x)/++o.count,o.blocks.push(t)):r.push(new a(n.x,1,[t]))}}r.sort((e,t)=>e.x-t.x);for(const e of r)e.blocks.sort((e,t)=>e.getRelativeToSurfaceXY().y-t.getRelativeToSurfaceXY().y);return{cols:r,orphans:s,maxWidths:o}}getVariableUsesById(e){let t=[],n=this.getTopBlocks(!0);for(const o of n){let n=o.getDescendants();for(const o of n){let n=o.getVarModels();if(n)for(const r of n)r.getId()===e&&t.push(o)}}return t}doReplaceVariable(e,t,n){let o=this.getWorkspace(),r=o.getVariable(t,n);if(!r)return void alert(this.msg("var-not-exist"));let i=r.getId();s.startUndoGroup(o);let a=this.getVariableUsesById(e);for(const e of a)try{""===n?e.getField("VARIABLE").setValue(i):e.getField("LIST").setValue(i)}catch(e){}s.endUndoGroup(o)}getTopBlockIDs(){let e=this.getWorkspace().getTopBlocks(),t=new Set;for(const n of e)t.add(n.id);return t}beginDragOfNewBlocksNotInIDs(e){if(!this.addon.settings.get("enablePasteBlocksAtMouse"))return;let t=this.getWorkspace().getTopBlocks();for(const n of t)if(!e.has(n.id)){let e={x:this.mouseXY.x,y:this.mouseXY.y};n.setIntersects(!0),this.domHelpers.triggerDragAndDrop(n.svgPath_,null,e)}}updateMousePosition(e){this.mouseXY.x=e.clientX,this.mouseXY.y=e.clientY}eventMouseMove(e){this.updateMousePosition(e)}eventKeyDown(e){const t=e=>{let t=this.costTabBody.querySelector("div[class*='sprite-selector-item_is-selected']"),n=e?t.parentNode.previousSibling:t.parentNode.nextSibling;if(n){let e=n.closest("div[class*=gui_flex-wrapper]");n.querySelector("div[class^='sprite-selector-item_sprite-name']").click(),n.scrollIntoView({behavior:"auto",block:"center",inline:"start"}),e.scrollTop=0}};if(document.URL.indexOf("editor")<=0)return;let n=e.ctrlKey||e.metaKey;if(37===e.keyCode&&n){if("INPUT"===document.activeElement.tagName)return;if(this.isCostumeEditor())return t(!0),e.cancelBubble=!0,e.preventDefault(),!0}if(39===e.keyCode&&n){if("INPUT"===document.activeElement.tagName)return;if(this.isCostumeEditor())return t(!1),e.cancelBubble=!0,e.preventDefault(),!0}if(86===e.keyCode&&n&&!e.griff){let e=this.getTopBlockIDs();setTimeout(()=>{this.beginDragOfNewBlocksNotInIDs(e)},10)}}eventCopyClick(e,t){let n=this.getWorkspace();if(e){e.select();let o=t?e.getNextBlock():null;o&&o.unplug(!1),document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:67,ctrlKey:!0})),(o||2===t)&&setTimeout(()=>{o&&n.undo(),2===t&&(s.startUndoGroup(n),e.dispose(!0),s.endUndoGroup(n))},0)}}eventMouseDown(e){this.updateMousePosition(e)}eventMouseUp(e){this.updateMousePosition(e)}initInner(e){var t=this;let n=e.childNodes;this.codeTab&&n[0]!==this.codeTab&&this.domHelpers.unbindAllEvents(),this.codeTab=n[0],this.costTab=n[1],this.costTabBody=document.querySelector("div[aria-labelledby="+this.costTab.id+"]"),this.domHelpers.bindOnce(document,"keydown",(function(){return t.eventKeyDown(...arguments)}),!0),this.domHelpers.bindOnce(document,"mousemove",(function(){return t.eventMouseMove(...arguments)}),!0),this.domHelpers.bindOnce(document,"mousedown",(function(){return t.eventMouseDown(...arguments)}),!0),this.domHelpers.bindOnce(document,"mouseup",(function(){return t.eventMouseUp(...arguments)}),!0)}}class a{constructor(e,t,n){this.x=e,this.count=t,this.blocks=n}}const c={"userscript.js":async function(e){let{addon:t,console:n,msg:o,safeMsg:r}=e;new i(t,o,r).init()},"icon--close.svg":"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3LjQ4IDcuNDgiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6MnB4O308L3N0eWxlPjwvZGVmcz48dGl0bGU+aWNvbi0tYWRkPC90aXRsZT48bGluZSBjbGFzcz0iY2xzLTEiIHgxPSIzLjc0IiB5MT0iNi40OCIgeDI9IjMuNzQiIHkyPSIxIi8+PGxpbmUgY2xhc3M9ImNscy0xIiB4MT0iMSIgeTE9IjMuNzQiIHgyPSI2LjQ4IiB5Mj0iMy43NCIvPjwvc3ZnPg=="}},1913:function(e,t,n){"use strict";var o;function r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"resources",(function(){return $}));const s=0,i=1,a=2,c=3,l=4,d=5;class u{constructor(e,t,n){if(this.constructor===u)throw new Error("Abstract classes can't be instantiated.");this.type=e,this.inputIdx=t,this.fieldIdx=n}setValue(e,t){throw new Error("Sub-class must override abstract method.")}getInput(e){return e.inputList[this.inputIdx]}getField(e){return-1===this.fieldIdx?this.getInput(e).connection.targetBlock().inputList[0].fieldRow[0]:this.getInput(e).fieldRow[this.fieldIdx]}}class p extends u{constructor(e,t,n,o){if(super(e,t,n),this.constructor===p)throw new Error("Abstract classes can't be instantiated.");this.defaultValue=o}setValue(e,t){if(t instanceof v){const n=t.createWorkspaceForm();if(!n.outputConnection)throw new Error('Cannot put block "'+n.typeInfo.id+'" into a round type input.');n.outputConnection.connect(this.getInput(e).connection)}else this.getField(e).setValue(this._toFieldValue(t))}_toFieldValue(e){throw new Error("Sub-class must override abstract method.")}}class h extends p{constructor(e,t,n){super(s,e,t,n)}_toFieldValue(e){const t=typeof e;if("number"===t)return e;if("string"===t)return e;throw new Error("Cannot set round type input to value of type "+t)}}class g extends p{constructor(e,t,n){super(i,e,t,n)}_toFieldValue(e){const t=typeof e;if("number"===t)return e;if("string"===t){const t=parseFloat(e);if(isNaN(t))throw new Error('Cannot set numeric type input to string "'+e+'".');return e}throw new Error("Cannot set round type input to value of type "+t)}}class f extends u{constructor(e,t){super(a,e,t)}setValue(e,t){if(!(t instanceof v))throw new Error("Boolean type inputs can only contain blocks.");{const n=t.createWorkspaceForm();if(!n.outputConnection||t.typeInfo.shape!==k.Boolean)throw new Error('Cannot put block "'+t.typeInfo.id+'" into a boolean type input.');n.outputConnection.connect(this.getInput(e).connection)}}}class m extends u{constructor(e,t){super(c,e,t)}setValue(e,t){if("string"!=typeof t)throw new Error("Cannot set color type input to value of type "+typeof type);if(!t.match(/^#[0-9a-fA-F]{6}$/))throw new Error('Invalid color "'+t+'".');this.getField(e).setValue(t)}}class b extends u{constructor(e,t,n,o){super(l,t,n),this.values=[];for(let t=0;t<e.length;t++)"string"==typeof e[t][1]&&-1===b.INVALID_VALUES.indexOf(e[t][1])&&this.values.push({value:e[t][1],string:e[t][0].replaceAll(String.fromCharCode(160)," ")});this.isRound=o}setValue(e,t){if(this.isRound&&t instanceof v)t.createWorkspaceForm().outputConnection.connect(this.getInput(e).connection);else{if(-1===this.values.indexOf(t))throw new Error("Invalid enum value. Expected item from the options list.");this.getField(e).setValue(t.value)}}}r(b,"INVALID_VALUES",["DELETE_VARIABLE_ID","RENAME_VARIABLE_ID","NEW_BROADCAST_MESSAGE_ID","NEW_BROADCAST_MESSAGE_ID","createGlobalVariable","createLocalVariable","createGlobalList","createLocalList","createBroadcast","RENAME_BROADCAST_MESSAGE_ID"]);class y extends u{constructor(e,t){super(d,e,t)}setValue(e,t){if(!(t instanceof v))throw new Error("Block type inputs can only contain blocks.");{const n=t.createWorkspaceForm();if(!n.previousConnection||!t.typeInfo.shape.canStackUp)throw new Error('Cannot put block "'+t.typeInfo.id+'" into a block type input.');n.previousConnection.connect(this.getInput(e).connection)}}}class v{constructor(e){this.typeInfo=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this.inputs=n}createWorkspaceForm(){"control_stop"===this.typeInfo.id&&this.typeInfo.domForm.querySelector("mutation").setAttribute("hasnext",""+("other scripts in sprite"===this.inputs[0].value));const e=this.typeInfo.Blockly.Xml.domToBlock(this.typeInfo.domForm,this.typeInfo.workspace);for(let t=0;t<this.inputs.length;t++)null!==this.inputs[t]&&this.typeInfo.inputs[t].setValue(e,this.inputs[t]);return e}}class k{static getBlockShape(e){return 2===e.edgeShape_?k.Round:1===e.edgeShape_?k.Boolean:e.startHat_?k.Hat:e.nextConnection?k.Stack:k.End}constructor(e,t,n){this.canStackUp=e,this.canStackDown=t,this.canBeRound=n}}r(k,"Round",new(o=k)(!1,!1,!0)),r(k,"Boolean",new o(!1,!1,!0)),r(k,"Hat",new o(!1,!0,!1)),r(k,"End",new o(!0,!1,!1)),r(k,"Stack",new o(!0,!0,!1));class x{static getBlockCategory(e,t){let n;return n="procedures_call"===e.type?t.getAddonBlock(e.getProcCode())?"addon-custom-block":"more":e.isScratchExtension?"pen":"sensing_of"===e.type?"sensing":"event_whenbackdropswitchesto"===e.type?"events":e.category_,{name:n,colorPrimary:e.colour_,colorSecondary:e.colourSecondary_,colorTertiary:e.colourTertiary_}}static getBlocks(e,t,n,o){var r;const s=null===(r=n.getToolbox())||void 0===r?void 0:r.flyout_.getWorkspace();if(!s)return[];const i=[],a=e.Xml.workspaceToDom(s),c={};for(const e of a.children)if("BLOCK"===e.tagName){c[e.getAttribute("id")]=e}for(const r of s.getTopBlocks())i.push(...x._createBlocks(n,t,e,o,r,c[r.id]));return i}static _createBlocks(e,t,n,o,r,s){let i=[],a=[];const c=e=>{i.push(e),a.push(e)},l=(e,t,o)=>{if("blocklyText blocklyDropdownText"===e.className_){const n=e.getOptions();c(new b(n,t,o,-1===o))}else if(e instanceof n.FieldImage)switch(e.src_){case"static/blocks-media/green-flag.svg":case"static/blocks-media/blue-flag.svg":i.push("flag");break;case"static/blocks-media//icons/control_stop.svg":case"static/blocks-media/icons/control_stop.svg":i.push("stop");break;case"static/blocks-media/rotate-right.svg":i.push("clockwise");break;case"static/blocks-media/rotate-left.svg":i.push("anti-clockwise")}else e.argType_?"colour"===e.argType_[0]?c(new m(t,o)):"number"===e.argType_[1]?c(new g(t,o,e.text_)):c(new h(t,o,e.text_)):0!==e.getText().trim().length&&i.push(e.getText())};for(let e=0;e<(null===(d=r.inputList)||void 0===d?void 0:d.length);e++){var d;const t=r.inputList[e];for(let n=0;n<t.fieldRow.length;n++)l(t.fieldRow[n],e,n);if(t.connection){const n=t.connection.targetBlock();if(n){if(1===n.inputList.length&&1===n.inputList[0].fieldRow.length){l(n.inputList[0].fieldRow[0],e,-1)}}else t.outlinePath?c(new f(e,-1)):c(new y(e,-1))}}if("of"===r.id){let o,c,l=[];a[0].isRound?(o=1,c=0):(o=0,c=1);let d=a[o],u=a[c];const p=i.indexOf(d),h=i.indexOf(u),g=[[n.Msg.SENSING_OF_BACKDROPNUMBER,"backdrop #"],[n.Msg.SENSING_OF_BACKDROPNAME,"backdrop name"],[n.Msg.SENSING_OF_VOLUME,"volume"]],f=[[n.Msg.SENSING_OF_XPOSITION,"x position"],[n.Msg.SENSING_OF_YPOSITION,"y position"],[n.Msg.SENSING_OF_DIRECTION,"direction"],[n.Msg.SENSING_OF_COSTUMENUMBER,"costume #"],[n.Msg.SENSING_OF_COSTUMENAME,"costume name"],[n.Msg.SENSING_OF_SIZE,"size"],[n.Msg.SENSING_OF_VOLUME,"volume"]];for(const a of u.values){let m;const y="_stage_"===a.value;if(y){m=t.runtime.getTargetForStage().getAllVariableNamesInScopeByType("").map(e=>[e,e]).concat(g)}else{m=t.runtime.getSpriteTargetByName(a.value).getAllVariableNamesInScopeByType("",!0).map(e=>[e,e]).concat(f)}const v=[];v[o]=new b(m,d.inputIdx,d.fieldIdx,!1),v[c]=new b([[a.string,a.value]],u.inputIdx,u.fieldIdx,y);const k=[...i];k[p]=v[o],k[h]=v[c],l.push(new x(e,n,t,r,s,k,v))}return l}return[new x(e,n,t,r,s,i,a)]}constructor(e,t,n,o,r,s,i){this.id=o.id,this.workspaceForm=o,this.domForm=r,this.shape=k.getBlockShape(this.workspaceForm),this.category=x.getBlockCategory(this.workspaceForm,n),this.workspace=e,this.Blockly=t,this.parts=s,this.inputs=i}createBlock(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new v(this,...t)}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S{constructor(e,t,n,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];this.start=e,this.end=t,this.type=n,this.value=o,this.score=r,this.precedence=s,this.isTruncated=i,this.isLegal=a}createBlockValue(e){return this.type.createBlockValue(this,e)}}class C{constructor(e){if(this.constructor===C)throw new Error("Abstract classes can't be instantiated.");this.shouldCache=e}*parseTokens(e,t){throw new Error("Sub-class must override abstract method.")}}class T extends C{constructor(e){super(e.shouldCache),this.inner=e}*parseTokens(e,t){yield A.INSTANCE.createToken(t),yield*this.inner.parseTokens(e,t)}}class M extends C{constructor(e){super(!1),this.inner=e,this.inner.shouldCache&&(this.cache=[],this.cacheQueryID=null)}*parseTokens(e,t){if(!this.inner.shouldCache)return void(yield*this.inner.parseTokens());this.cacheQueryID!==e.id&&(this.cache=[],this.cacheQueryID=e.id);let n=this.cache[t];if(n)yield*n;else{this.cacheEntry=[];for(const n of this.inner.parseTokens(e,t))this.cacheEntry.push(n),yield n}}}class E extends C{constructor(){super(!1),this.providers=[],this.illegalProviders=[],this.cache=null,this.cacheQueryID=null,this.hasCacheable=!1}pushProviders(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.hasCacheable)for(const t of e)if(t.shouldCache){this.hasCacheable=!0;break}t?this.providers.push(...e):this.illegalProviders.push(...e)}*parseTokens(e,t){if(!this.hasCacheable){for(const n of this.providers)yield*n.parseTokens(e,t,!1);return}if(this.cacheQueryID!==e.id)this.cache=[],this.cacheQueryID=e.id;else{const n=this.cache[t];if(n){const o=n.tokenCaches,r=n.providerCaches;for(let n=0;n<o.length;n++){const s=o[n],i=r[n];for(const n of i)yield*n.parseTokens(e,t,!1);yield*s}return}}let n=[],o=[];const r=[n],s=[o];this.cache[t]={tokenCaches:r,providerCaches:s};for(const i of this.providers)if(i.shouldCache)for(const o of i.parseTokens(e,t,!1))n.push(o),yield o;else 0!==n.length&&(n=[],o=[],r.push(n),s.push(o)),o.push(i),yield*i.parseTokens(e,t,!1);for(const o of this.illegalProviders)for(let r of o.parseTokens(e,t,!1))r=I(I({},r),{},{isLegal:!1}),n.push(r),yield r}}class L extends C{constructor(){if(super(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])),this.constructor===L)throw new Error("Abstract classes can't be instantiated.");this.isDefiningFeature=!1,this.isConstant=!1}createBlockValue(e,t){return e.value}createText(e,t,n){throw new Error("Sub-class must override abstract method.")}getSubtokens(e,t){}}class A extends L{constructor(){super(),this.isConstant=!0}*parseTokens(e,t){yield this.createToken(t)}createToken(e){return new S(e,e,this,null,-5e3)}createText(e,t){return""}}_(A,"INSTANCE",new A);class N extends L{constructor(e){super(),this.isConstant=1===e.length,this.isDefiningFeature=!0,this.values=[];for(const t of e){let e=t.string.toLowerCase();e=e.replaceAll(/[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\u{1F000}-\u{1F0FF}\u{1F10D}-\u{1F10F}\u{1F12F}\u{1F16C}-\u{1F171}\u{1F17E}\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1AD}-\u{1F1E5}\u{1F201}-\u{1F20F}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F23C}-\u{1F23F}\u{1F249}-\u{1F3FA}\u{1F400}-\u{1F53D}\u{1F546}-\u{1F64F}\u{1F680}-\u{1F6FF}\u{1F774}-\u{1F77F}\u{1F7D5}-\u{1F7FF}\u{1F80C}-\u{1F80F}\u{1F848}-\u{1F84F}\u{1F85A}-\u{1F85F}\u{1F888}-\u{1F88F}\u{1F8AE}-\u{1F8FF}\u{1F90C}-\u{1F93A}\u{1F93C}-\u{1F945}\u{1F947}-\u{1FAFF}\u{1FC00}-\u{1FFFD}]/gu,"");const n=[];{let t=0;for(let o=0;o<=e.length;o++){const r=e[o];-1===z.IGNORABLE_CHARS.indexOf(r)&&r||(n.push(e.substring(t,o)),o=z.skipIgnorable(e,o),t=o)}}this.values.push({lower:e,parts:n,value:t})}}*parseTokens(e,t){for(let n=0;n<this.values.length;n++){const o=this.values[n];let r=!1;const s=e.length-t;if(s<o.lower.length){if(o.lower.startsWith(e.lowercase.substring(t))){const n=s<0?0:e.length;yield new S(t,n,this,o,1e5,void 0,!0),r=!0}}else e.lowercase.startsWith(o.lower,t)&&-1!==j.TERMINATORS.indexOf(e.lowercase[t+o.lower.length])&&(yield new S(t,t+o.lower.length,this,o,1e5),r=!0)}}createBlockValue(e,t){return e.value.value}createText(e,t,n){return e?e.value.lower:this.values[0].lower}}class j extends L{*parseTokens(e,t){let n=-1;if('"'===e.str[t]||'"'===e.str[t]){const o=e.str[t];for(let r=t+1;r<=e.length;r++)if("\\"===e.str[r])++r;else if(e.str[r]===o){yield new S(t,r+1,this,e.str.substring(t+1,r),1e5),n=r+1;break}}let o=!1,r=!1;for(let s=t;s<=e.length;s++){const i=-1!==j.TERMINATORS.indexOf(e.str[s]);if(o!==i&&!r&&s!==t&&s!==n){const n=e.str.substring(t,s);let o=-10;D.isValidNumber(n)&&(o=1e3),yield new S(t,s,this,n,o)}o=i,r=-1!==z.IGNORABLE_CHARS.indexOf(e.str[s])}}createText(e,t,n){return t.str.substring(e.start,e.end)}}_(j,"TERMINATORS",[void 0," ","+","-","*","/","=","<",">",")"]);class D extends L{static isValidNumber(e){return!isNaN(e)&&!isNaN(parseFloat(e))}*parseTokens(e,t){for(let n=t;n<=e.length;n++)if(-1!==j.TERMINATORS.indexOf(e.str[n])&&n!==t){const o=e.str.substring(t,n);if(D.isValidNumber(o)){yield new S(t,n,this,o,1e5);break}}}createText(e,t,n){return t.str.substring(e.start,e.end)}}class B extends L{*parseTokens(e,t){if(e.str.startsWith("#",t)){for(let n=0;n<6;n++)if(-1===B.HEX_CHARS.indexOf(e.lowercase[t+n+1]))return;yield new S(t,t+7,this,e.str.substring(t,t+7))}}createText(e,t,n){return t.query.substring(e.start,e.end)}}_(B,"INSTANCE",new T(new B)),_(B,"HEX_CHARS",["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"]);class O extends L{constructor(e){super(),this.tokenProvider=e}*parseTokens(e,t){const n=t;if("("===e.str[t++]){t=e.skipIgnorable(t);for(const r of this.tokenProvider.parseTokens(e,t)){if(r.type instanceof A)continue;var o=e.skipIgnorable(r.end);let t=r.isTruncated;if(!t)if(o===e.length)t=!0;else{if(")"!==e.str[o])continue;++o}const s=new S(n,o,this,r.value,r.score+100,0,t,r.isLegal);s.innerToken=r,yield s}}}createBlockValue(e,t){return e.innerToken.createBlockValue(e.innerToken,t)}createText(e,t,n){let o="(";return o+=t.str.substring(e.start+1,e.innerToken.start),o+=e.innerToken.type.createText(e.innerToken,t,n),e.innerToken.end!==e.end&&(o+=t.str.substring(e.innerToken.end,e.end-1)),o+=")",o}getSubtokens(e,t){return[e.innerToken]}}class P extends L{constructor(e,t){var n;super(),n=this,this.block=t,this.hasSubTokens=!0,this.fullTokenProviders=[];for(const n of t.parts){let t;if("string"==typeof n)t=new N([{value:null,string:n}]);else switch(n.type){case l:if(t=new N(n.values),n.isRound){const n=new E;n.pushProviders([t,e.tokenGroupRoundBlocks]),t=n}break;case s:t=e.tokenGroupString;break;case i:t=e.tokenGroupNumber;break;case c:t=B.INSTANCE;break;case a:t=e.tokenGroupBoolean;break;case d:t=e.tokenGroupStack}this.fullTokenProviders.push(t)}this.stringForms=[];const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(;e<t.parts.length;e++){let n=t.parts[e];if("string"==typeof n)r.push(...n.toLowerCase().split(" "));else{if(n.type===l){for(const t of n.values)o(e+1,[...r,...t.string.toLowerCase().split(" ")],[...s,t]);return}s.push(null)}}const i=r.flatMap(e=>e.length),a=-10*(i.length?i.reduce((e,t)=>e+t+1):1);n.stringForms.push({strings:r,inputs:s,score:a})};o()}*parseTokens(e,t){let n=!1;for(const o of this._parseSubtokens(e,t,this.fullTokenProviders)){let r=this._createToken(e,t,this.fullTokenProviders,o);r&&(yield r,n=!0)}if(!n)e:for(const n of this.stringForms){let o=-1,r=t,s=!1;for(;r<e.length;){r=e.skipIgnorable(r);const i=e.skipUnignorable(r);if(i===r)yield new S(t,i,this,{stringForm:n,lastPartIdx:-1},n.score,-1,!1);else{const a=e.lowercase.substring(r,i);let c=-1;for(let e=o+1;e<n.strings.length;e++){if(n.strings[e].startsWith(a)){c=e;break}}if(-1===c)continue e;o=c,s||(s=!D.isValidNumber(a)),s&&(yield new S(t,i,this,{stringForm:n,lastPartIdx:o,i:r},n.score,-1,!1)),r=i}}}}_createToken(e,t,n,o){o.reverse();let r=0,s=!0,i=o.length<n.length,a=!1;for(const t of o)i|=t.isTruncated,s&&(s=t.isLegal),t.isTruncated?r+=t.score/1e5-10:r+=t.score,t.type.isDefiningFeature&&t.start<e.length&&(a=!0);if(r+=Math.floor(o.length/n.length*1e3),!a)return null;const c=e.skipIgnorable(o[o.length-1].end);return new S(t,c,this,{subtokens:o},r,this.block.precedence,i,s)}_parseSubtokens(e,t,n){var o=this;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return function*(){t=e.skipIgnorable(t);let i=n[r];for(const a of i.parseTokens(e,t)){if(++e.tokenCount,!e.canCreateMoreTokens())break;if(-1!==o.block.precedence){if(a.precedence>o.block.precedence)continue;if(a.precedence===o.block.precedence&&0!==r)continue}if(s&&a.isLegal&&r!==n.length-1)for(const t of o._parseSubtokens(e,a.end,n,r+1,!a.isTruncated))t.push(a),yield t;else yield[a]}}()}createBlockValue(e,t){if(!e.isLegal)throw new Error("Cannot create a block from an illegal token.");let n;if(e.value.stringForm)n=e.value.stringForm.inputs;else{const o=e.value.subtokens;n=[];for(let e=0;e<o.length;e++){"string"!=typeof this.block.parts[e]&&n.push(o[e].createBlockValue(t))}for(;n.length<this.block.inputs.length;)n.push(null)}return this.block.createBlock(...n)}createText(e,t,n){if(e.value.stringForm)return n?-1===e.value.lastPartIdx?t.str.substring(e.start,e.end):t.str.substring(e.start,e.end)+e.value.stringForm.strings[e.value.lastPartIdx].substring(e.end-e.value.i)+" "+e.value.stringForm.strings.slice(e.value.lastPartIdx+1).join(" "):e.value.stringForm.strings.join(" ");if(!e.isTruncated&&n)return t.str.substring(e.start,e.end);const o=e.value.subtokens;let r,s="";for(e.start!==o[0].start&&(s+=t.str.substring(e.start,o[0].start)),r=0;r<o.length;r++){var i;const e=o[r],a=null!==(i=e.type.createText(e,t,n))&&void 0!==i?i:"";if(s+=a,r!==o.length-1){const i=o[r+1].start;i!==e.end?s+=t.str.substring(e.end,i):(!n||i>=t.length)&&0!==a.length&&-1===z.IGNORABLE_CHARS.indexOf(a.at(-1))&&(s+=" ")}}for(;r<this.fullTokenProviders.length;r++){const e=this.fullTokenProviders[r];if(!e.isConstant)break;s.endsWith(" ")||(s+=" "),s+=e.createText()}return s}getSubtokens(e,t){return e.value.subtokens}}class R{constructor(e,t){this.query=e,this.token=t}get isTruncated(){return this.token.isTruncated}toText(e){var t;return null!==(t=this.token.type.createText(this.token,this.query,e))&&void 0!==t?t:""}createBlock(){return this.token.createBlockValue(this.query)}}class z{constructor(e,t,n){this.querier=e,this.str=t.replaceAll(String.fromCharCode(160)," "),this.lowercase=this.str.toLowerCase(),this.id=n,this.tokenCount=0}static skipIgnorable(e,t){for(;-1!==z.IGNORABLE_CHARS.indexOf(e[t]);)++t;return t}skipIgnorable(e){return z.skipIgnorable(this.lowercase,e)}static skipUnignorable(e,t){for(;-1===z.IGNORABLE_CHARS.indexOf(e[t])&&t<e.length;)++t;return t}skipUnignorable(e){return z.skipUnignorable(this.lowercase,e)}get length(){return this.str.length}canCreateMoreTokens(){return this.tokenCount<W.MAX_TOKENS}}_(z,"IGNORABLE_CHARS",[" "]);class W{indexWorkspace(e){this._queryCounter=0,this._createTokenGroups(),this._populateTokenGroups(e),this.workspaceIndexed=!0}queryWorkspace(e){if(!this.workspaceIndexed)throw new Error("A workspace must be indexed before it can be queried!");if(0===e.trim().length)return{results:[],illegalResult:null,limited:!1};const t=new z(this,e,this._queryCounter++),n=[];let o=0,r=null,s=!1;for(const a of this.tokenGroupBlocks.parseTokens(t,0)){var i;if(a.end>=e.length)if(a.isLegal)a.score+=null!==(i=W.SCORE_BUMP[a.type.block.id])&&void 0!==i?i:0,n.push(new R(t,a));else(!r||a.score>=r.token.score)&&(r=new R(t,a));if(++o,o>W.MAX_RESULTS){console.log("Warning: Workspace query exceeded maximum result count."),s=!0;break}if(!t.canCreateMoreTokens()){console.log("Warning: Workspace query exceeded maximum token count."),s=!0;break}}const a=Array(e.length).fill(!0);function c(e){const n=e.type.getSubtokens(e,t);if(n)for(const e of n)c(e);else if(!(e.type instanceof j||e.isTruncated))for(let t=e.start;t<e.end;t++)a[t]=!1}for(const e of n)c(e.token);function l(e){const n=e.type.getSubtokens(e,t);if(n){for(const e of n)if(!l(e))return!1}else if(e.type instanceof j&&!D.isValidNumber(e.value))for(let t=e.start;t<e.end;t++)if(!a[t])return!1;return!0}const d=[];for(const e of n)l(e.token)&&d.push(e);return{results:d.sort((e,t)=>t.token.score-e.token.score),illegalResult:r,limited:s}}_createTokenGroups(){this.tokenTypeStringLiteral=new M(new j),this.tokenTypeNumberLiteral=new M(new D),this.tokenGroupRoundBlocks=new E,this.tokenGroupBooleanBlocks=new E,this.tokenGroupStackBlocks=new E,this.tokenGroupHatBlocks=new E,this.tokenGroupBoolean=new T(new E),this.tokenGroupBoolean.inner.pushProviders([this.tokenGroupBooleanBlocks,new O(this.tokenGroupBoolean)]),this.tokenGroupBoolean.inner.pushProviders([this.tokenGroupRoundBlocks],!1),this.tokenGroupNumber=new T(new E),this.tokenGroupNumber.inner.pushProviders([this.tokenTypeNumberLiteral,this.tokenGroupRoundBlocks,this.tokenGroupBooleanBlocks,new O(this.tokenGroupNumber)]),this.tokenGroupString=new T(new E),this.tokenGroupString.inner.pushProviders([this.tokenTypeStringLiteral,this.tokenGroupRoundBlocks,this.tokenGroupBooleanBlocks,new O(this.tokenGroupString)]),this.tokenGroupStack=new T(this.tokenGroupStackBlocks),this.tokenGroupBlocks=new E,this.tokenGroupBlocks.pushProviders([this.tokenGroupStackBlocks,this.tokenGroupBooleanBlocks,this.tokenGroupRoundBlocks,this.tokenGroupHatBlocks])}_populateTokenGroups(e){e.sort((e,t)=>W.CATEGORY_PRIORITY.indexOf(t.category.name)-W.CATEGORY_PRIORITY.indexOf(e.category.name));for(const t of e)t.precedence=W.ORDER_OF_OPERATIONS.indexOf(t.id);for(let t=e.length-1;t>=0;t--){const n=e[t];if(-1!==n.precedence){const o=e.length-(W.ORDER_OF_OPERATIONS.length-(n.precedence-1));if(t!==o){const r=e[o];e[o]=n,e[t]=r}}}for(const t of e){const e=new P(this,t);switch(t.shape){case k.Round:this.tokenGroupRoundBlocks.pushProviders([e]);break;case k.Boolean:this.tokenGroupBooleanBlocks.pushProviders([e]);break;case k.Stack:case k.End:this.tokenGroupStackBlocks.pushProviders([e]);break;case k.Hat:this.tokenGroupHatBlocks.pushProviders([e])}}}clearWorkspaceIndex(){this.workspaceIndexed=!1,this._destroyTokenGroups()}_destroyTokenGroups(){this.tokenTypeStringLiteral=null,this.tokenTypeNumberLiteral=null,this.tokenGroupBooleanBlocks=null,this.tokenGroupRoundBlocks=null,this.tokenGroupStackBlocks=null,this.tokenGroupHatBlocks=null,this.tokenGroupBoolean=null,this.tokenGroupNumber=null,this.tokenGroupString=null,this.tokenGroupStack=null,this.tokenGroupBlocks=null}}_(W,"ORDER_OF_OPERATIONS",[null,"operator_round","operator_mathop","operator_mod","operator_divide","operator_multiply","operator_subtract","operator_add","operator_equals","operator_lt","operator_gt","operator_or","operator_and","operator_not"]),_(W,"CATEGORY_PRIORITY",["control","events","data","operators"]),_(W,"SCORE_BUMP",{control_if:1e5,control_if_else:1e5,data_setvariableto:99999}),_(W,"MAX_RESULTS",1e3),_(W,"MAX_TOKENS",1e4);const F=new Map,G=new EventTarget;const Z="http://www.w3.org/2000/svg",H={Round:{padding:12,minWidth:20,backgroundPath:e=>"m -12 -20 m 20 0 h ".concat(e-16," a 20 20 0 0 1 0 40 H 8 a 20 20 0 0 1 0 -40 z"),snugglePadding:0,get snuggleWith(){return[H.Round]}},Boolean:{padding:20,minWidth:20,backgroundPath:e=>"m -20 -20 m 20 0 h ".concat(e," l 20 20 l -20 20 H 0 l -20 -20 l 20 -20 z"),snugglePadding:0,get snuggleWith(){return[H.Boolean]}},SquareInput:{padding:8,minWidth:20,backgroundPath:e=>"m -2 -16 h ".concat(e+4," a 4 4 0 0 1 4 4 V 12 a 4 4 0 0 1 -4 4 H -2 a 4 4 0 0 1 -4 -4 V -12 a 4 4 0 0 1 4 -4")},Stack:{padding:8,minWidth:60,backgroundPath:e=>"m -8 -20 A 4 4 0 0 1 -4 -24 H 4 c 2 0 3 1 4 2 l 4 4 c 1 1 2 2 4 2 h 12 c 2 0 3 -1 4 -2 l 4 -4 C 37 -23 38 -24 40 -24 H ".concat(e," a 4 4 0 0 1 4 4 v 40 a 4 4 0 0 1 -4 4 H 40 c -2 0 -3 1 -4 2 l -4 4 c -1 1 -2 2 -4 2 h -12 c -2 0 -3 -1 -4 -2 l -4 -4 c -1 -1 -2 -2 -4 -2 H -4 a 4 4 0 0 1 -4 -4 z")},Hat:{padding:8,minWidth:60,backgroundPath:e=>"m -8 -20 A 4 4 0 0 1 -4 -24 H ".concat(e," a 4 4 0 0 1 4 4 v 40 a 4 4 0 0 1 -4 4 H 40 c -2 0 -3 1 -4 2 l -4 4 c -1 1 -2 2 -4 2 h -12 c -2 0 -3 -1 -4 -2 l -4 -4 c -1 -1 -2 -2 -4 -2 H -4 a 4 4 0 0 1 -4 -4 z")},End:{padding:8,minWidth:60,backgroundPath:e=>"m -8 -20 A 4 4 0 0 1 -4 -24 H 4 c 2 0 3 1 4 2 l 4 4 c 1 1 2 2 4 2 h 12 c 2 0 3 -1 4 -2 l 4 -4 C 37 -23 38 -24 40 -24 H ".concat(e," a 4 4 0 0 1 4 4 v 40 a 4 4 0 0 1 -4 4 H -4 a 4 4 0 0 1 -4 -4 z")},TextInput:{padding:12,minWidth:16,backgroundPath:e=>"m -12 -16 m 16 0 h ".concat(e-8," a 16 16 0 0 1 0 32 H 4 a 16 16 0 0 1 0 -32 z"),snugglePadding:4,get snuggleWith(){return[H.Round]}},BooleanInput:{padding:16,minWidth:16,backgroundPath:e=>"m 0 -16 h ".concat(e," l 16 16 l -16 16 h -16 l -16 -16 l 16 -16 z"),snugglePadding:6,get snuggleWith(){return[H.Boolean]}},HorizontalBlock:{padding:16,minWidth:45,backgroundPath:e=>"M -4 -20 a 4 4 0 0 1 4 -4 H ".concat(e+8," a 4 4 0 0 1 4 4 v 2 c 0 2 -1 3 -2 4 l -4 4 c -1 1 -2 2 -2 4 v 12 c 0 2 1 3 2 4 l 4 4 c 1 1 2 2 2 4 v 2 a 4 4 0 0 1 -4 4 H 0 a 4 4 0 0 1 -4 -4 v -2 c 0 -2 -1 -3 -2 -4 l -4 -4 c -1 -1 -2 -2 -2 -4 v -12 c 0 -2 1 -3 2 -4 l 4 -4 c 1 -1 2 -2 2 -4 z")},HorizontalBlockEnd:{padding:16,minWidth:45,backgroundPath:e=>"M -4 -20 a 4 4 0 0 1 4 -4 H ".concat(e+8," a 4 4 0 0 1 4 4 V 20 a 4 4 0 0 1 -4 4 H 0 a 4 4 0 0 1 -4 -4 v -2 c 0 -2 -1 -3 -2 -4 l -4 -4 c -1 -1 -2 -2 -2 -4 v -12 c 0 -2 1 -3 2 -4 l 4 -4 c 1 -1 2 -2 2 -4 z")}};function Y(e){switch(e.typeInfo.shape){case k.End:case k.Hat:case k.Stack:return 62;case k.Boolean:case k.Round:return 48}return 0}class U{constructor(e,t,n,o,r){this.dom=e,this.padding=t,this.width=n,this.snuggleWith=o,this.snugglePadding=r}}function V(e,t,n){let o=n.appendChild(document.createElementNS(Z,"text"));return o.setAttribute("class","blocklyText"),o.style.fill="var(".concat(t,")"),o.setAttribute("dominant-baseline","middle"),o.setAttribute("dy",1),o.appendChild(document.createTextNode(e)),new U(o,0,function(e){let t=e.innerHTML;if(0===t.length)return 0;let n=F.get(t);return n||(n=e.getBoundingClientRect().width,F.set(t,n),F.size>1e3&&F.delete(F.keys().next()),n)}(o))}function X(){let e=document.createElementNS(Z,"g"),t=document.createElementNS(Z,"path");return t.setAttribute("class","blocklyPath"),e.appendChild(t),e}function q(e,t,n,o,r,s){s<t.minWidth&&(s=t.minWidth),e.classList.add("sa-block-color",n);const i=e.children[0];let a="";return o&&(a+="fill: var(".concat(o,");")),r&&(a+="stroke: var(".concat(r,");")),i.setAttribute("style",a),i.setAttribute("d",t.backgroundPath(s)),new U(e,t.padding,s+2*t.padding,t.snuggleWith,t.snugglePadding)}function J(e,t,n,o,r,s,i){const a=X();t.appendChild(a);const c=V(e,i,a);c.width<n.minWidth&&c.dom.setAttribute("x",(n.minWidth-c.width)/2);return q(a,n,o,r,s,c.width)}function Q(e,t){var n=function e(t,n,o,r){const s=n.appendChild(X()),i=function(e,t){if(e===k.Round)return H.Round;if(e===k.Boolean)return H.Boolean;if(e===k.Stack)return t?H.Stack:H.HorizontalBlock;if(e===k.Hat)return H.Hat;if(e===k.End)return t?H.End:H.HorizontalBlockEnd;throw new Error(e)}(t.typeInfo.shape,r),a=t.typeInfo.category,c="sa-block-color-"+String(a.name).replace(/[^a-z0-9\-_]+/gim,"_");let l=0,d=0;for(let n=0;n<t.typeInfo.parts.length;n++){const o=t.typeInfo.parts[n];let r;if("string"==typeof o)r=V(o,"--sa-block-text",s);else{const n=t.inputs[d++];if(n instanceof v)r=e(n,s,t.typeInfo.category,!1);else if(o instanceof b){var u,p;if(o.isRound)r=J(null!==(u=null==n?void 0:n.string)&&void 0!==u?u:o.values[0].string,s,H.TextInput,c,"--sa-block-background-secondary, ".concat(a.colorSecondary),"--sa-block-background-tertiary, ".concat(a.colorTertiary),"--sa-block-text");else r=J(null!==(p=null==n?void 0:n.string)&&void 0!==p?p:o.values[0].string,s,H.SquareInput,c,"--sa-block-background-primary, ".concat(a.colorPrimary),"--sa-block-background-tertiary, ".concat(a.colorTertiary),"--sa-block-text")}else if(o instanceof f)r=J("",s,H.BooleanInput,c,"--sa-block-field-background, ".concat(a.colorTertiary),"--sa-block-field-background, ".concat(a.colorTertiary),"--sa-block-text");else if(o instanceof y)r=J("",s,H.HorizontalBlock,c,"--sa-block-field-background, ".concat(a.colorTertiary),"--sa-block-field-background, ".concat(a.colorTertiary),"--sa-block-text");else{var h,g;r=J(null!==(h=null!==(g=null==n?void 0:n.toString())&&void 0!==g?g:o.defaultValue)&&void 0!==h?h:"",s,H.TextInput,c,"--sa-block-input-color, white","--sa-block-background-tertiary, ".concat(a.colorTertiary),"--sa-block-input-text"),r.dom.classList.add("blocklyNonEditableText")}}let m=l+r.padding;if((0===n||n===t.typeInfo.parts.length-1)&&r.snuggleWith&&-1!==r.snuggleWith.indexOf(i)){const e=r.snugglePadding-r.padding;r.width+=e,0===n&&(m+=e)}r.dom.setAttribute("transform","translate(".concat(m,", 0)")),l+=8+r.width}return q(s,i,c,"--sa-block-background-primary, ".concat(a.colorPrimary),"--sa-block-background-tertiary, ".concat(a.colorTertiary),l-8)}(e,t,e.typeInfo.category,!0);return n.dom.classList.add("sa-block-color"),n.dom.setAttribute("transform","translate(".concat(n.padding,", 0)")),n}var K=n(1831);const $={"userscript.js":async function(e){let{addon:t,msg:n,console:o}=e;const r=await t.tab.traps.getBlockly(),s=t.tab.traps.vm,i=document.body.appendChild(document.createElement("div"));i.classList.add("sa-mcp-root"),i.dir=t.tab.direction,i.style.display="none";const a=i.appendChild(document.createElement("div"));a.classList.add("sa-mcp-container");const c=a.appendChild(document.createElement("div"));c.classList.add(t.tab.scratchClass("input_input-form")),c.classList.add("sa-mcp-input-wrapper");const l=c.appendChild(document.createElement("input"));l.classList.add("sa-mcp-input-suggestion");const d=c.appendChild(document.createElement("input"));d.classList.add("sa-mcp-input"),d.setAttribute("autocomplete","off");const u=a.appendChild(document.createElement("div"));u.classList.add("sa-mcp-preview-container");const p=a.appendChild(document.createElementNS("http://www.w3.org/2000/svg","svg"));p.classList.add("sa-mcp-preview-scrollbar","blocklyScrollbarVertical","blocklyMainWorkspaceScrollbar"),p.style.display="none";const h=p.appendChild(document.createElementNS("http://www.w3.org/2000/svg","rect"));h.setAttribute("width","11"),h.classList.add("blocklyScrollbarBackground");const g=p.appendChild(document.createElementNS("http://www.w3.org/2000/svg","rect"));g.setAttribute("rx","3"),g.setAttribute("ry","3"),g.setAttribute("width","6"),g.setAttribute("x","2.5"),g.classList.add("blocklyScrollbarHandle");const f=u.appendChild(document.createElementNS("http://www.w3.org/2000/svg","svg"));f.classList.add("sa-mcp-preview-blocks");const m=new W;let b={x:0,y:0};var y;document.addEventListener("mousemove",e=>{b={x:e.clientX,y:e.clientY}}),y=N,G.addEventListener("clearTextCache",y);let v=[],k=null,w=0,I=null,_=!1,S=!0,C=null,T=0,M=0,E=0,L=0;function A(){t.self.disabled||0===t.tab.redux.state.scratchGui.editorTab.activeTabIndex&&(I=x.getBlocks(r,s,r.getMainWorkspace(),n),m.indexWorkspace([...I]),I.sort((e,t)=>{const n=e=>["operators","data"].indexOf(e.category.name)-e.id.startsWith("data_");return n(t)-n(e)}),E=5e-5*window.innerWidth+t.settings.get("popup_scale")/100,T=window.innerWidth*t.settings.get("popup_width")/100,L=window.innerHeight*t.settings.get("popup_max_height")/100,a.style.width=T+"px",C={x:b.x+16,y:b.y-8},i.style.top=C.y+"px",i.style.left=C.x+"px",i.style.display="",d.value="",d.focus(),j())}function N(){S&&(C=null,i.style.display="none",I=null,m.clearWorkspaceIndex())}function j(){const e=[];if(0===d.value.trim().length){if(k=null,I)for(const t of I)e.push({block:t.createBlock()});_=!1}else{const t=m.queryWorkspace(d.value),n=t.results;k=t.illegalResult,_=t.limited,n.length>50&&(n.length=50);for(const t of n)e.push({block:t.createBlock(),autocompleteFactory:e=>t.toText(e)})}for(;f.firstChild;)f.removeChild(f.lastChild);v.length=0;let n=0,o=0;const r=[],s=t.settings.get("popup_max_search"),i=t.settings.get("popup_max_variants");for(let t=0;t<e.length;t++){var a;if(o>=s)break;const c=e[t];if(i<=1){if(r.includes(c.block.typeInfo.id))continue}else if(r.filter(e=>e===c.block.typeInfo.id).length>=i)continue;const l=()=>{D(t)},u=e=>{e.stopPropagation(),e.preventDefault(),D(t),S=!e.shiftKey,P(),S=!0,e.shiftKey?d.focus():N()},p=f.appendChild(document.createElementNS("http://www.w3.org/2000/svg","rect")),h=Y(c.block);p.setAttribute("transform","translate(0, ".concat((n+h/10)*E,")")),p.setAttribute("height",h*E+"px"),p.classList.add("sa-mcp-preview-block-bg"),p.addEventListener("mousemove",l),p.addEventListener("mousedown",u);const g=f.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));g.addEventListener("mousemove",l),g.addEventListener("mousedown",u),g.classList.add("sa-mcp-preview-block");const m=Q(c.block,g);v.push({block:c.block,autocompleteFactory:null!==(a=c.autocompleteFactory)&&void 0!==a?a:null,renderedBlock:m,svgBlock:g,svgBackground:p}),n+=h,o++,r.push(c.block.typeInfo.id)}const l=(n+8)*E;M=l<0?0:l>L?L:l,f.setAttribute("height","".concat(l,"px")),u.style.height=M+"px",p.style.height=M+"px",h.setAttribute("height",""+M),c.dataset.error=""+_,w=-1,D(0),B(),O()}function D(e){if(w===e)return;const t=v[w];if(t&&(t.svgBackground.classList.remove("sa-mcp-preview-block-bg-selection"),t.svgBlock.classList.remove("sa-mcp-preview-block-selection")),0===v.length&&k)return void(l.value=d.value+k.toText(!0).substring(d.value.length));const n=v[e];n&&n.autocompleteFactory?(n.svgBackground.classList.add("sa-mcp-preview-block-bg-selection"),n.svgBlock.classList.add("sa-mcp-preview-block-selection"),n.svgBackground.scrollIntoView({block:"nearest",behavior:Math.abs(e-w)>1?"smooth":"auto"}),l.value=d.value+n.autocompleteFactory(!0).substring(d.value.length)):l.value="",w=e}function B(){var e;const t=null!==(e=d.selectionStart)&&void 0!==e?e:0;0===d.value.length||d.value.length;let n=0;for(let e=0;e<v.length;e++){const t=v[e];var o=(n+30)*E;t.svgBlock.setAttribute("transform","translate(".concat(5,", ").concat(o,") scale(").concat(E,")")),n+=Y(t.block)}l.scrollLeft=d.scrollLeft}function O(){const e=u.scrollTop,t=u.scrollHeight;if(t<=M)return void(p.style.display="none");const n=M/t*M,o=e/t*M;p.style.display="none",g.setAttribute("height",""+n),g.setAttribute("y",""+o)}function P(){const e=v[w];if(!e)return;const t=r.getMainWorkspace();let n;t.setResizesEnabled(!1),r.Events.disable();try{if(n=e.block.createWorkspaceForm(),r.scratchBlocksUtils.changeObscuredShadowIds(n),!n.getSvgRoot())throw new Error("newBlock is not rendered.");let o=n.svgPath_.getBoundingClientRect(),s=Math.floor((b.x-(o.left+o.right)/2)/t.scale),i=Math.floor((b.y-(o.top+o.bottom)/2)/t.scale);n.moveBy(s,i)}finally{r.Events.enable()}r.Events.isEnabled()&&r.Events.fire(new r.Events.BlockCreate(n));let o={clientX:b.x,clientY:b.y,type:"mousedown",stopPropagation:function(){},preventDefault:function(){},target:e.svgBlock};t.getGesture(o)&&t.startDragWithFakeEvent(o,n)}d.addEventListener("input",j),document.addEventListener("selectionchange",B),u.addEventListener("scroll",O),d.addEventListener("keydown",e=>{switch(e.key){case"Escape":d.value.length>0?(d.value="",j()):N(),e.stopPropagation(),e.preventDefault();break;case"Tab":!function(){let e;e=v[w]?v[w].autocompleteFactory:()=>l.value,0!==l.value.length&&e&&(d.value=e(!1),d.selectionStart=d.value.length+1,j())}(),e.stopPropagation(),e.preventDefault();break;case"Enter":P(),N(),e.stopPropagation(),e.preventDefault();break;case"ArrowDown":w+1>=v.length?D(0):D(w+1),e.stopPropagation(),e.preventDefault();break;case"ArrowUp":D(w-1<0?v.length-1:w-1),e.stopPropagation(),e.preventDefault()}});let R=!0;d.addEventListener("focusout",()=>{R&&N()}),a.addEventListener("mousedown",()=>{d.focus()}),a.addEventListener("mousemove",()=>{d.focus()}),a.addEventListener("mouseenter",()=>{R=!1,d.focus()}),a.addEventListener("mouseleave",()=>{R=!0,d.focus()}),document.addEventListener("keydown",e=>{" "===e.key&&(e.ctrlKey||e.metaKey)&&(A(),e.preventDefault(),e.stopPropagation())});const z=r.Gesture.prototype.doWorkspaceClick_;r.Gesture.prototype.doWorkspaceClick_=function(){(1===this.mostRecentEvent_.button||this.mostRecentEvent_.shiftKey)&&A(),b={x:this.mostRecentEvent_.clientX,y:this.mostRecentEvent_.clientY},z.call(this)};const F=r.WorkspaceSvg.prototype.isDeleteArea;r.WorkspaceSvg.prototype.isDeleteArea=function(e){return C&&e.clientX>C.x&&e.clientX<C.x+T&&e.clientY>C.y&&e.clientY<C.y+M?r.DELETE_AREA_TOOLBOX:F.call(this,e)}},"userstyle.css":n.n(K).a}},1914:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return r}));var o=n(1859);const r={"userscript.js":async function(e){let{addon:t,console:n,msg:o}=e;const r=await t.tab.traps.getPaper(),s=await t.tab.waitForElement("[class^='paint-editor_canvas-container']");try{if(!("colorIndex"in t.tab.redux.state.scratchPaint.fillMode))return void n.error("Detected new paint editor; this will be supported in future versions.")}catch(e){}const i=s[t.tab.traps.getInternalKey(s)].child.child.child.stateNode,a=[],c=e=>{const t=e.substr(1),n=parseInt(t,16);return[n>>16&255,n>>8&255,255&n]},l={enabled:t.settings.get("default")&&!t.self.disabled,previous:+t.settings.get("previous"),next:+t.settings.get("next"),opacity:+t.settings.get("opacity"),opacityStep:+t.settings.get("opacityStep"),layering:t.settings.get("layering"),mode:t.settings.get("mode"),beforeTint:c(t.settings.get("beforeTint")),afterTint:c(t.settings.get("afterTint"))},d=()=>r.project.layers.find(e=>e.data.isBackgroundGuideLayer).children[0].position;let u=0;const p=()=>++u,h=()=>{p();const e=r.project;if(!e)return;a.length=0;const t=e.layers;for(let e=t.length-1;e>=0;e--){const n=t[e];n.data.sa_isOnionLayer&&n.remove()}},g=()=>{const e=r.project;if(!e)return;const t=e.layers.find(e=>e.data.sa_isOnionLayer);if(t)if("front"===l.layering)e.addLayer(t);else{0===e.layers.find(e=>e.data.isRasterLayer).index?e.insertLayer(0,t):e.insertLayer(1,t)}},f=(e,t)=>{if(e.children)for(const n of e.children)f(n,t);t(e)},m=(e,t,n,o)=>{const r=o?l.beforeTint:l.afterTint,s=(e+t+n)/3/255/1.5+(1-1/1.5);return[r[0]*s,r[1]*s,r[2]*s]},b=(e,t)=>(e=>{let[t,n,o]=e;const r=Math.round(t).toString(16).padStart(2,"0"),s=Math.round(n).toString(16).padStart(2,"0"),i=Math.round(o).toString(16).padStart(2,"0");return"#".concat(r).concat(s).concat(i)})(m(255*e.red,255*e.green,255*e.blue,t)),y=(e,t)=>{const{width:n,height:o}=e.canvas,r=e.context,s=r.getImageData(0,0,n,o),i=s.data;for(let e=0;e<i.length;e+=4){const n=i[e+0],o=i[e+1],r=i[e+2];if(0===i[e+3])continue;const s=m(n,o,r,t);i[e+0]=s[0],i[e+1]=s[1],i[e+2]=s[2]}r.putImageData(s,0,0)},v=e=>{const t=e.strokeBounds,{width:n,height:o}=t,s=Math.min(3e3/n,3e3/o),i=new r.Raster(new r.Size(n,o));i.remove(),i.smoothing=!0,i.guide=!0,i.locked=!0;let a=0;const c=i.draw;return i.draw=function(){const i=this.getView().getZoom()*window.devicePixelRatio,l=Math.max(1,Math.min(s,2**Math.ceil(Math.log2(i))));if(l>a){a=l;const s=this.canvas,i=this.context,c=n*l,d=o*l;s.width=c,s.height=d,this._size=new r.Size(c,d);const u=t.getTopLeft(),p=t.getBottomRight(),h=new r.Size(p.subtract(u)),g=(new r.Matrix).scale(l).translate(u.negate());i.save(),g.applyToContext(i),e.draw(i,new r.Base({matrices:[g]})),i.restore(),this.matrix.reset(),this.transform((new r.Matrix).translate(u.add(h.divide(2))).scale(1/l))}for(var d=arguments.length,u=new Array(d),p=0;p<d;p++)u[p]=arguments[p];return c.call(this,...u)},i},k=(e,t,n,o)=>new Promise((s,i)=>{const{rotationCenterX:a,rotationCenterY:c}=t,u=(n=(n=n.split(/<\s*svg:/).join("<")).split(/<\/\s*svg:/).join("</")).match(/<svg [^>]*>/);u&&-1===u[0].indexOf("xmlns=")&&(n=n.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" '));const p=(new DOMParser).parseFromString(n,"text/xml"),h=p.documentElement.attributes.viewBox?p.documentElement.attributes.viewBox.value.match(/\S+/g):null;if(h)for(let e=0;e<h.length;e++)h[e]=parseFloat(h[e]);r.project.importSVG(n,{expandShapes:!0,insert:!1,onLoad:t=>{t?s((e=>{const t=[];return f(e,e=>{e instanceof r.Raster&&t.push(new Promise((t,n)=>{e.on("load",()=>t()),e.on("error",()=>n(new Error("Raster inside SVG failed to load")))}))}),Promise.all(t)})(t).then(()=>(t=>{if(t.opacity=e,f(t,e=>{"PathItem"===e.className&&(e.clockwise=!0),"PointText"===e.className||e.children||e.strokeWidth&&(e.strokeWidth=2*e.strokeWidth),e.locked=!0,e.guide=!0}),t.scale(2,new r.Point(0,0)),"tint"===l.mode){const e=new Set;f(t,t=>{if(t.strokeColor&&(t.strokeColor=b(t.strokeColor,o)),t.fillColor){const n=t.fillColor.gradient;if(n){if(e.has(n))return;e.add(n);for(const e of n.stops)e.color=b(e.color,o)}else t.fillColor=b(t.fillColor,o)}t.canvas&&y(t,o)})}const n=d();if(void 0!==a&&void 0!==c){let e=new r.Point(a,c);h&&h.length>=2&&!isNaN(h[0])&&!isNaN(h[1])&&(e=e.subtract(h[0],h[1])),t.translate(n.subtract(e.multiply(2)))}else t.translate(n.subtract(t.bounds.width,t.bounds.height));return v(t)})(t))):i(new Error("could not load onion skin"))}})}),x=async()=>{const e=r.project;if(!e)return;const o=(()=>{const e=document.querySelector("[class*='selector_list-item'][class*='sprite-selector-item_is-selected']");if(!e)return-1;const t=e.querySelector("[class*='sprite-selector-item_number']");return t?+t.textContent-1:-1})();if(-1===o)return;h();const s=p(),i=t.tab.traps.vm;if(!i)return;const a=e.activeLayer,c=i.editingTarget.sprite.costumes,f=Math.max(0,o-l.previous),m=Math.min(c.length-1,o+l.next);try{const e=[];for(let t=f;t<=m;t++){if(t===o)continue;const n=t<o,r=Math.abs(t-o)-1,s=(l.opacity-l.opacityStep*r)/100;s<=0||e.push({index:t,isBefore:n,opacity:s})}const t=await Promise.all(e.map(e=>{let{index:t,isBefore:n,opacity:o}=e;const s=c[t],a=i.getCostume(t);if("svg"===s.dataFormat)return k(o,s,a,n);if("png"===s.dataFormat||"jpg"===s.dataFormat)return((e,t,n,o)=>new Promise((s,i)=>{let{rotationCenterX:a,rotationCenterY:c}=t;const u=new Image;u.onload=()=>{const t=d(),n=Math.min(2*t.x,u.width),i=Math.min(2*t.y,u.height);void 0===a&&(a=n/2),void 0===c&&(c=i/2);const p=new r.Raster(u);p.opacity=e,p.guide=!0,p.locked=!0;const h=n/2+(t.x-a),g=i/2+(t.y-c);p.position=new r.Point(h,g),p.remove(),"tint"===l.mode&&y(p,o),s(p)},u.onerror=()=>{i(new Error("could not load image"))},u.src=n}))(o,s,a,n);throw new Error("Unknown data format: ".concat(s.dataFormat))}));if(u===s){const e=(()=>{const e=new r.Layer;return e.locked=!0,e.guide=!0,e.data.sa_isOnionLayer=!0,e})();for(const n of t)e.addChild(n);g()}}catch(e){n.error(e)}a.activate()},w=e=>{l.enabled!==e&&(l.enabled=e,l.enabled?(0===l.next&&0===l.previous&&(l.previous=1,D.previous.value=l.previous),0===l.opacity&&(l.opacity=25,D.opacity.value=l.opacity),x()):h(),M.dataset.enabled=l.enabled)},I=e=>{0===l.previous&&0===l.next||0===l.opacity?w(!1):l.enabled?e?g():x():(l.previous>0||l.next>0)&&w(!0)},_=()=>{const e=document.createElement("div");return e.className="sa-onion-group",e},S=function(){let{useButtonTag:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=document.createElement(e?"button":"span");return t.className="sa-onion-button",t.setAttribute("role","button"),t},C=e=>{const n=document.createElement("img");return n.className="sa-onion-image",n.draggable=!1,n.dataset.image=e,n.loading="lazy",n.src=t.self.getResource("/"+e+".svg"),n},T=_();t.tab.displayNoneWhileDisabled(T,{display:"flex"});const M=S();M.dataset.enabled=l.enabled,M.addEventListener("click",()=>w(!l.enabled)),M.title=o("toggle"),M.appendChild(C("toggle"));const E=S();E.addEventListener("click",()=>N(!j())),E.title=o("settings"),E.appendChild(C("settings"));const L=document.createElement("div");L.className="sa-onion-settings-wrapper",T.append(L,M,E);const A=document.createElement("div");A.className="sa-onion-settings";const N=e=>{E.dataset.enabled=e,A.dataset.visible=e},j=()=>"true"===A.dataset.visible,D={};for(const e of["previous","next","opacity","opacityStep"]){const t=document.createElement("label");t.className="sa-onion-settings-line";const n=document.createElement("div");n.className="sa-onion-settings-label",n.textContent=o(e),t.appendChild(n);const r=_(),s=S(),i=document.createElement("div");i.style.width="20px",s.appendChild(i);const a=document.createElement("input");D[e]=a,a.className="sa-onion-settings-input",a.type="number",a.step="1",a.min="0",a.max="100",a.value=l[e],a.addEventListener("input",t=>{if(0===a.value.length)return l[e]=0,void I();let n=+a.value;n>+a.max?n=+a.max:n<0&&(n=0),a.value=n,l[e]=n,I()}),a.addEventListener("blur",()=>{a.value||(a.value="0")}),s.appendChild(a);const c=S();c.appendChild(C("decrement")),c.addEventListener("click",()=>{l[e]>0&&(l[e]--,a.value=l[e],I())});const d=S();d.appendChild(C("increment")),d.addEventListener("click",()=>{l[e]<+a.max&&(l[e]++,a.value=l[e],I())}),r.appendChild(c),r.appendChild(s),r.appendChild(d),t.appendChild(r),A.appendChild(t)}const B=document.createElement("div");B.className="sa-onion-settings-line";const O=document.createElement("div");O.className="sa-onion-settings-label",O.textContent=o("mode");const P=_();B.appendChild(O);const R=S({useButtonTag:!0});R.appendChild(document.createTextNode(o("merge"))),P.appendChild(R),R.addEventListener("click",e=>{l.mode="merge",z.dataset.enabled=!1,R.dataset.enabled=!0,I()}),R.dataset.enabled="merge"===l.mode;const z=S({useButtonTag:!0});z.appendChild(document.createTextNode(o("tint"))),P.appendChild(z),z.addEventListener("click",e=>{l.mode="tint",z.dataset.enabled=!0,R.dataset.enabled=!1,I()}),z.dataset.enabled="tint"===l.mode,B.appendChild(P),A.appendChild(B);const W=document.createElement("div");W.className="sa-onion-settings-line";const F=document.createElement("div");F.className="sa-onion-settings-label",F.textContent=o("layering");const G=_();W.appendChild(F);const Z=S({useButtonTag:!0});Z.appendChild(document.createTextNode(o("front"))),G.appendChild(Z),Z.addEventListener("click",e=>{l.layering="front",H.dataset.enabled=!1,Z.dataset.enabled=!0,I(!0)}),Z.dataset.enabled="front"===l.layering;const H=S({useButtonTag:!0});H.appendChild(document.createTextNode(o("behind"))),G.appendChild(H),H.addEventListener("click",e=>{l.layering="behind",H.dataset.enabled=!0,Z.dataset.enabled=!1,I(!0)}),H.dataset.enabled="behind"===l.layering,W.appendChild(G),A.appendChild(W);const Y="http://www.w3.org/2000/svg",U=document.createElementNS(Y,"svg");U.setAttribute("class","sa-onion-settings-tip"),U.setAttribute("width","14"),U.setAttribute("height","7");const V=document.createElementNS(Y,"polygon");V.setAttribute("class","sa-onion-settings-polygon"),V.setAttribute("points","0,0 7,7, 14,0"),U.appendChild(V),A.appendChild(U);let X=null;t.self.addEventListener("disabled",()=>{N(!1),X=l.enabled,w(!1)}),t.self.addEventListener("reenabled",()=>{w(X)});(()=>{const e=r.Project.prototype.addLayer;r.Project.prototype.addLayer=function(t){const n=e.call(this,t);if(t.data.isBackgroundGuideLayer){let t;for(;t=a.shift();)e.call(this,t);g()}return n};const t=r.Project.prototype.importJSON;r.Project.prototype.importJSON=function(e){const n=t.call(this,e);return l.enabled&&x(),n};const n=r.Layer.prototype.remove;r.Layer.prototype.remove=function(){if(this.data.isBackgroundGuideLayer){for(const e of r.project.layers)e.data.sa_isOnionLayer&&a.push(e);for(const e of a)e.remove()}return n.call(this)}})(),(()=>{let e=!1;const t=i.constructor,n=t.prototype.importImage;t.prototype.importImage=function(){e=!0,h();for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n.call(this,...o)};const o=t.prototype.recalibrateSize;t.prototype.recalibrateSize=function(t){return o.call(this,()=>{t&&t(),e&&(e=!1,l.enabled&&x())})},i.recalibrateSize=t.prototype.recalibrateSize.bind(i),i.importImage=t.prototype.importImage.bind(i)})(),(async()=>{let e=!1;for(;;){const n=(await t.tab.waitForElement("[class^='paint-editor_canvas-controls']",{markAsSeen:!0,reduxEvents:["scratch-gui/navigation/ACTIVATE_TAB","scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE","scratch-gui/targets/UPDATE_TARGET_LIST"],reduxCondition:e=>1===e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly})).querySelector("[class^='paint-editor_zoom-controls']");if(t.tab.appendToSharedSpace({space:"paintEditorZoomControls",element:T,order:1}),L.appendChild(A),!e){e=!0;const t=n.firstChild.className,o=n.firstChild.firstChild.className,r=n.firstChild.firstChild.firstChild.className;for(const e of document.querySelectorAll(".sa-onion-group"))e.className+=" "+t;for(const e of document.querySelectorAll(".sa-onion-button"))e.className+=" "+o;for(const e of document.querySelectorAll(".sa-onion-image"))e.className+=" "+r}l.enabled&&x()}})()},"style.css":n.n(o).a,"decrement.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg==","increment.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDkwKSIgc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUtMTIuNjQyaDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg==","settings.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggc3R5bGU9Im9wYWNpdHk6Ljc1O2ZpbGw6bm9uZTtzdHJva2U6IzAwMDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgZD0iTTU2IDE2djk2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMi4zNzYgLTIuMzc2KSBzY2FsZSguMjI0NjIpIi8+PHBhdGggc3R5bGU9Im9wYWNpdHk6LjU7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiBkPSJNNDAgMzJ2NjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48cGF0aCBzdHlsZT0ib3BhY2l0eTouMjU7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiBkPSJNMjQgNDh2MzIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48cGF0aCBzdHlsZT0ib3BhY2l0eTouNzU7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiBkPSJNNzIgMTZ2OTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48cGF0aCBzdHlsZT0ib3BhY2l0eTouNTtmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIGQ9Ik04OCAzMnY2NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIuMzc2IC0yLjM3Nikgc2NhbGUoLjIyNDYyKSIvPjxwYXRoIHN0eWxlPSJvcGFjaXR5Oi4yNTtmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIGQ9Ik0xMDQgNDh2MzIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48L3N2Zz4=","toggle.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PGcgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZT0iIzAwMTAyNiI+PGcgc3R5bGU9Im9wYWNpdHk6LjU7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLWRhc2hhcnJheTpub25lIj48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bm9ybWFsO2ZpbGw6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MCIgZmlsbD0iI2JmYmZiZiIgZD0iTTY4LjQ1IDMyLjQ1N2MuMy0uMi44LS4xLjkuM2wyLjYgMTAuN3M2LjQgNC43IDguMyA4YzMuMiA1LjUgMy4zIDEwIDMuMyAxMHM3LjEgMi4xIDguMyA3LjhjMS4yIDUuNy0zLjIgMTYuNS0yMiAyMC4yLTE4LjggMy43LTMzLjktMS40LTQxLTEyLjgtNy4xLTExLjQgNC4xLTI1IDMuNS0yNC4ybC0yLjEtMTcuOWMtLjEtLjQuNC0uNy44LS41bDEyLjEgNy45czQuNS0xLjcgOS4yLTEuOWMyLjgtLjIgNS4yIDAgNy41LjR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNC42NTIgLTQuNjUpIHNjYWxlKC4yMzI5KSIvPjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWw7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiIGQ9Ik0xMDEuNjUgNjIuOTU3Yy00LjcgMy44LTExLjkgMy45LTExLjkgMy45bTEwLjYgNy4zYy02LjMuNS0xMC4yLTEuNC0xMC4yLTEuNG0tNjguOC0xMC4xczguNiAyLjggMTIuMSA1LjltLjMgMy41Yy00LjMgMS43LTExLjcuNi0xMS43LjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00LjY1MiAtNC42NSkgc2NhbGUoLjIzMjkpIi8+PC9nPjxnIHN0eWxlPSJvcGFjaXR5Oi43NTtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmUiPjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWw7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowIiBmaWxsPSIjYmZiZmJmIiBkPSJNNjguNDUgMzIuNDU3Yy4zLS4yLjgtLjEuOS4zbDIuNiAxMC43czYuNCA0LjcgOC4zIDhjMy4yIDUuNSAzLjMgMTAgMy4zIDEwczcuMSAyLjEgOC4zIDcuOGMxLjIgNS43LTMuMiAxNi41LTIyIDIwLjItMTguOCAzLjctMzMuOS0xLjQtNDEtMTIuOC03LjEtMTEuNCA0LjEtMjUgMy41LTI0LjJsLTIuMS0xNy45Yy0uMS0uNC40LS43LjgtLjVsMTIuMSA3LjlzNC41LTEuNyA5LjItMS45YzIuOC0uMiA1LjIgMCA3LjUuNHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjMyMyAtMi4zMjEpIHNjYWxlKC4yMzI5KSIvPjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWw7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiIGQ9Ik0xMDEuNjUgNjIuOTU3Yy00LjcgMy44LTExLjkgMy45LTExLjkgMy45bTEwLjYgNy4zYy02LjMuNS0xMC4yLTEuNC0xMC4yLTEuNG0tNjguOC0xMC4xczguNiAyLjggMTIuMSA1LjltLjMgMy41Yy00LjMgMS43LTExLjcuNi0xMS43LjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjMyMyAtMi4zMjEpIHNjYWxlKC4yMzI5KSIvPjwvZz48ZyBzdHlsZT0ic3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLWRhc2hhcnJheTpub25lIj48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bm9ybWFsO2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MCIgZmlsbD0iI2JmYmZiZiIgZD0iTTczLjQ1IDM3LjQ1N2MuMy0uMi44LS4xLjkuM2wyLjYgMTAuN3M2LjQgNC43IDguMyA4YzMuMiA1LjUgMy4zIDEwIDMuMyAxMHM3LjEgMi4xIDguMyA3LjhjMS4yIDUuNy0zLjIgMTYuNS0yMiAyMC4yLTE4LjggMy43LTMzLjktMS40LTQxLTEyLjgtNy4xLTExLjQgNC4xLTI1IDMuNS0yNC4ybC0yLjEtMTcuOWMtLjEtLjQuNC0uNy44LS41bDEyLjEgNy45czQuNS0xLjcgOS4yLTEuOWMyLjgtLjIgNS4yIDAgNy41LjR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMS4xNTkgLTEuMTU3KSBzY2FsZSguMjMyOSkiLz48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bm9ybWFsO2ZpbGw6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBmaWxsPSJub25lIiBkPSJNMTA2LjY1IDY3Ljk1N2MtNC43IDMuOC0xMS45IDMuOS0xMS45IDMuOW0xMC42IDcuM2MtNi4zLjUtMTAuMi0xLjQtMTAuMi0xLjRtLTY4LjgtMTAuMXM4LjYgMi44IDEyLjEgNS45bS4zIDMuNWMtNC4zIDEuNy0xMS43LjYtMTEuNy42IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMS4xNTkgLTEuMTU3KSBzY2FsZSguMjMyOSkiLz48L2c+PC9nPjwvc3ZnPg=="}},1920:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return a}));class o{constructor(e,t,n,o){this.cls=e,this.procCode=t,this.labelID=n,this.y=o,this.lower=t.toLowerCase(),this.clones=null,this.eventName=null}matchesID(e){if(this.labelID===e)return!0;if(this.clones)for(const t of this.clones)if(t===e)return!0;return!1}}var r=n(1802),s=n(1801),i=n(1830);const a={"userscript.js":async function(e){let{addon:t,msg:n,console:i}=e;const a=await t.tab.traps.getBlockly();class c{constructor(e){this.utils=e,this.el=null,this.items=[],this.selected=null,this.carousel=new l(this.utils)}get workspace(){return a.getMainWorkspace()}createDom(){return this.el=document.createElement("ul"),this.el.className="sa-find-dropdown",this.el}inputKeyDown(e){return 38===e.keyCode?(this.navigateFilter(-1),void e.preventDefault()):40===e.keyCode?(this.navigateFilter(1),void e.preventDefault()):13===e.keyCode?(this.selected&&this.navigateFilter(1),void e.preventDefault()):void this.carousel.inputKeyDown(e)}navigateFilter(e){let t;for(this.selected&&"none"!==this.selected.style.display?t=-1===e?this.selected.previousSibling:this.selected.nextSibling:(t=this.items[0],e=1);t&&"none"===t.style.display;)t=-1===e?t.previousSibling:t.nextSibling;t&&(t.scrollIntoView({block:"nearest"}),this.onItemClick(t))}addItem(e){const t=document.createElement("li");t.innerText=e.procCode,t.data=e;const n={receive:"events",event:"events",define:"more",var:"data",VAR:"data",list:"data-lists",LIST:"data-lists",costume:"looks",sound:"sounds"};if("flag"===e.cls)t.className="sa-find-flag";else{const o=n[e.cls];t.className="sa-block-color sa-block-color-".concat(o)}return t.addEventListener("mousedown",e=>(this.onItemClick(t),e.preventDefault(),e.cancelBubble=!0,!1)),this.items.push(t),this.el.appendChild(t),t}onItemClick(e,n){this.selected&&this.selected!==e&&(this.selected.classList.remove("sel"),this.selected=null),this.selected!==e&&(e.classList.add("sel"),this.selected=e);let o=e.data.cls;if("costume"===o||"sound"===o){const n=document.querySelector("[class^=asset-panel_wrapper]");if(n){n[t.tab.traps.getInternalKey(n)].child.stateNode.props.onItemClick(e.data.y);n.firstChild.firstChild.children[e.data.y].scrollIntoView({behavior:"auto",block:"center",inline:"start"}),n.closest("div[class*=gui_flex-wrapper]").scrollTop=0}}else if("var"===o||"VAR"===o||"list"===o||"LIST"===o){let t=this.getVariableUsesById(e.data.labelID);this.carousel.build(e,t,n)}else if("define"===o){let t=this.getCallsToProcedureById(e.data.labelID);this.carousel.build(e,t,n)}else if("receive"===o){let t=this.getCallsToEventsByName(e.data.eventName);if(!n){const e=this.utils.getEditingTarget().id;for(const o of t)if(o.targetId===e){n=o;break}}this.carousel.build(e,t,n)}else if(e.data.clones){let t=[this.workspace.getBlockById(e.data.labelID)];for(const n of e.data.clones)t.push(this.workspace.getBlockById(n));this.carousel.build(e,t,n)}else this.utils.scrollBlockIntoView(e.data.labelID),this.carousel.remove()}getVariableUsesById(e){let t=[],n=this.workspace.getTopBlocks();for(const o of n){let n=o.getDescendants();for(const o of n){let n=o.getVarModels();if(n)for(const r of n)r.getId()===e&&t.push(o)}}return t}getCallsToProcedureById(e){let t=this.workspace.getBlockById(e),n=t.getChildren()[0].getProcCode(),o=[t],r=this.workspace.getTopBlocks();for(const e of r){let t=e.getDescendants();for(const e of t)"procedures_call"===e.type&&e.getProcCode()===n&&o.push(e)}return o}getCallsToEventsByName(e){let o=[];const s=t.tab.traps.vm.runtime.targets;for(const t of s){if(!t.isOriginal)continue;const s=t.blocks;if(s._blocks)for(const i of Object.keys(s._blocks)){const a=s._blocks[i];if("event_whenbroadcastreceived"===a.opcode&&a.fields.BROADCAST_OPTION.value===e)o.push(new r.a(t,a));else if("event_broadcast"===a.opcode||"event_broadcastandwait"===a.opcode){const i=a.inputs.BROADCAST_INPUT.block,c=s._blocks[i];if(c){let s;s="event_broadcast_menu"===c.opcode?c.fields.BROADCAST_OPTION.value:n("complex-broadcast"),s===e&&o.push(new r.a(t,a))}}}}return o}empty(){for(const e of this.items)this.el.contains(e)&&this.el.removeChild(e);this.items=[],this.selected=null}}class l{constructor(e){this.utils=e,this.el=null,this.count=null,this.blocks=[],this.idx=0}build(e,t,n){if(this.el&&this.el.parentNode===e)this.navRight();else{if(this.remove(),this.blocks=t,e.appendChild(this.createDom()),this.idx=0,n)for(const e of Object.keys(this.blocks)){if(this.blocks[e].id===n.id){this.idx=Number(e);break}}this.idx<this.blocks.length&&this.utils.scrollBlockIntoView(this.blocks[this.idx])}}createDom(){this.el=document.createElement("span"),this.el.className="sa-find-carousel";const e=this.el.appendChild(document.createElement("span"));e.className="sa-find-carousel-control",e.textContent="â—€",e.addEventListener("mousedown",e=>this.navLeft(e)),this.count=this.el.appendChild(document.createElement("span")),this.count.innerText=this.blocks.length>0?this.idx+1+" / "+this.blocks.length:"0";const t=this.el.appendChild(document.createElement("span"));return t.className="sa-find-carousel-control",t.textContent="â–¶",t.addEventListener("mousedown",e=>this.navRight(e)),this.el}inputKeyDown(e){37===e.keyCode&&this.el&&this.blocks&&this.navLeft(e),39===e.keyCode&&this.el&&this.blocks&&this.navRight(e)}navLeft(e){return this.navSideways(e,-1)}navRight(e){return this.navSideways(e,1)}navSideways(e,t){this.blocks.length>0&&(this.idx=(this.idx+t+this.blocks.length)%this.blocks.length,this.count.innerText=this.idx+1+" / "+this.blocks.length,this.utils.scrollBlockIntoView(this.blocks[this.idx])),e&&(e.cancelBubble=!0,e.preventDefault())}remove(){this.el&&(this.el.remove(),this.blocks=[],this.idx=0)}}const d=new class{constructor(){this.utils=new s.a(t),this.prevValue="",this.findBarOuter=null,this.findWrapper=null,this.findInput=null,this.dropdownOut=null,this.dropdown=new c(this.utils),document.addEventListener("keydown",e=>this.eventKeyDown(e),!0)}get workspace(){return a.getMainWorkspace()}createDom(e){this.findBarOuter=document.createElement("div"),this.findBarOuter.className="sa-find-bar",t.tab.displayNoneWhileDisabled(this.findBarOuter,{display:"flex"}),e.appendChild(this.findBarOuter),this.findWrapper=this.findBarOuter.appendChild(document.createElement("span")),this.findWrapper.className="sa-find-wrapper",this.dropdownOut=this.findWrapper.appendChild(document.createElement("label")),this.dropdownOut.className="sa-find-dropdown-out",this.findInput=this.dropdownOut.appendChild(document.createElement("input")),this.findInput.className=t.tab.scratchClass("input_input-form",{others:"sa-find-input"}),this.findInput.id="sa-find-input",this.findInput.type="search",this.findInput.placeholder=n("find-placeholder"),this.findInput.autocomplete="off",this.dropdownOut.appendChild(this.dropdown.createDom()),this.bindEvents(),this.tabChanged()}bindEvents(){this.findInput.addEventListener("focus",()=>this.inputChange()),this.findInput.addEventListener("keydown",e=>this.inputKeyDown(e)),this.findInput.addEventListener("keyup",()=>this.inputChange()),this.findInput.addEventListener("focusout",()=>this.hideDropDown())}tabChanged(){if(!this.findBarOuter)return;const e=t.tab.redux.state.scratchGui.editorTab.activeTabIndex,n=0===e||1===e||2===e;this.findBarOuter.hidden=!n}inputChange(){this.showDropDown();let e=(this.findInput.value||"").toLowerCase();if(e===this.prevValue)return;this.prevValue=e,this.dropdown.blocks=null;let t=this.dropdown.items;for(const n of t){let t=n.data.procCode,o=n.data.lower.indexOf(e);if(o>=0){for(n.style.display="block";n.firstChild;)n.removeChild(n.firstChild);o>0&&n.appendChild(document.createTextNode(t.substring(0,o)));let r=document.createElement("b");r.appendChild(document.createTextNode(t.substr(o,e.length))),n.appendChild(r),o+e.length<t.length&&n.appendChild(document.createTextNode(t.substr(o+e.length)))}else n.style.display="none"}}inputKeyDown(e){if(this.dropdown.inputKeyDown(e),13!==e.keyCode)return 27===e.keyCode?(this.findInput.value.length>0?(this.findInput.value="",this.inputChange()):this.findInput.blur(),void e.preventDefault()):void 0;this.findInput.blur()}eventKeyDown(e){if(t.self.disabled||!this.findBarOuter)return;let n=e.ctrlKey||e.metaKey;if("f"===e.key&&n&&!e.shiftKey)return this.findInput.focus(),this.findInput.select(),e.cancelBubble=!0,e.preventDefault(),!0;if(37===e.keyCode&&n){if("INPUT"===document.activeElement.tagName)return;if(0===this.selectedTab)return this.utils.navigationHistory.goBack(),e.cancelBubble=!0,e.preventDefault(),!0}if(39===e.keyCode&&n){if("INPUT"===document.activeElement.tagName)return;if(0===this.selectedTab)return this.utils.navigationHistory.goForward(),e.cancelBubble=!0,e.preventDefault(),!0}}showDropDown(e,t){if(!e&&this.dropdownOut.classList.contains("visible"))return;this.prevValue=e?"":null,this.dropdownOut.classList.add("visible");let n=0===this.selectedTab?this.getScratchBlocks():1===this.selectedTab?this.getScratchCostumes():2===this.selectedTab?this.getScratchSounds():[];this.dropdown.empty();for(const o of n){let n=this.dropdown.addItem(o);e&&(o.matchesID(e)?this.dropdown.onItemClick(n,t):n.style.display="none")}this.utils.offsetX=this.dropdownOut.getBoundingClientRect().width+32,this.utils.offsetY=32}hideDropDown(){this.dropdownOut.classList.remove("visible")}get selectedTab(){return t.tab.redux.state.scratchGui.editorTab.activeTabIndex}getScratchBlocks(){let e=[],t={},n=this.workspace.getTopBlocks();function r(n,r,s){let i=s.id?s.id:s.getId?s.getId():null,a=t[r];if(a)return a.clones||(a.clones=[]),a.clones.push(i),a;let c=new o(n,r,i,0);return c.y=s.getRelativeToSurfaceXY?s.getRelativeToSurfaceXY().y:null,e.push(c),t[r]=c,c}function s(e){let t,n=e.inputList[0];for(const e of n.fieldRow)t=(t?t+" ":"")+e.getText();return t}for(const e of n)if("procedures_definition"!==e.type&&"procedures_definition_return"!==e.type)if("event_whenflagclicked"!==e.type)if("event_whenbroadcastreceived"!==e.type)"event_when"!==e.type.substr(0,10)&&"control_start_as_clone"!==e.type||r("event",s(e),e);else{let t=e.inputList[0].fieldRow.find(e=>"BROADCAST_OPTION"===e.name).getText();r("receive","event "+t,e).eventName=t}else r("flag",s(e),e);else{const t=e.getChildren()[0].getProcCode();if(!t)continue;const n=e.inputList.findIndex(e=>e.fieldRow.length>0);if(-1===n)continue;const o=e.inputList[n].fieldRow[0].getText();r("define",0===n?"".concat(o," ").concat(t):"".concat(t," ").concat(o),e)}let i=this.workspace.getVariableMap(),a=i.getVariablesOfType("");for(const e of a)r(e.isLocal?"var":"VAR",(e.isLocal?"var ":"VAR ")+e.name,e);let c=i.getVariablesOfType("list");for(const e of c)r(e.isLocal?"list":"LIST",(e.isLocal?"list ":"LIST ")+e.name,e);const l=this.getCallsToEvents();for(const e of l)r("receive","event "+e.eventName,e.block).eventName=e.eventName;const d={flag:0,receive:1,event:2,define:3,var:4,VAR:5,list:6,LIST:7};return e.sort((e,t)=>{let n=d[e.cls]-d[t.cls];return 0!==n?n:e.lower<t.lower?-1:e.lower>t.lower?1:e.y-t.y}),e}getScratchCostumes(){let e=this.utils.getEditingTarget().getCostumes(),t=[],n=0;for(const r of e){let e=new o("costume",r.name,r.assetId,n);t.push(e),n++}return t}getScratchSounds(){let e=this.utils.getEditingTarget().getSounds(),t=[],n=0;for(const r of e){let e=new o("sound",r.name,r.assetId,n);t.push(e),n++}return t}getCallsToEvents(){const e=[],t=new Set;for(const o of this.workspace.getAllBlocks()){if("event_broadcast"!==o.type&&"event_broadcastandwait"!==o.type)continue;const r=o.getChildren()[0];if(!r)continue;let s="";s="event_broadcast_menu"===r.type?r.inputList[0].fieldRow[0].getText():n("complex-broadcast"),t.has(s)||(t.add(s),e.push({eventName:s,block:o}))}return e}},u=a.Gesture.prototype.doBlockClick_;for(a.Gesture.prototype.doBlockClick_=function(){if(!t.self.disabled&&(1===this.mostRecentEvent_.button||this.mostRecentEvent_.shiftKey)){let e=this.startBlock_;for(;e;e=e.getSurroundParent()){if("procedures_definition"===e.type||!this.jumpToDef&&"procedures_call"===e.type){let t=e.id?e.id:e.getId?e.getId():null;return d.findInput.focus(),void d.showDropDown(t)}if("data_variable"===e.type||"data_changevariableby"===e.type||"data_setvariableto"===e.type){let t=e.getVars()[0];return d.findInput.focus(),d.showDropDown(t,e),void(d.selVarID=t)}if("event_whenbroadcastreceived"===e.type||"event_broadcastandwait"===e.type||"event_broadcast"===e.type){let t=e.id;return d.findInput.focus(),d.showDropDown(t,e),void(d.selVarID=t)}}}u.call(this)},t.tab.redux.initialize(),t.tab.redux.addEventListener("statechanged",e=>{"scratch-gui/navigation/ACTIVATE_TAB"===e.detail.action.type&&d.tabChanged()});;){const e=await t.tab.waitForElement("ul[class*=gui_tab-list_]",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"],reduxCondition:e=>!e.scratchGui.mode.isPlayerOnly});d.createDom(e)}},"userstyle.css":n.n(i).a}},1921:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return c}));var o=n(1798),r=n(1799),s=n(1800),i=async e=>{let{addon:t,console:n,msg:i}=e;const a=new r.a(250),c=(e,n)=>{if(e=Object(o.b)(e),!t.tab.redux.state||!t.tab.redux.state.scratchGui)return;const r=e=>{let{detail:n}=e;"scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER"===n.action.type&&(t.tab.redux.removeEventListener("statechanged",r),setTimeout(()=>{document.body.classList.remove("sa-hide-eye-dropper-background")},50))},s=n=>{let{detail:o}=n;"scratch-gui/color-picker/ACTIVATE_COLOR_PICKER"===o.action.type&&(t.tab.redux.removeEventListener("statechanged",s),t.tab.redux.addEventListener("statechanged",r),setTimeout(()=>{t.tab.redux.dispatch({type:"scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER",color:e})},50))};t.tab.redux.addEventListener("statechanged",s),document.body.classList.add("sa-hide-eye-dropper-background"),n.click()},l=()=>{const e=document.querySelector("button.scratchEyedropper");a.abort(!1),t.tab.redux.initialize();const n=(e=>{const{children:t}=e.parentElement,n=t[1].getAttribute("aria-valuenow"),o=t[3].getAttribute("aria-valuenow"),r=t[5].getAttribute("aria-valuenow"),i=Number(r)/255;return Object(s.a)("hsv(".concat(n,", ").concat(o,", ").concat(i||0,")")).toHexString()})(e),r=Object.assign(document.createElement("div"),{className:"sa-color-picker sa-color-picker-code"});t.tab.displayNoneWhileDisabled(r,{display:"flex"});const l=Object.assign(document.createElement("input"),{className:"sa-color-picker-color sa-color-picker-code-color",type:"color",value:n||"#000000"}),d=Object.assign(document.createElement("input"),{className:t.tab.scratchClass("input_input-form",{others:"sa-color-picker-text sa-color-picker-code-text"}),type:"text",pattern:"^#?([0-9a-fA-F]{3}){1,2}$",placeholder:i("hex"),value:n||""});l.addEventListener("input",()=>a.limit(()=>c(d.value=l.value,e))),d.addEventListener("change",()=>{const{value:t}=d;Object(o.a)().test(t)&&c(l.value=Object(o.b)(t),e)}),r.appendChild(l),r.appendChild(d),e.parentElement.insertBefore(r,e)},d=await t.tab.traps.getBlockly(),u=d.FieldColourSlider.prototype.showEditor_;d.FieldColourSlider.prototype.showEditor_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=u.call(this,...t);return l(),o}},a=n(1858);const c={"userscript.js":async e=>{i(e)},"style.css":n.n(a).a}},1923:function(e,t,n){"use strict";function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"resources",(function(){return a}));var i=n(1881);const a={"userscript.js":async function(e){let{addon:t,console:n,msg:o}=e;let s,i,a,c,l,d;const u=e=>{const t=e.indexOf("//");return-1===t||0===t?null:e.substr(0,t)},p=e=>{const t=e.indexOf("//");return-1===t||0===t?e:e.substr(t+"//".length)},h=(e,t)=>{const n=p(e);return t?"".concat(t).concat("//").concat(n):n},g=e=>!e.includes("//")&&!e.endsWith("/"),f=["_mouse_","_stage_","_edge_","_myself_","_random_"],m=e=>""===e?"2":f.includes(e)?"".concat(e,"2"):e,b=e=>{const t=e.closest("[class*='sprite-selector_sprite-selector']");if(t)return t[i].child.sibling.child.stateNode;const n=e.closest('[class*="asset-panel_wrapper"]');if(n)return n[i].child.child.stateNode;throw new Error("cannot find SortableHOC")},y=(e,t,n)=>Math.min(Math.max(e,t),n),v=e=>e&&e.name&&"object"==typeof e.name?e.name:null,k={assetId:"&__sa_folders_folder",encodeDataURI:()=>t.self.getResource("/folder.svg")},x="data:image/svg+xml;base64,".concat(btoa('<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100px" height="100px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Sound" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M12.4785058,12.6666667 C12.3144947,12.6666667 12.1458852,12.6272044 11.9926038,12.5440517 C11.537358,12.2960031 11.3856094,11.7562156 11.6553847,11.3376335 C12.1688774,10.5371131 12.1688774,9.54491867 11.6553847,8.74580756 C11.3856094,8.32581618 11.537358,7.78602861 11.9926038,7.53798001 C12.452448,7.29275014 13.0379829,7.43086811 13.3046926,7.84804076 C14.1737981,9.20103311 14.1737981,10.8809986 13.3046926,12.233991 C13.1268862,12.5130457 12.806528,12.6666667 12.4785058,12.6666667 Z M15.3806784,13.8333333 C15.2408902,13.8333333 15.0958763,13.796281 14.9665396,13.7182064 C14.5785295,13.485306 14.4491928,12.9784829 14.6791247,12.5854634 C15.5949331,11.0160321 15.5949331,9.065491 14.6791247,7.49738299 C14.4491928,7.10436352 14.5785295,6.59621712 14.9665396,6.36331669 C15.3558562,6.13438616 15.8549129,6.26274605 16.0848448,6.65444223 C17.3050517,8.74260632 17.3050517,11.3389168 16.0848448,13.4270809 C15.9319924,13.6890939 15.6602547,13.8333333 15.3806784,13.8333333 Z M10.3043478,5.62501557 L10.3043478,13.873675 C10.3043478,14.850934 9.10969849,15.3625101 8.36478311,14.7038052 L6.7566013,13.2797607 C6.18712394,12.7762834 5.44499329,12.4968737 4.67362297,12.4968737 L4.3923652,12.4968737 C3.62377961,12.4968737 3,11.8935108 3,11.1470686 L3,8.36646989 C3,7.62137743 3.62377961,7.01666471 4.3923652,7.01666471 L4.65830695,7.01666471 C5.42967727,7.01666471 6.17180792,6.73725504 6.74128529,6.23377771 L8.36478311,4.79623519 C9.10969849,4.13753026 10.3043478,4.64910643 10.3043478,5.62501557 Z" id="Combined-Shape" fill="#575E75"></path>\n    </g>\n</svg>'));let w=null;const I=Object.create(null),_=e=>{const t=e=>{const t=(e=>{let t=0;for(let n=0;n<e.length;n++)t=31*t+e.charCodeAt(n),t|=0;return t})(e),n=(o=t,function(){var e=o+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296});var o;return n(),n(),n(),n(),n()};if(!I[e]){w||(w=document.createElement("style"),document.head.appendChild(w));const n=360*t(e),o="hsla(".concat(n,"deg, 100%, 85%, 0.5)"),r=Object.keys(I).length,s="sa-folders-color-".concat(r);I[e]=s,w.textContent+=".".concat(s,"{background-color:").concat(o," !important;}"),w.textContent+=".".concat(s,'[class*="sprite-selector_raised"]:not([class*="sa-folders-folder"]){background-color:hsla(').concat(n,"deg, 100%, 77%, 1) !important;}")}return I[e]},S=e=>{const t=Object.create(null),n=[];for(const o of e){const e=o.getName?o.getName():o.name,r=u(e);"string"==typeof r?(t[r]||(t[r]=[],n.push(t[r])),t[r].push(o)):n.push(o)}const o=n.flat();for(let t=0;t<e.length;t++)if(n[t]!==e[t])return{items:o,changed:!0};return{items:o,changed:!1}},C=()=>{const{items:e,changed:t}=S(s.runtime.targets);t&&(s.runtime.targets=e,s.emitTargetsUpdate())},T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.editingTarget;const{items:t,changed:n}=S(e.sprite.costumes);n&&(e.sprite.costumes=t,s.emitTargetsUpdate())},M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.editingTarget;const{items:t,changed:n}=S(e.sprite.sounds);n&&(e.sprite.sounds=t,s.emitTargetsUpdate())},E=e=>{const t=e.constructor;if(!Array.isArray(e.props.items)||"string"!=typeof e.props.selectedId&&"number"!=typeof e.props.selectedItemIndex||void 0===e.containerBox||void 0!==t.prototype.componentDidMount||void 0!==t.prototype.componentDidUpdate||"function"!=typeof t.prototype.handleAddSortable||"function"!=typeof t.prototype.handleRemoveSortable||"function"!=typeof t.prototype.setRef)throw new Error("Can not comprehend SortableHOC")};class L{constructor(){this.cache=new Map,this.usedThisTick=new Set}has(e){return this.cache.has(e)}get(e){return this.usedThisTick.add(e),this.cache.get(e)}set(e,t){this.usedThisTick.add(e),this.cache.set(e,t)}startTick(){this.usedThisTick.clear()}endTick(){for(const e of Array.from(this.cache.keys()))this.usedThisTick.has(e)||this.cache.delete(e)}clear(){this.usedThisTick.clear(),this.cache.clear()}}const A=(e,t)=>{const n=new L,o=new L,s=new L,i=[[0,0],[40,0],[0,40],[40,40]],p=e=>{let t='data:image/svg+xml;,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(80,'" height="').concat(80,'">');for(let n=0;n<Math.min(i.length,e.length);n++){const o=e[n],r=40,s=40,[a,c]=i[n];let l;o.asset?l=o.asset.encodeDataURI():o.costume&&o.costume.asset?l=o.costume.asset.encodeDataURI():o.url&&(l=x),l&&(t+='<image width="'.concat(r,'" height="').concat(s,'" x="').concat(a,'" y="').concat(c,'" href="').concat(l,'"/>'))}return t+="</svg>",t},h=e=>{let t="sa_folder&&";for(let n=0;n<Math.min(i.length,e.length);n++){const o=e[n];o.asset?t+=o.asset.assetId:o.costume&&o.costume.asset?t+=o.costume.asset.assetId:o.url&&(t+=o.url),t+="&&"}return t},g=e=>{if(1===t){return e.props.items.find(t=>t.id===e.props.selectedId)}if(2===t){return e.props.items[e.props.selectedItemIndex]}return null};e.prototype.saInitialSetup=function(){n.clear(),o.clear(),s.clear();const e=[],r=g(this);if(r&&!r.isStage){const n=u(r.name);e.push(n),1===t?a=n:2===t&&(c=n)}this.setState({folders:e})},e.prototype.componentDidMount=function(){const e=g(this);if(e){const n=u(e.name);1===t?a=n:2===t&&(c=n)}this.saInitialSetup()},e.prototype.componentDidUpdate=function(e,n){const o=g(this);if(o){const n=u(o.name),r=this.state.folders.includes(n)?n:null;let s;1===t?a=r:2===t&&(c=r),s=this.props.selectedId?this.props.selectedId!==e.selectedId:this.props.items[this.props.selectedItemIndex]&&e.items[e.selectedItemIndex]&&this.props.items[this.props.selectedItemIndex].name!==e.items[e.selectedItemIndex].name,s&&(o.isStage||"string"!=typeof n||this.state.folders.includes(n)||this.setState(e=>({folders:[...e.folders,n]})))}};const f=e.prototype.render;e.prototype.render=function(){const e=this.props;this.props=r(r({},this.props),((e,r)=>{const i=e=>{const t=e.name;let o,r;n.has(t)?(o=n.get(t),r=o.name):(r={toString:()=>"_".concat(e.name)},o={},n.set(t,o));const s=u(e.name);return Object.assign(o,e),r.realName=e.name,r.realIndex=d,r.inFolder=s,o.name=r,{newItem:o,itemData:r}};n.startTick(),o.startTick(),s.startTick();const a=new Map,c=[],l={items:c};let d=0;for(;d<r.items.length;){const n=r.items[d],g=u(n.name);if(null===g){if(c.push(i(n).newItem),2===t){r.selectedItemIndex===d&&(l.selectedItemIndex=c.length-1)}}else{const n=-1!==e.indexOf(g),f=[];for(;d<r.items.length;){const e=r.items[d],o=i(e);if(u(e.name)!==g)break;if(f.push(o.newItem),2===t){r.selectedItemIndex===d&&(l.selectedItemIndex=n?c.length+f.length:-1)}d++}d--;const m=a.get(g)||0;a.set(g,m+1);const b=h(f),y="".concat(n,"&").concat(m,"&").concat(g,"&").concat(b,"&"),v="&__".concat(m,"_").concat(g),x=b;let w,I,_;if(o.has(y)?(w=o.get(y),I=w.name):(w={id:{toString:()=>v}},I={toString:()=>v},o.set(y,w)),I.folder=g,I.folderOpen=n,w.items=f,w.name=I,n?_=k:s.has(x)?_=s.get(x):(_={assetId:x,encodeDataURI:()=>p(f)},s.set(x,_)),1===t?(w.costume||(w.costume={}),w.costume.asset=_,w.id||(w.id={}),w.id.sa_folder_items=f,w.id.toString=()=>v):(w.asset=_,w.dragPayload||(w.dragPayload={}),w.dragPayload.sa_folder_items=f),c.push(w),n)for(const e of f)c.push(e)}d++}return n.endTick(),o.endTick(),s.endTick(),l})(this.state&&this.state.folders||[],this.props)),1===t?l=this.props.items:2===t&&(d=this.props.items);const i=f.call(this);return this.props=e,i}},N=(e,t)=>{const n=b(e.ref);return(n.state&&n.state.folders||[]).includes(t)},j=(e,t,n)=>{b(e.ref).setState(e=>{let o=e&&e.folders||[];return o=o.filter(e=>e!==t),n?{folders:[...o,t]}:{folders:o}})};t.tab.createEditorContextMenu((e,n)=>{if("sprite"!==e&&"costume"!==e&&"sound"!==e)return;const r=n.target[t.tab.traps.getInternalKey(n.target)].return.return.return.stateNode,i=v(r.props);if(i){if("string"==typeof i.folder){n.target.setAttribute("sa-folders-context-type","folder");const e=e=>{const t=N(r,i.folder);if(j(r,i.folder,!1),t&&"string"==typeof e&&j(r,e,!0),"SPRITE"===r.props.dragType){for(const t of s.runtime.targets)t.isOriginal&&u(t.getName())===i.folder&&s.renameSprite(t.id,m(h(t.getName(),e)));s.emitWorkspaceUpdate(),C()}else if("COSTUME"===r.props.dragType){for(let t=0;t<s.editingTarget.sprite.costumes.length;t++){const n=s.editingTarget.sprite.costumes[t];u(n.name)===i.folder&&s.renameCostume(t,h(n.name,e))}T()}else if("SOUND"===r.props.dragType){for(let t=0;t<s.editingTarget.sprite.sounds.length;t++){const n=s.editingTarget.sprite.sounds[t];u(n.name)===i.folder&&s.renameSound(t,h(n.name,e))}M()}},a=async()=>{let n=await t.tab.prompt(o("rename-folder-prompt-title"),o("rename-folder-prompt"),i.folder,{useEditorClasses:!0});null!==n&&(g(n)?(n||(n=null),e(n)):alert(o("name-not-allowed")))},c=()=>{e(null)};return[{className:"sa-folders-rename-folder",label:o("rename-folder"),callback:a,position:"assetContextMenuAfterDelete",order:10},{className:"sa-folders-remove-folder",label:o("remove-folder"),callback:c,position:"assetContextMenuAfterDelete",order:11}]}{n.target.setAttribute("sa-folders-context-type","asset");const e=e=>{if("SPRITE"===r.props.dragType){const t=s.runtime.getTargetById(r.props.id);s.renameSprite(r.props.id,m(h(t.getName(),e))),C(),s.emitWorkspaceUpdate()}else if("COSTUME"===r.props.dragType){const t=v(r.props).realIndex,n=s.editingTarget.sprite.costumes[t];s.renameCostume(s.editingTarget.sprite.costumes.indexOf(n),h(n.name,e)),T()}else if("SOUND"===r.props.dragType){const t=v(r.props).realIndex,n=s.editingTarget.sprite.sounds[t];s.renameSound(s.editingTarget.sprite.sounds.indexOf(n),h(n.name,e)),M()}},a=async()=>{const n=await t.tab.prompt(o("name-prompt-title"),o("name-prompt"),p(i.realName),{useEditorClasses:!0});null!==n&&(g(n)?e(n):alert(o("name-not-allowed")))},c=[{border:!0,className:"sa-folders-create-folder",label:o("create-folder"),callback:a,position:"assetContextMenuAfterDelete",order:13}],u=i.inFolder;return"string"==typeof u&&c.push({className:"sa-folders-remove-from-folder",label:o("remove-from-folder"),callback:()=>e(null),position:"assetContextMenuAfterDelete",order:14}),c.concat((e=>{const t=new Set;let n;n="SPRITE"===e.props.dragType?l:d;for(const e of n){const n=v(e);"string"==typeof n.folder&&t.add(n.folder)}return Array.from(t)})(r).filter(e=>e!==u).map((t,n)=>({className:"sa-folders-add-to-folder",label:o("add-to-folder",{folder:t}),callback:()=>e(t),position:"assetContextMenuAfterDelete",order:20+n})))}}});const D=e=>{for(const t of["handleDelete","handleDuplicate","handleExport"]){const n=e.prototype[t];e.prototype[t]=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if("number"==typeof this.props.id){const e=v(this.props);if(e){const o=this.props;this.props=r(r({},o),{},{id:e.realIndex});const s=n.call(this,...t);return this.props=o,s}}return n.call(this,...t)}}const n=e.prototype.handleDragEnd;e.prototype.handleDragEnd=function(){const e=v(this.props);if(e&&"number"==typeof e.realIndex&&this.props.dragging){const n=this.props.index,o=e.realIndex;if(n!==o){const e=t.tab.redux.state.scratchGui.assetDrag.currentOffset,r=b(this.ref);e&&r&&null===r.getMouseOverIndex()&&(this.props.index=o,this.handleDrag(e),this.props.index=n)}}for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return n.call(this,...r)};const s=e.prototype.handleClick;e.prototype.handleClick=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=t[0];if(o&&!this.noClick){const e=v(this.props);if(e){if("string"==typeof e.folder)return o.preventDefault(),void j(this,e.folder,!N(this,e.folder));if("number"==typeof this.props.number&&"number"==typeof e.realIndex)return o.preventDefault(),void(this.props.onClick&&this.props.onClick(e.realIndex))}}return s.call(this,...t)};const i=e.prototype.render;e.prototype.render=function(){const e=v(this.props);if(e){const t=this.props;this.props=r({},this.props),"string"==typeof e.realName&&(this.props.name=p(e.realName)),"number"==typeof this.props.number&&"number"==typeof e.realIndex&&(this.props.number=e.realIndex+1),"string"==typeof e.folder&&(this.props.name=e.folder,e.folderOpen?this.props.details=o("open-folder"):this.props.details=o("closed-folder"),this.props.selected=!1,this.props.number=null,this.props.className+=" ".concat(_(e.folder)," sa-folders-folder")),"string"==typeof e.inFolder&&(this.props.className+=" ".concat(_(e.inFolder)));const n=i.call(this);return this.props=t,n}return i.call(this)}},B=()=>{const e=s.runtime.targets[0].constructor,t=s.installTargets;s.installTargets=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(null!==a){const e=n[0],t=n[2];if(Array.isArray(e)&&!t)for(const t of e)t.sprite&&(t.sprite.name=h(t.sprite.name,a))}return t.call(this,...n).then(e=>(C(),e))};const o=e.prototype.addCostume;e.prototype.addCostume=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(null!==c){const e=t[0];e&&"string"!=typeof u(e.name)&&(e.name=h(e.name,c))}const r=o.call(this,...t);return T(this),r};const r=e.prototype.addSound;e.prototype.addSound=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(null!==c){const e=t[0];e&&"string"!=typeof u(e.name)&&(e.name=h(e.name,c))}const o=r.call(this,...t);return M(this),o};const i=(e,t,o)=>{let{guiItems:r,getAll:s,set:i,rename:a,getVMItemFromGUIItem:c,zeroIndexed:l,onFolderChanged:d}=e;if((t=y(t,l?0:1,l?r.length-1:r.length))===(o=y(o,l?0:1,l?r.length-1:r.length)))return!1;let u=s();const p=s(),g=r[t-(l?0:1)],f=r[o-(l?0:1)],m=v(g),b=v(f);if(!m||!b)return n.warn("should never happen"),!1;const k=("string"==typeof m.folder?g.items:[g]).map(e=>c(e,u)).filter(e=>e);if("number"==typeof b.realIndex){const e=c(f,u);if(!e||k.includes(e))return!1}let x,w=null;if(u=u.filter(e=>!k.includes(e)),o===(l?0:1))x=l?0:1;else if(o===r.length-(l?1:0))x=u.length;else if("number"==typeof b.realIndex){w="string"==typeof b.inFolder?b.inFolder:null;let e=c(f,u);if(!e)return n.warn("should never happen"),!1;x=u.indexOf(e),o>t&&x++}else{if("string"!=typeof b.folder)return n.warn("should never happen"),!1;{let e,r=0;o<t?e=f.items[0]:b.folderOpen?(e=f.items[0],w=b.folder):(e=f.items[f.items.length-1],r=1);let s=c(e,u);if(s)x=u.indexOf(s)+r;else{if(s=c(e,p),!s)return n.warn("should never happen"),!1;x=p.indexOf(s)+r}}}if("string"!=typeof m.folder||null===w){if(x<(l?0:1)||x>u.length)return n.warn("should never happen"),!1;if(u.splice(x,0,...k),i(u),"string"!=typeof m.folder&&m.inFolder!==w){for(const e of k){const t=e.getName?e.getName():e.name;a(e,h(t,w))}d&&d()}return!0}};s.constructor.prototype.reorderTarget=function(e,t){return i({getAll:()=>this.runtime.targets,set:e=>{this.runtime.targets=e,this.emitTargetsUpdate()},rename:(e,t)=>{this.renameSprite(e.id,m(t))},getVMItemFromGUIItem:(e,t)=>t.find(t=>t.id===e.id),onFolderChanged:()=>{this.emitWorkspaceUpdate()},guiItems:l,zeroIndexed:!1},e,t)},e.prototype.reorderCostume=function(e,t){return i({getAll:()=>this.sprite.costumes,set:e=>{this.sprite.costumes=e},rename:(e,t)=>{this.renameCostume(this.sprite.costumes.indexOf(e),t)},getVMItemFromGUIItem:(e,t)=>{const n=v(e);return t.find(e=>e.name===n.realName)},guiItems:d,zeroIndexed:!0},e,t)},e.prototype.reorderSound=function(e,t){return i({getAll:()=>this.sprite.sounds,set:e=>{this.sprite.sounds=e},rename:(e,t)=>{this.renameSound(this.sprite.sounds.indexOf(e),t)},getVMItemFromGUIItem:(e,t)=>{const n=v(e);return t.find(e=>e.name===n.realName)},guiItems:d,zeroIndexed:!0},e,t)};const p=s.shareSoundToTarget;s.shareSoundToTarget=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=this.runtime.getTargetById(t[1]);return o?p.call(this,...t):Promise.reject(new Error("Dropping sound into folder is not supported"))}},O=e=>{const n=e.constructor;n.prototype.sa_loadNextItem=function(){if(!this.sa_queuedItems)return;const e=this.sa_queuedItems.pop();if(e){let t,n;e.dragPayload?(n=e.url?"SOUND":"COSTUME",t=e.dragPayload):e.id&&(n="SPRITE",t=e.id),n&&t&&r.call(this,{dragType:n,payload:t})}},n.prototype.componentDidUpdate=function(e,t){this.state.loading||!t.loading||this.state.error||this.sa_loadNextItem()};const r=n.prototype.handleDrop;n.prototype.handleDrop=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];const i=n[0],a=i&&i.payload&&i.payload.sa_folder_items;if(!Array.isArray(a))return r.call(this,...n);t.tab.confirm("",o("confirm-backpack-folder"),{useEditorClasses:!0}).then(e=>{e&&(this.sa_queuedItems=a,this.sa_loadNextItem())})},e.handleDrop=n.prototype.handleDrop.bind(e)};{const e=t=>{t.target.closest('[class*="backpack_backpack-header_"]')&&setTimeout(()=>{const t=document.querySelector("[class^='backpack_backpack-list_']");if(!t)return;document.removeEventListener("click",e);const n=(e=>{const t=e.closest('[class*="gui_editor-wrapper"]');if(!t)throw new Error("cannot find Backpack");return t[i].child.sibling.child.child.stateNode})(t);(e=>{const t=e.constructor;if("function"!=typeof t.prototype.handleDrop||void 0!==t.prototype.componentDidUpdate)throw new Error("Can not comprehend Backpack")})(n),O(n)})};document.addEventListener("click",e,!0)}{const e=await t.tab.waitForElement("[class^='sprite-selector_sprite-wrapper']",{reduxCondition:e=>!e.scratchGui.mode.isPlayerOnly});s=t.tab.traps.vm,i=Object.keys(e).find(e=>e.startsWith("__reactInternalInstance$"));const n=b(e),o=e[i].child.child.child.stateNode;E(n),(e=>{const t=e.constructor;if("object"!=typeof e.props.asset||"string"!=typeof e.props.name||"string"!=typeof e.props.dragType||"function"!=typeof t.prototype.handleClick||"function"!=typeof t.prototype.setRef||"function"!=typeof t.prototype.handleDrag||"function"!=typeof t.prototype.handleDragEnd||"function"!=typeof t.prototype.handleDelete||"function"!=typeof t.prototype.handleDuplicate||"function"!=typeof t.prototype.handleExport)throw new Error("Can not comprehend SpriteSelectorItem")})(o),(e=>{const t=e.runtime.targets[0];if("function"!=typeof e.installTargets||"function"!=typeof e.reorderTarget||"function"!=typeof t.reorderCostume||"function"!=typeof t.reorderSound||"function"!=typeof t.addCostume||"function"!=typeof t.addSound)throw new Error("Can not comprehend VM")})(s),A(n.constructor,1),D(o.constructor),n.saInitialSetup(),B()}{const e=await t.tab.waitForElement("[class*='selector_list-item']",{reduxCondition:e=>0!==e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly}),n=b(e);E(n),A(n.constructor,2),n.saInitialSetup()}},"style.css":n.n(i).a,"folder.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0xMCA0SDRjLTEuMSAwLTEuOTkuOS0xLjk5IDJMMiAxOGMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjhjMC0xLjEtLjktMi0yLTJoLThsLTItMnoiLz48L3N2Zz4="}},1925:function(e,t,n){"use strict";function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"resources",(function(){return s}));var r=n(1906);const s={"userscript.js":async function(e){let{addon:t,msg:n,console:r}=e,s=-1,i=-1,a=!1;const c=[];window.tabs=c;let l=null;const d="// multi-tab configuration entry\n";let u=0,p=!1,h=0,g=0,f="";const m="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function b(){const e=m.length,t=[];for(let n=0;n<20;n++)t[n]=m.charAt(Math.random()*e);return t.join("")}const y=await t.tab.traps.getBlockly(),v=t.tab.traps.vm,{Blocks:k,Variable:x,RenderedTarget:w,Comment:I}=v.exports;v.emitWorkspaceUpdate;v.emitWorkspaceUpdate=function(){if(!c[s])return'<xml xmlns="http://www.w3.org/1999/xhtml">\n                                      <variables></variables>\n                                    </xml>';const e=this.runtime.getTargetForStage().variables;let t=[];for(const n in e)e[n].type===x.BROADCAST_MESSAGE_TYPE&&t.push(n);for(let e=0;e<this.runtime.targets.length;e++){const n=this.runtime.targets[e].blocks._blocks;for(const e in n)if(n[e].fields.BROADCAST_OPTION){const o=n[e].fields.BROADCAST_OPTION.id,r=t.indexOf(o);-1!==r&&(t=t.slice(0,r).concat(t.slice(r+1)))}}for(let e=0;e<t.length;e++){const n=t[e];delete this.runtime.getTargetForStage().variables[n]}const n=Object.assign({},this.runtime.getTargetForStage().variables),o=this.editingTarget.isStage?Object.create(null):Object.assign({},this.editingTarget.variables),r=Object.keys(n).map(e=>n[e]),i=Object.keys(o).map(e=>o[e]),a=Object.keys(this.editingTarget.comments).map(e=>this.editingTarget.comments[e]).filter(e=>null===e.blockId&&e.tab==s&&!e.text.startsWith(d)),l='<xml xmlns="http://www.w3.org/1999/xhtml">\n                        <variables>\n                          '.concat(r.map(e=>e.toXML()).join(),"\n                          ").concat(i.map(e=>e.toXML(!0)).join(),"\n                        </variables>\n                        ").concat(a.map(e=>e.toXML()).join(),"\n                        ").concat(c[s].scripts.map(e=>v.editingTarget.blocks.blockToXML(e,this.editingTarget.comments)),"\n                      </xml>");this.emit("workspaceUpdate",{xml:l})};const _=v.blockListener;v.blockListener=function(e){var n;if(("comment_delete"!==e.type||(null===(n=l.comments[e.commentId])||void 0===n?void 0:n.tab)===s)&&("delete"!==e.type||function(e,t){const n=v.editingTarget.blocks.getTopLevelScript(t);return e.includes(n)}(c[s].scripts,e.blockId))){if("create"!==e.type||c[s].scripts.includes(e.blockId)||c[s].scripts.push(e.blockId),"move"!==e.type||e.newParentId||c[s].scripts.includes(e.blockId)||c[s].scripts.push(e.blockId),"move"===e.type&&e.newParentId&&c[s].scripts.includes(e.blockId)){const t=c[s].scripts.indexOf(e.blockId);c[s].scripts.splice(t,1)}if("delete"===e.type&&c[s].scripts.includes(e.blockId)){const t=c[s].scripts.indexOf(e.blockId);c[s].scripts.splice(t,1)}switch(_(e),e.type){case"endDrag":if(a=!1,-1===i)break;const n=v.editingTarget.blocks.XMLToBlock(e),o=t.settings.get("moveOnDrag");for(const e of n){const t=e.id,r=e.id=b();if(n.forEach(e=>{e.next===t&&e.next&&(e.next=r),e.parent===t&&e.parent&&(e.parent=r);for(const n in e.inputs){const o=e.inputs[n];o.block===t&&o.block&&(o.block=r),o.shadow===t&&o.shadow&&(o.shadow=r)}}),l.blocks.createBlock(e),o&&(l.blocks.deleteBlock(t,!0),c[s].scripts.includes(t))){const e=c[s].scripts.indexOf(t);c[s].scripts.splice(e,1)}e.topLevel&&c[i].scripts.push(r)}o&&G(i)}}};const S=y.getMainWorkspace(),C=S.listeners_.findIndex(e=>e.name.includes(_.name));S.listeners_.splice(C,1);const T=v.toJSON;v.toJSON=function(e,t){return Y(),T.call(this,e,t)},v.runtime._updateGlows=function(e){const t=[];t.push.apply(t,this.threads),e&&t.push.apply(t,e);const n=[],o=[];for(let e=0;e<t.length;e++){const o=t[e];if(o.target===this._editingTarget){const e=o.blockGlowInFrame;if(o.requestScriptGlowInFrame||o.stackClick){let t=this._editingTarget.blocks.getTopLevelScript(e);c[s].scripts.includes(t)||(t=this.flyoutBlocks.getTopLevelScript(e)),t&&n.push(t)}}}for(let e=0;e<this._scriptGlowsPreviousFrame.length;e++){const t=this._scriptGlowsPreviousFrame[e];n.indexOf(t)<0?this.glowScript(t,!1):o.push(t)}for(let e=0;e<n.length;e++){const t=n[e];this._scriptGlowsPreviousFrame.indexOf(t)<0&&(this.glowScript(t,!0),o.push(t))}this._scriptGlowsPreviousFrame=o};const M=w.prototype.duplicate;w.prototype.duplicate=function(){return Y(),M.call(this)},w.prototype.createComment=function(e,t,n,o,r,i,a,c){if(!this.comments.hasOwnProperty(e)){const l=new I(e,n,o,r,i,a,c);if(l.tab=s,t){l.blockId=t;const n=this.blocks.getBlock(t);n?n.comment=e:log.warn("Could not find block with id ".concat(t," associated with commentId: ").concat(e))}this.comments[e]=l}};class E{constructor(e,t){o(this,"mutation",{}),o(this,"blockId",null),this.mutation=e,this.blockId=t}getInput(){return null}getProcCode(){return this.mutation.proccode}get workspace(){return ScratchBlocks.getMainWorkspace()}mutationToDom(e){const t=v.editingTarget.blocks.mutationToXML(this.mutation),n=(new DOMParser).parseFromString("<xml>".concat(t,"</xml>"),"text/xml").firstChild.firstChild;return e&&n.setAttribute("generateshadows","true"),n}domToMutation(e){const t=v.editingTarget.blocks;this.mutation=t.XMLToMutation(e),t._blocks[this.blockId].mutation=this.mutation}}const L=ScratchBlocks.Procedures.allProcedureMutations;ScratchBlocks.Procedures.allProcedureMutations=function(e){let t=L.call(this,e);if(!v.editingTarget)return t;t=Object.fromEntries(t.map(e=>[e.getAttribute("proccode"),e]));const n=v.editingTarget.blocks;for(const e in n._blocks){const o=n._blocks[e];if("procedures_prototype"===o.opcode&&!t[o.mutation.proccode]){const n=new E(o.mutation,e);t[o.mutation.proccode]=n.mutationToDom(!0)}}return Object.values(t)},ScratchBlocks.Procedures.getPrototypeBlock=function(e,t){var n=y.Procedures.getDefineBlock(e,t);if(n instanceof E){const t=v.editingTarget.blocks;for(const n in t._blocks){const o=t._blocks[n];if("procedures_prototype"===o.opcode&&o.mutation.proccode===e)return new E(o.mutation,n)}}return n?n.getInput("custom_block").connection.targetBlock():null};const A=ScratchBlocks.Procedures.getDefineBlock;ScratchBlocks.Procedures.getDefineBlock=function(e,t){const n=A.call(this,e,t);if(!n){const t=v.editingTarget.blocks;for(const n in t._blocks){const o=t._blocks[n];if("procedures_prototype"===o.opcode&&o.mutation.proccode===e){const e=t._blocks[o.parent];return new E(e.mutation,n)}}}return n};const N=ScratchBlocks.Procedures.getCallers;function j(e,t,n){let o;do{o=t.getBlock(e),e=o.next,n(o);for(const e in o.inputs){j(o.inputs[e].block,t,n)}}while(t.getBlock(o.next))}ScratchBlocks.Procedures.getCallers=function(e,t,n,o){let r=N.call(this,e,t,n,o);if(!v.editingTarget)return r;r=Object.fromEntries(r.map(e=>[e.getProcCode(),e]));const s=v.editingTarget.blocks;for(const e of s._scripts){const t=s._blocks[e];(o||"procedures_definition"!==t.opcode&&"procedures_definition_return"!==t.opcode)&&j(e,s,e=>{var t,n,o;"procedures_call"===e.opcode&&(null!==(o=(t=r)[n=e.mutation.proccode])&&void 0!==o||(t[n]=new E(e.mutation.block.id)))})}return Object.values(r)};const D=y.BlockDragger.prototype.startBlockDrag;y.BlockDragger.prototype.startBlockDrag=function(){a=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return D.call(this,...t)},y.BlockDragger.prototype.fireEndDragEvent_=function(e){var t=new y.Events.EndBlockDrag(this.draggingBlock_,!0);t.isOutside=e,y.Events.fire(t)};const B=document.getElementById("react-tabs-1").getElementsByClassName("injectionDiv")[0],O=B.getElementsByClassName("blocklyFlyout")[0],P=B.getElementsByClassName("blocklyToolboxDiv")[0],R=document.createElement("div");R.classList.add("tab-scrollbar");const z=document.createElement("div");z.classList.add("tab-scroller"),z.onmouseleave=()=>i=-1;const W=document.createElement("div");W.classList.add("tab-wrapper"),W.appendChild(z),W.appendChild(R),function e(){const t=O.getBoundingClientRect(),n=P.getBoundingClientRect(),o=B.getBoundingClientRect();W.style.width="calc(100% - ".concat(Math.max(t.right,n.right)-o.left,"px)"),H(),requestAnimationFrame(e)}(),B.appendChild(W);const F=document.createElement("img");function G(e){const{element:t}=c[e];s=e;for(const e of c){if(!e)continue;const{element:t}=e;t.classList.remove("selected"),t.classList.remove("unselected"),t.classList.add("unselected")}t.classList.toggle("unselected"),t.classList.toggle("selected"),v.emitWorkspaceUpdate(),v.runtime._scriptGlowsPreviousFrame=[],v.runtime._updateGlows()}function Z(e,t,n){var o;const r={name:t,element:null,idx:-1,scripts:[]};n&&(r.scripts=[...n]),r.idx=c.push(r)-1,null!==(o=r.name)&&void 0!==o||(r.name="Tab ".concat(r.idx+1));const l=document.createElement("div");l.classList.add("tab-bounds");const d=document.createElement("div");r.element=d,d.classList.add("tab"),d.classList.add("unselected"),e&&G(r.idx),d.textContent=r.name,l.onclick=()=>{if(r.idx===s){const e=prompt("New name for ".concat(r.name,"?"),r.name);if(!e)return;return r.name=e,void(d.textContent=r.name)}G(r.idx)},d.onmouseenter=()=>{if(i=r.idx,a)return d.classList.add("copying"),l.classList.add("copying"),void W.classList.add("copying");d.classList.add("hover")},d.onmouseleave=()=>{d.classList.remove("copying"),l.classList.remove("copying"),W.classList.remove("copying"),d.classList.remove("hover")},l.appendChild(d),F.before(l),H()}function H(){R.hidden=!0;const e=z.getBoundingClientRect(),t=W.getBoundingClientRect(),n=e.width-t.width,o=t.width-n;o>t.width||(R.hidden=!1,R.style.width="".concat(o,"px"),u=Math.max(Math.min(u,n),0),R.style.left="".concat(u,"px"),z.style.left="-".concat(u,"px"))}function Y(){const e=c.filter(e=>e.scripts.length>0).map((e,t)=>{for(const t of e.scripts){var n,o;l.blocks._blocks[t]?(null!==(o=(n=l.blocks._blocks[t]).mutation)&&void 0!==o||(n.mutation={children:[]}),l.blocks._blocks[t].mutation.blockId=t):r.warn("Ignoring none existent block",t,"while saving for tab",s)}return{name:e.name,scripts:e.scripts,selected:s===t,comments:Object.values(l.comments).filter(e=>!e.text.startsWith(d)&&e.tab==t).map(e=>e.id)}});for(const t of Object.values(l.comments))if(t.text.startsWith(d))return t.text=d+JSON.stringify(e);l.createComment(void 0,void 0,d+JSON.stringify(e),10,10,-1e5,-1e5,!0)}F.src=t.self.getResource("/add.svg"),F.textContent="+",F.classList.add("tab-adder-button"),z.appendChild(F),F.onclick=()=>Z(!0),W.onwheel=e=>{const t=z.getBoundingClientRect(),n=W.getBoundingClientRect(),o=t.width-n.width;u=Math.max(Math.min((e.deltaX||e.deltaY)+u,o),0),R.style.left="".concat(u,"px"),z.style.left="-".concat(u,"px")},R.onmousedown=e=>{p=!0,g=u,h=e.x},document.addEventListener("mouseup",()=>p=!1),document.addEventListener("mousemove",e=>{if(!p)return;const t=z.getBoundingClientRect(),n=W.getBoundingClientRect(),o=t.width-n.width;u=Math.max(Math.min(e.x-h+g,o),0),R.style.left="".concat(u,"px"),z.style.left="-".concat(u,"px")}),v.on("targetsUpdate",()=>{if(!v.editingTarget)return l=null;if(!l||v.editingTarget.id!==l.id||function(){for(const e of Object.values(l.comments))if(e.text===f)return!1;return!0}()){for(l&&Y(),s=-1;c.length;)c.shift();for(;z.children.length>1;)z.children[0].remove();l=v.editingTarget;try{!function(){for(const t of Object.values(l.comments))if(t.text.startsWith(d)){f=t.text;const n=JSON.parse(t.text.slice(d.length));if(null==n||!n.length)throw new Error("No saved tabs");const o=[...l.blocks._scripts];for(const t in l.blocks._blocks){var e;const n=l.blocks._blocks[t];if(null===(e=n.mutation)||void 0===e||!e.blockId)continue;const o=n.id,r=n.id=n.mutation.blockId,s=l.blocks._scripts.indexOf(o);-1!==s&&(l.blocks._scripts[s]=r),delete l.blocks._blocks[t],l.blocks._blocks[r]=n;const i=l.blocks.getBlock(n.next);i&&i.parent&&i.parent===o&&(i.parent=r);const a=l.blocks.getBlock(n.parent);if(a)if(a.next===o&&a.next&&a.next===o)a.next=r;else for(const e in a.inputs){const t=a.inputs[e];t.block===o&&t.block&&t.block===o&&(t.block=r),t.shadow===o&&t.shadow&&t.shadow===o&&(t.shadow=r)}for(const e in n.inputs){const t=n.inputs[e],s=l.blocks.getBlock(t.block);s&&s.parent&&s.parent===o&&(s.parent=r);const i=l.blocks.getBlock(t.shadow);i&&i.parent&&i.parent===o&&(i.parent=r)}n.topLevel&&(n.parent=null)}for(const e in n){const t=n[e];for(const n of t.comments)l.comments[n].tab=e;for(const e of t.scripts){const t=o.indexOf(e);o.splice(t,1)}Z(t.selected,t.name,t.scripts)}for(const e of o)c[s].scripts.push(e);return}throw new Error("No tab comment could be found")}()}catch(e){"No saved tabs"!==e.message&&"No tab comment could be found"!==e.message&&r.warn("Couldnt read the serialized tabs",e),Z(!0,null,v.editingTarget.blocks._scripts)}(s<0||s>=c.length)&&G(0)}});const U={};document.addEventListener("keydown",e=>{U[e.key]=!0,U["{"]&&s>0&&G(--s),U["}"]&&s+1<c.length&&G(++s),U._&&c.length>1&&function(e){if(c.length<=1)return;const n=c[e];n.element.parentElement.remove(),c.splice(e,1),c[s]||s--;const o=t.settings.get("shouldDelete");for(const e of n.scripts)"true"!=o?l.blocks.deleteBlock(e):c[s].scripts.push(e);for(const t of c)t.idx>e&&t.idx--;G(s),H()}(s),U["+"]&&Z(!0)}),document.addEventListener("keyup",e=>delete U[e.key])},"userstyle.css":n.n(r).a,"add.svg":"data:image/svg+xml;base64,PHN2ZwogICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICAgd2lkdGg9IjE0IgogICAgaGVpZ2h0PSIxNCIKICAgIHZpZXdCb3g9IjAgMCAxMCAxMCIKICAgIHN0cm9rZT0iYmxhY2siCiAgICBzdHJva2UtbGluZWNhcD0icm91bmQiCj4KICAgIDxsaW5lIHgxPSI1IiB5MT0iMS41IiB4Mj0iNSIgeTI9IjguNSI+PC9saW5lPgogICAgPGxpbmUgeDE9IjEuNSIgeTE9IjUiIHgyPSI4LjUiIHkyPSI1Ij48L2xpbmU+Cjwvc3ZnPg=="}},1926:function(e,t,n){"use strict";function o(e){var t=this.procCode_.split(/(?=[^\\]%[nbsl])/);t=t.map((function(e){return e.trim()}));for(var n,o=0,r=0;n=t[r];r++){var s;if("%"==n.substring(0,1)&&"l"!==n.substring(1,2)){var i=n.substring(1,2);if("n"!=i&&"b"!=i&&"s"!=i)throw new Error("Found an custom procedure with an invalid type: "+i);s=n.substring(2).trim();var a=this.argumentIds_[o],c=this.appendValueInput(a);"b"==i&&c.setCheck("Boolean"),this.populateArgument_(i,o,e,a,c),o++}else s="%l"==n?" ":n.replace("%l","").trim();this.addProcedureLabel_(s.replace(/\\%/,"%"))}this.procCode_=this.procCode_.replace(/%l /g,"")}function r(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.procCode_="",this.displayNames_=[],this.argumentIds_=[];for(var t=0;t<this.inputList.length;t++){0!=t&&(this.procCode_+=" ");var n=this.inputList[t];if(5==n.type)this.procCode_+=(e?"%l ":"")+n.fieldRow[0].getValue();else{if(1!=n.type)throw new Error("Unexpected input type on a procedure mutator root: "+n.type);var o=n.connection.targetBlock();this.displayNames_.push(o.getFieldValue("TEXT")),this.argumentIds_.push(n.name),"argument_editor_boolean"==o.type?this.procCode_+="%b":this.procCode_+="%s"}}}n.r(t),n.d(t,"resources",(function(){return i}));var s=n(1907);const i={"userscript.js":async function(e){let{addon:t,console:n}=e;function s(e,t){const n="left"===e?"M 17 13 L 9 21 L 17 30":"M 9 13 L 17 21 L 9 30";f.WidgetDiv.DIV.insertAdjacentHTML("beforeend",'\n            <svg width="20px" height="40px" \n                 style="left: '.concat("left"===e?"calc(50% - 20px)":"calc(50% + 20px)",'" \n                 class="blocklyTextShiftArrow">\n                <path d="').concat(n,'" fill="none" stroke="#FF661A" stroke-width="2"></path>\n            </svg>')),f.WidgetDiv.DIV.lastChild.addEventListener("click",t)}function i(e){if(1!==this.inputList.length){for(var t=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n];if(o.connection)o.connection.targetBlock().getField(e.name)==e&&(t=o.name);else for(var r=0;r<o.fieldRow.length;r++)o.fieldRow[r]==e&&(t=o.name)}t&&(f.WidgetDiv.hide(!0),this.removeInput(t),this.onChangeFn(!0),this.updateDisplay_())}}function a(e,n){return function(){var o;const r=null===(o=x)||void 0===o?void 0:o.sourceBlock_,s=r?r.parentBlock_?r.parentBlock_:r:this;if("addLabelExternal"===n){const e=s.inputList[s.inputList.length-1];e.type===f.DUMMY_INPUT&&e.fieldRow[0].setValue(e.fieldRow[0].getValue()+" %l")}if(s.onChangeFn(!0),null==r||!t.settings.get("InsertInputsAfter"))return e.call(this,...arguments);let i=c(x,s.inputList).index+1;e.call(s,...arguments);const a=s.inputList[s.inputList.length-1].name;l(s,a,i)}}function c(e,t){for(const[o,r]of t.entries()){var n;if(r.connection?(null===(n=r.connection.targetBlock())||void 0===n?void 0:n.getField(e.name))===e:r.fieldRow.includes(e))return{name:r.name,index:o}}}function l(e,t,n){const o=e.inputList.length;if(!(t&&n>=0&&n<=o))return!1;const r=e.inputList.findIndex(e=>e.name===t),s=e.inputList.splice(r,1)[0];e.inputList.splice(n,0,s),f.Events.disable();try{e.onChangeFn(!0),e.updateDisplay_()}finally{f.Events.enable()}!function(e){if(!e)return;if(e.type===f.DUMMY_INPUT)e.fieldRow[0].showEditor_();else if(e.type===f.INPUT_VALUE){e.connection.targetBlock().getField("TEXT").showEditor_()}}(e.inputList[n])}function d(e,t,n){const o=e.parentBlock_?e.parentBlock_:e;if(o.inputList.length<=1)return;const{name:r,index:s}=c(t,o.inputList);l(o,r,"left"===n?s-1:s+1)}function u(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.createAllInputs_=o,e.onChangeFn=r,e.removeFieldCallback=i;for(const n of["addLabelExternal","addBooleanExternal","addStringNumberExternal"])t&&(k[n]=e[n]),e[n]=a(e[n],n)}function p(e){e.createAllInputs_=m,e.onChangeFn=b,e.removeFieldCallback=y;for(const[t,n]of Object.entries(k))e[t]=n}function h(){return f.getMainWorkspace().getAllBlocks().find(e=>"procedures_declaration"===e.type)}function g(){u(f.Blocks.procedures_declaration),t.tab.redux.state.scratchGui.customProcedures.active&&u(h(),!1),f.FieldTextInputRemovable.prototype.showEditor_=function(){v.call(this),s("left",()=>d(this.sourceBlock_,this,"left")),s("right",()=>d(this.sourceBlock_,this,"right")),x=this}}const f=await t.tab.traps.getBlockly(),m=f.Blocks.procedures_declaration.createAllInputs_,b=f.Blocks.procedures_declaration.onChangeFn,y=f.Blocks.procedures_declaration.removeFieldCallback,v=f.FieldTextInputRemovable.prototype.showEditor_;let k={},x=null;t.self.addEventListener("disabled",(function(){p(f.Blocks.procedures_declaration),t.tab.redux.state.scratchGui.customProcedures.active&&p(h()),f.FieldTextInputRemovable.prototype.showEditor_=v,f.WidgetDiv.DIV.querySelectorAll(".blocklyTextShiftArrow").forEach(e=>e.remove())})),t.self.addEventListener("reenabled",g),g()},"arrows.css":n.n(s).a}},1930:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(e){let{addon:t}=e;const n=await t.tab.traps.getBlockly(),o=n.InsertionMarkerManager.prototype.connectMarker_;n.InsertionMarkerManager.prototype.connectMarker_=function(){if(o.call(this),!t.self.disabled&&this.firstMarker_){var e,n,r;const t=null==this||null===(e=this.workspace_)||void 0===e||null===(n=e.currentGesture_)||void 0===n||null===(r=n.blockDragger_)||void 0===r?void 0:r.draggingBlock_;t.noMoveConnection=!0,t&&t.render(!1)}};const r=n.InsertionMarkerManager.prototype.disconnectMarker_;n.InsertionMarkerManager.prototype.disconnectMarker_=function(){if(r.call(this),!t.self.disabled&&this.firstMarker_){var e,n,o;const t=null==this||null===(e=this.workspace_)||void 0===e||null===(n=e.currentGesture_)||void 0===n||null===(o=n.blockDragger_)||void 0===o?void 0:o.draggingBlock_;t.noMoveConnection=!0,t&&t.render(!1)}};const s=n.BlockSvg.prototype.renderDraw_,i=n.BlockSvg.prototype.renderMoveConnections_;n.BlockSvg.prototype.renderDraw_=function(e,o){var r,a,c;if(t.self.disabled)return s.call(this,e,o);let l=this;if(null!=this&&null!==(r=this.workspace)&&void 0!==r&&null!==(a=r.currentGesture_)&&void 0!==a&&null!==(c=a.blockDragger_)&&void 0!==c&&c.draggedConnectionManager_){const e=this.workspace.currentGesture_.blockDragger_,t=e.draggedConnectionManager_;t.markerConnection_&&t.firstMarker_&&e.draggingBlock_==this&&e.draggingBlock_.type==t.firstMarker_.type&&o.some(e=>e.some(e=>e.type===n.NEXT_STATEMENT))&&(l=t.firstMarker_)}if(l!==this){const t=l.renderCompute_(e);for(let e=0;e<o.length;e++){const r=o[e];let s=!1;for(const e of r)e.type===n.NEXT_STATEMENT&&(s=!0);s&&(r.height=Math.max(r.height,t[e].height))}}s.call(this,e,o),l!==this||this.noMoveConnection||i.call(this),this.noMoveConnection=!1},n.BlockSvg.prototype.renderMoveConnections_=function(){if(t.self.disabled)return i.call(this)}}}},1931:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(){const e=Symbol("custom-gradient-tag"),t={select:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><rect stroke="#000" fill="#fff" x=".5" y=".5" width="19" height="19" rx="4" stroke-opacity=".15"/><path fill="red" d="M13.35 8.8h-2.4V6.4a1.2 1.2 90 0 0-2.4 0l.043 2.4H6.15a1.2 1.2 90 0 0 0 2.4l2.443-.043L8.55 13.6a1.2 1.2 90 0 0 2.4 0v-2.443l2.4.043a1.2 1.2 90 0 0 0-2.4"/></svg>',add:'<svg viewBox="2 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill="red" d="M18 10h-4V6a2 2 0 0 0-4 0l.071 4H6a2 2 0 0 0 0 4l4.071-.071L10 18a2 2 0 0 0 4 0v-4.071L18 14a2 2 0 0 0 0-4"></path></svg>',delete:'<svg viewBox="2 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill="red" d="M 18 10 h -4 H 6 a 2 2 0 0 0 0 4 L 18 14 a 2 2 0 0 0 0 -4"></path></svg>'},n=new Set(["TEXT","OVAL","RECT","ROUNDED_RECT","TRIANGLE","SUSSY","ARROW"]);let o,r,s,i=!1,a={};function c(e,t){const n=e.x-t.x,o=e.y-t.y;return Math.atan2(o,n)*(180/Math.PI)+90}function l(e){const t=[...e.parts].sort((e,t)=>e.p-t.p);let n="Linear"===e.type?"linear-gradient(":"radial-gradient(";"Linear"===e.type&&(n+="".concat(e.dir,"deg, "));for(const e of t)n+="".concat(e.c," ").concat(e.p,"%, ");return n.substring(0,n.length-2)+")"}function d(e,t){const n=e.center,o=new paper.Point({angle:t,length:1}),r=new paper.Path.Rectangle(e),s=new paper.Path.Line({from:n.subtract(o.multiply(1e4)),to:n.add(o.multiply(1e4))}),i=s.getIntersections(r);return s.remove(),r.remove(),i.length<2?{origin:n.subtract(o.multiply(e.width/2)),destination:n.add(o.multiply(e.width/2))}:{origin:i[0].point,destination:i[1].point}}function u(e){const{gradient:t,origin:n,destination:o}=e;if(!t||!n||!o)return null;const r=t.stops.map(e=>"".concat(e.color.toCSS(!0)," ").concat(Math.round(100*e.offset),"%"));return t.radial?"radial-gradient(circle, ".concat(r.join(", "),")"):"linear-gradient(".concat(c(o,n),"deg, ").concat(r.join(", "),")")}function p(e){return e&&e.gradient?{gradient:e.gradient,origin:e.origin||"",destination:e.destination||e.highlight||""}:{}}function h(e,n){const o=t[e].replace("red","#00c3ff");return n?o:"data:image/svg+xml;base64,"+btoa(o)}function g(e,t){const n=a.parts.length,o=null!=t?t:Math.floor(100*Math.random()),r=null!=e?e:"#".concat(Math.floor(Math.random()*Math.pow(2,24)).toString(16).padStart(6,"0")),s=e&&9===e.length?parseInt(e.slice(7,9),16)/255:1,i=document.createElement("div");i.id=n,i.classList.add("pointer"),i.setAttribute("style","cursor: pointer; width: 25px; position: absolute; top: -6px; transform: translateX(-50%);"),i.style.left="".concat(o,"%");const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width","14"),c.setAttribute("height","7"),c.style.transform="translateX(45%)";const l=document.createElementNS("http://www.w3.org/2000/svg","polygon");l.setAttribute("points","0,7 7,0 14,7"),l.setAttribute("stroke","#fff"),l.setAttribute("fill","#fff"),c.appendChild(l);const d=document.createElement("div");d.setAttribute("style","width: 25px; height: 25px; border-radius: 4px; background: #fff; display: flex; justify-content: center; align-items: center; flex-direction: column;");const u=document.createElement("div");u.setAttribute("style","width: 16px; height: 16px; border-radius: 5px; background: ".concat(r,"; border: solid 2px rgba(0,0,0,.2); opacity: ").concat(s,"; margin-bottom: 2px;"));const p=document.createElement("input");p.setAttribute("type","color"),p.setAttribute("style","opacity: 0; position: absolute; pointer-events: none;");const h=document.createElement("input");return h.setAttribute("type","number"),h.setAttribute("min","0"),h.setAttribute("max","100"),h.value=100*s,h.setAttribute("style","visibility: hidden; background: #fff; border: none; color: #000; text-align: center; position: absolute; pointer-events: auto; width: 45px; height: 25px; padding: 0; margin: 0; border-radius: 0 5px 5px 0; left: 22px;"),u.addEventListener("click",e=>{h.style.visibility="visible",p.click(),e.stopPropagation()}),i.addEventListener("mouseleave",e=>{h.style.visibility="hidden",e.stopPropagation()}),p.addEventListener("input",e=>{a.parts[n].c=e.target.value,u.style.background=e.target.value,f()}),h.addEventListener("click",e=>{h.focus(),e.stopPropagation()}),h.addEventListener("input",e=>{const t=Math.min(100,Math.max(0,e.target.value));e.target.value=t,u.style.opacity=t/100;const o=Math.round(2.55*t).toString(16).padStart(2,"0"),r=a.parts[n].c;a.parts[n].c=r.substring(0,7)+o,f()}),i.addEventListener("mousedown",e=>{if(e.preventDefault(),e.target===h)return;a.selectedPointer=i;const t=i.parentElement,o=t.getBoundingClientRect(),r=e=>{const r=e.clientX-o.left,s=Math.min(100,Math.max(0,r/t.offsetWidth*100));i.style.left="".concat(s,"%"),a.parts[n].p=s,f()},s=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",s)}),d.append(u,p,h),i.append(c,d),a.parts.push({c:r,p:o}),a.selectedPointer=i,i}function f(){a.modal.querySelector('div[class="color-display"]').style.background=l(a)}function m(){var e;const t=ReduxStore.getState().scratchPaint,n=a._gradCache;a={parts:[],type:"Linear",dir:90,selectedPointer:void 0,modal:void 0,path:t.modals.fillColor?"fillColor":"strokeColor"};const o=document.createElement("div");o.classList.add("SP-gradient-maker"),o.setAttribute("style","position: absolute; z-index: 9999; pointer-events: auto; background-color: rgba(0,0,0,.1); width: 100%; height: 100vh;");const r=document.createElement("div");r.classList.add("gradient-modal"),r.setAttribute("style","color: var(--paint-text-primary, #575e75); width: 450px; height: 260px; display: block; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); background: var(--ui-secondary, hsla(215, 75%, 95%, 1)); border: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); border-radius: 5px; padding: 15px;"),a.modal=r;const s=document.createElement("span");s.setAttribute("style",'display: block; text-align: center; justify-content: center; border-bottom: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); padding-bottom: 10px; margin: 0 25px 0 25px; font-weight: 600;"'),s.textContent="Gradient Maker";const i=document.createElement("div");i.classList.add("color-display"),i.setAttribute("style","width: 420px; height: 40px; display: flex; justify-content: center; align-items: center; margin: 15px 15px 0 15px; border: solid 2px grey; border-radius: 5px 5px 0 0;");const u=document.createElement("div");u.classList.add("draggables"),u.setAttribute("style","width: 420px; height: 40px; position: relative; display: flex; justify-content: center; align-items: center; margin: 0 15px 15px 15px; border: solid 2px grey; border-radius: 0 0 5px 5px; background: #111111;");const m=document.createElement("div");m.classList.add("settings"),m.setAttribute("style","border-top: dashed 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); padding-top: 10px; display: flex; justify-content: center; align-items: center;"),function(e){const t="width: 35px; height: 35px; border: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); border-radius: 5px; background: var(--paint-input-background, --ui-primary, #fff); transition: transform 0.2s;",n=document.createElement("button");n.setAttribute("style",t),n.setAttribute("onmouseover",'this.style.transform="scale(1.1)"'),n.setAttribute("onmouseout",'this.style.transform="scale(1)"'),n.innerHTML=h("add",!0),n.addEventListener("click",e=>{a.modal.querySelector('div[class="draggables"]').appendChild(g()),f(),e.stopPropagation()});const o=document.createElement("button");o.setAttribute("style",t),o.setAttribute("onmouseover",'this.style.transform="scale(1.1)"'),o.setAttribute("onmouseout",'this.style.transform="scale(1)"'),o.style.margin="0px 8px",o.innerHTML=h("delete",!0),o.addEventListener("click",e=>{const t=a.selectedPointer;t&&(a.parts.splice(t.id,1),t.remove(),f(),delete a.selectedPointer),e.stopPropagation()});const r=document.createElement("span");r.textContent="Gradient Type:";const s=document.createElement("select");s.setAttribute("style","cursor: pointer; height: 30px; margin: 5px; border: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); border-radius: 5px; background: var(--ui-secondary, #fff);");const i=document.createElement("option"),c=document.createElement("option");i.text="Linear",i.value="Linear",c.text="Radial",c.value="Radial",s.append(i,c),s.addEventListener("change",e=>{a.type=e.target.value,f(),e.stopPropagation()});const l=document.createElement("span");l.textContent="Direction:";const d=document.createElement("input");d.setAttribute("style","text-align: center; width: 50px; height: 25px; margin: 5px; border: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); border-radius: 5px; background: var(--ui-secondary, #fff);"),d.setAttribute("type","number"),d.setAttribute("max",360),d.setAttribute("min",0),d.setAttribute("value",90),d.addEventListener("input",e=>{a.dir=e.target.value,f(),e.stopPropagation()}),e.append(n,o,r,s,l,d)}(m);const b=document.createElement("div");b.setAttribute("style","display: flex; justify-content: center; align-items: center;"),function(e){const t="color: #fff; font-weight: 600; text-align: center; padding: 10px; margin: 10px 5px; border: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); border-radius: 5px; background: ".concat("#00c3ff","; transition: transform 0.2s;"),n=document.createElement("button");n.id="enter",n.setAttribute("style",t),n.setAttribute("onmouseover",'this.style.transform="scale(1.1)"'),n.setAttribute("onmouseout",'this.style.transform="scale(1)"'),n.textContent="Okay";const o=document.createElement("button");o.id="cancel",o.setAttribute("style",t),o.setAttribute("onmouseover",'this.style.transform="scale(1.1)"'),o.setAttribute("onmouseout",'this.style.transform="scale(1)"'),o.textContent="Cancel",e.append(o,n)}(b),b.addEventListener("click",e=>{e.target.id&&("enter"===e.target.id&&function(e){const t=[...e.parts].sort((e,t)=>e.p-t.p).map(e=>new paper.GradientStop(e.c,e.p/100)),n=new paper.Gradient(t,"Radial"===e.type);a._gradCache={settings:e,gradient:n},paper.project.getSelectedItems().forEach(t=>{let o,r;if("Radial"===e.type)o=t.bounds.center,r=t.bounds.center.add([t.bounds.width/2,0]);else{const n=d(t.bounds,e.dir-90);o=n.origin,r=n.destination}t[e.path]={gradient:n,origin:o,destination:r}}),paper.tool.onUpdateImage&&paper.tool.onUpdateImage();const o=document.querySelectorAll("div[class^=color-button_color-button_] div[class^=color-button_color-button-swatch_]")["fillColor"===e.path?0:1];o&&(o.style.background=l(e))}(a),o.remove()),e.stopPropagation()}),r.append(s,i,u,m,b),o.appendChild(r),document.body.appendChild(o),null!==(e=t.selectedItems)&&void 0!==e&&e.length?function(e,t,n){const{gradient:o,origin:r,destination:s}=p(e[a.path]);if(!o||!r||!s)return t.append(g(),g());const i=o.stops.map((e,t)=>{const n=Math.round(255*e.color.alpha).toString(16).padStart(2,"0");return g(e.color.toCSS(!0)+n,e.offset?100*e.offset:100*t)});t.append(...i);const l=c(s,r);n.querySelector("select").value=o.radial?"Radial":"Linear",n.querySelector("input").value=l,a.type=o.radial?"Radial":"Linear",a.dir=l}(t.selectedItems[0],u,m):n?function(e,t,n){const o=e.parts.map((e,t)=>g(e.c,isNaN(e.p)?100*t:e.p));t.append(...o),n.querySelector("select").value=e.type,n.querySelector("input").value=e.dir,a.type=e.type,a.dir=e.dir}(n.settings,u,m):u.append(g(),g()),f()}"undefined"==typeof scaffolding&&function(){let t,g,f;ReduxStore.subscribe(()=>{const b=ReduxStore.getState().scratchPaint;if(!b||void 0===(null==b?void 0:b.format)||null===(null==b?void 0:b.format))return;const{mode:y,selectedItems:v,modals:k}=b;if(b.format.startsWith("BITMAP"))return void(s&&(s.remove(),s=void 0));"FILL"===y?function(e){if(!a._gradCache)return;e.fillMode.gradientType="HORIZONTAL",e.color.fillColor.gradientType="HORIZONTAL",e.color.strokeColor.gradientType="HORIZONTAL";const t=document.querySelector("div[class^=color-button_color-button_] div[class^=color-button_color-button-swatch_]");t&&queueMicrotask(()=>{a._gradCache&&(t.style.background=l(a._gradCache.settings))});const n=paper.tool;if("function"!=typeof(null==n?void 0:n._getFillItem))return;const o=n._getFillItem();if(!o)return;const r=o.bounds;let s,i;if("Radial"===a.type)s=new paper.Point(n._point.x,n._point.y),i=s.add([Math.max(r.width,r.height)/2,0]);else{const e=d(r,a.dir-90);s=e.origin,i=e.destination}o["fill"===n.fillProperty?"fillColor":"strokeColor"]={gradient:a._gradCache.gradient,origin:s,destination:i}}(b):n.has(y)&&function(t){if(!a._gradCache&&"TEXT"!==t)return;const n=document.querySelector("div[class^=color-button_color-button_] div[class^=color-button_color-button-swatch_]");n&&queueMicrotask(()=>{a._gradCache&&(n.style.background=l(a._gradCache.settings))});const o=paper.tool;if("function"!=typeof(null==o?void 0:o._onMouseDrag))return;if(o[e])return;const r="TEXT"===t?"onKeyDown":"onMouseDrag",s=o[r];o[e]=!0,o[r]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(s.call(this,...n),!a._gradCache)return void("TEXT"===t&&(o.element.style.background="",o.element.style.backgroundClip="",o.element.style.color=""));let i;switch(t){case"RECT":i=this.rect;break;case"OVAL":i=this.oval;break;case"TEXT":i=this.textBox;break;case"ROUNDED_RECT":i=this.rect;break;case"TRIANGLE":i=this.tri;break;case"SUSSY":i=this.sussy;break;case"ARROW":i=this.tri;break;default:return}if(!i)return;const c=i.bounds;let u,p;if("Radial"===a.type)u=i.bounds.center,p=i.bounds.center.add([i.bounds.width/2,0]);else{const e=d(c,a.dir-90);u=e.origin,p=e.destination}i.fillColor={gradient:a._gradCache.gradient,origin:u,destination:p},"TEXT"===t&&(o.element.style.background=l(a._gradCache.settings),o.element.style.backgroundClip="text",o.element.style.color="transparent")}}(y);const x=v.map(e=>e.id).join("."),w="".concat(k.fillColor).concat(k.strokeColor);if(y===t&&x===g&&w===f)return;if(t=y,g=x,f=w,null!=v&&v.length?function(e){const[t,n]=document.querySelectorAll("div[class^=color-button_color-button_] div[class^=color-button_color-button-swatch_]"),o=u(p(e.strokeColor));n&&(o?n.style.background=o:e.strokeColor&&0!==e.strokeWidth||(n.style.background="#fff"));const r=p(e.fillColor),s=u(r);if(a._gradCache=void 0,t)if(s){t.style.background=s;const{gradient:e,destination:n,origin:o}=r;a._gradCache={gradient:e,settings:{type:e.radial?"Radial":"Linear",dir:c(n,o),parts:e.stops.map(e=>{const t=Math.round(255*e.color.alpha).toString(16).padStart(2,"0");return{c:e.color.toCSS(!0)+t,p:100*e.offset}})}}}else e.fillColor||(t.style.background="#fff")}(v[0]):"SELECT"!==y&&"RESHAPE"!==y||(a._gradCache=void 0),!k.strokeColor&&!k.fillColor)return;if(i)return;const I=new MutationObserver(()=>{const e=document.querySelector('div[class^="color-picker_gradient-picker-row_"]');if(!e||"custom-gradient-btn"===e.lastElementChild.id)return;o||function(e){const t={},n=Array.from(e.children);for(const e of n){const n=e.classList.toString();void 0===t[n]?t[n]=1:t[n]=0}for(const[e,n]of Object.entries(t))n?o=e:r=e}(e);const t=Array.from(e.children);s=t[0].cloneNode(!0),s.src=h("select"),s.id="custom-gradient-btn",s.setAttribute("class",r),e.appendChild(s),e.addEventListener("click",e=>{if(e.target===s){for(const e of t)e.setAttribute("class",r);s.setAttribute("class",o),m()}else"IMG"===e.target.nodeName&&(a._gradCache=void 0,s.setAttribute("class",r))}),i=!1,I.disconnect()});I.observe(document.body,{childList:!0,subtree:!0}),i=!0})}()}}},1932:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(){const e=vm.runtime,t=Symbol("costume-tools-tag"),n={r:0,sx:1,sy:1,kx:0,ky:0,outlineRatio:1},o=Math.PI/180,r=180/Math.PI,s={panel:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><rect x="10.796" y="6.222" width="4.813" height="2.174" rx=".5" ry=".5" fill="#fff" fill-rule="evenodd" stroke="#575e75" stroke-width=".75"/><path fill="none" stroke="red" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75" style="paint-order:markers stroke fill" d="M3 3h14v14H3z"/><g fill="#fff" fill-rule="evenodd" stroke-width=".75"><path stroke="red" stroke-linecap="round" stroke-linejoin="round" style="paint-order:markers fill stroke" d="M3 3h14v1.896H3z"/><rect x="10.796" y="9.722" width="4.813" height="2.174" rx=".5" ry=".5" stroke="#575e75"/><rect x="10.796" y="13.222" width="4.813" height="2.174" rx=".5" ry=".5" stroke="#575e75"/></g><path d="M9.563 7.309H4.242m5.321 6.978H4.242m5.321-3.478H4.242" style="paint-order:markers stroke fill" fill="none" stroke="red" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75"/></svg>',lock:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="40.98" viewBox="0 0 38 40.98"><path d="M19.086 0c7.566 0 13.903 5.707 13.903 12.912q0 .499-.046.987h1.083A3.98 3.98 0 0 1 38 17.879v19.125a3.98 3.98 0 0 1-3.974 3.976H3.977A3.98 3.98 0 0 1 0 37V17.875a3.98 3.98 0 0 1 3.98-3.976h24.974a8 8 0 0 0 .064-.987c0-4.863-4.333-8.937-9.931-8.937-3.266 0-6.127 1.409-7.922 3.53-.266.315-1.459 1.852-1.803 2.95-.568 1.815-.262 3.397-.262 3.397l-4.026.07S4.153 9.1 7.655 5.311C11.249 1.421 14.994 0 19.086 0" fill="red" fill-rule="evenodd"/></svg>',unlock:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="40.98" viewBox="0 0 38 40.98"><path d="M18.913 0c4.412 0 8.388 1.907 10.956 4.948.705.84.598 2.093-.24 2.801a1.99 1.99 0 0 1-2.793-.244c-1.795-2.121-4.656-3.53-7.922-3.53-5.598 0-9.931 4.074-9.931 8.937q0 .495.064.987h24.974a3.98 3.98 0 0 1 3.98 3.976V37a3.98 3.98 0 0 1-3.976 3.98H3.972A3.98 3.98 0 0 1 0 37.004V17.879a3.98 3.98 0 0 1 3.972-3.98h1.083q-.045-.49-.045-.987C5.01 5.707 11.347 0 18.913 0" fill="red" fill-rule="evenodd"/></svg>',exit:'<svg viewBox="-10 7 20 20" xmlns="http://www.w3.org/2000/svg"><path transform="rotate(45)" fill="red" d="M18 10h-4V6a2 2 0 0 0-4 0l.071 4H6a2 2 0 0 0 0 4l4.071-.071L10 18a2 2 0 0 0 4 0v-4.071L18 14a2 2 0 0 0 0-4"></path></svg>'},i=["normal","multiply","screen","overlay","soft-light","hard-light","color-dodge","color-burn","darken","lighten","difference","exclusion","hue","saturation","color","luminosity"],a=[{text:"thorn",value:"miter"},{text:"round",value:"round"},{text:"bevel",value:"bevel"}],c=[{title:"Position",items:[{title:"x",input:"number",params:"x"},{title:"y",input:"number",params:"y"},{title:"Group Position",id:"groupPosition",input:"toggler"}]},{title:"Rotation",items:[{title:"direction",input:"number",params:"dir"},"br",{title:"Group Rotation",id:"groupRotate",input:"toggler"}]},{title:"Scaling",items:[{title:"x",input:"number",params:"sx"},{title:"y",input:"number",params:"sy"},"br",{title:"width",input:"monitor",params:"width"},{title:"height",input:"monitor",params:"height"},"br",{title:"Group Scaling",id:"groupScale",input:"toggler"},"br",{title:"Scale Outlines",id:"strokeScale",input:"toggler"}]},{title:"Skewing",items:[{title:"x",input:"number",params:"sx"},{title:"y",input:"number",params:"sy"},{title:"Group Skewing",id:"groupSkew",input:"toggler"}]},{title:"Layering",noBitmap:!0,items:[{title:"order",input:"number",params:"layer"}]},{title:"Blending",noBitmap:!0,items:[{title:"mode",input:"select",params:"blend"}]},{title:"Outlines",noBitmap:!0,items:[{title:"type",input:"select",params:"outlineType"},{title:"dash",input:"number",params:"outlineDash"}]}];let l={},d=!1,u=!1,p=!0;function h(e){for(const t of paper.project.layers)if(t.data&&t.data[e])return t}function g(){return ReduxStore.getState().scratchPaint.selectedItems}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;for(const o of e)t(o,n);queueMicrotask(()=>{var t;x(),u&&(l.sessionStore={center:m(e)},u=!1);const n=paper.tool;if("function"==typeof(null===(t=n.boundingBoxTool)||void 0===t?void 0:t.setSelectionBounds)&&n.boundingBoxTool.setSelectionBounds(),"function"==typeof n.onUpdateImage){const t=[];for(const n of e)n.dashArray.length&&(t.push(n),n.dashArray[0]/=2);n.onUpdateImage();for(const e of t)e.dashArray[0]*=2}})}function m(e){if(e.every(e=>function(e){const t=e.getParent();return!t.data||!t.data.isPaintingLayer}(e))){const t=e[0].getParent().getBounds();return[t.centerX,t.centerY]}{const t=paper.Rectangle.create(e.map(e=>e.bounds)).reduce((e,t)=>e.unite(t));return[t.centerX,t.centerY]}}function b(e,t,n,r){let s=r?new paper.Point(l.sessionStore.center):e.bounds.center;e.translate(s.multiply(-1)),e.shear(Math.tan(t*o),Math.tan(n*o)),e.translate(s),u=!0}function y(e,t){const n=s[e].replaceAll("red","#00c3ff");return t?n:"data:image/svg+xml;base64,"+btoa(n)}function v(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=o[0],s=n.endsWith("x");switch(n){case"Position/x":case"Position/y":return o.length>1?l.groupPosition?{max:15e3,value:s?m(o)[0]-e.stageWidth:-1*(m(o)[1]-e.stageHeight)}:{value:"",max:15e3,placeholder:"mixed"}:{max:15e3,value:s?r.getPosition().x-e.stageWidth:-1*(r.getPosition().y-e.stageHeight)};case"Rotation/direction":var c,d;return o.length>1?{min:0,max:360,value:"",placeholder:"mixed"}:{min:0,max:360,value:((null!==(c=null===(d=r[t])||void 0===d?void 0:d.r)&&void 0!==c?c:0)+90)%180};case"Scaling/x":case"Scaling/y":return o.length>1?{value:"",placeholder:"mixed"}:{max:15e3,value:100*(r[t]?s?r[t].sx:r[t].sy:1)};case"Scaling/width":case"Scaling/height":if(o.length>1){return{value:(paper.Rectangle.create(o.map(e=>e.bounds)).reduce((e,t)=>e.unite(t))[n.endsWith("width")?"width":"height"]/2).toFixed(2)}}return{value:(r.getBounds()[n.endsWith("width")?"width":"height"]/2).toFixed(2)};case"Skewing/x":case"Skewing/y":return o.length>1?{value:"",placeholder:"mixed"}:{max:15e3,value:r[t]?s?r[t].kx:r[t].ky:0};case"Layering/order":{const e=h("isPaintingLayer").children;if(o.length>1)return{min:1,max:e.length-1,value:"",placeholder:"mixed"};{const t=e.length-e.indexOf(r);return{min:1,max:e.length-1,value:t-1}}}case"Blending/mode":{const e=[];for(const t of i){const n=document.createElement("option");n.text=t,n.value=t,e.push(n)}return{options:e,value:r.blendMode}}case"Outlines/type":{const e=[];for(const t of a){const n=document.createElement("option");n.text=t.text,n.value=t.value,e.push(n)}return{options:e,value:r.strokeJoin}}case"Outlines/dash":var u;return o.length>1?{min:1,value:"",placeholder:"mixed"}:{min:1,value:null!==(u=r.dashArray[0])&&void 0!==u?u:0}}return{}}function k(o){const r=o.endsWith("x");switch(o){case"Position/x":case"Position/y":return(t,n)=>{n=parseFloat(n||0)*(r?1:-1),function(e,t,n,o){const r=e.getPosition();if(o){const o=l.sessionStore;if(!o[e._id]){const t=o.center;o[e._id]=[r.x-t[0],r.y-t[1]]}const s=o[e._id];n?e.setPosition(t+s[0],r.y):e.setPosition(r.x,t+s[1])}else n?e.setPosition(t,r.y):e.setPosition(r.x,t)}(t,n+=r?e.stageWidth:e.stageHeight,r,l.groupPosition)};case"Rotation/direction":return(e,n)=>{var o,r;!function(e,t,n){n?(e.rotate(t,l.sessionStore.center),u=!0):e.rotate(t)}(e,(n-=null!==(o=null===(r=e[t])||void 0===r?void 0:r.r)&&void 0!==o?o:0)-90,l.groupRotate)};case"Scaling/x":case"Scaling/y":return(e,o)=>{e[t]||(e[t]=structuredClone(n)),(o/=100)||(o=1e-8),r?(o/=e[t].sx,e[t].sx*=o):(o/=e[t].sy,e[t].sy*=o),function(e,n,o,r,s){if(r?(o?e.scale(n,1,l.sessionStore.center):e.scale(1,n,l.sessionStore.center),u=!0):o?e.scale(n,1):e.scale(1,n),s&&e.strokeWidth){const n=e[t],o=Math.sqrt(n.sx*n.sy);e.strokeWidth*=o/n.outlineRatio,n.outlineRatio=o}}(e,o,r,l.groupScale,l.strokeScale)};case"Skewing/x":case"Skewing/y":return(e,n)=>{var o,s,i,a;r?b(e,n-=null!==(o=null===(s=e[t])||void 0===s?void 0:s.kx)&&void 0!==o?o:0,0,l.groupSkew):b(e,0,n-=null!==(i=null===(a=e[t])||void 0===a?void 0:a.ky)&&void 0!==i?i:0,l.groupSkew)};case"Layering/order":return(e,t)=>{const n=h("isPaintingLayer"),o=n.children.slice();e.parent===n&&e.remove(),n.insertChild(o.length-t-1,e)};case"Blending/mode":return(e,t)=>e.setBlendMode(t);case"Outlines/type":return(e,t)=>e.setStrokeJoin(t);case"Outlines/dash":return(e,t)=>e.setDashArray([t])}}function x(){const e=g();if(!l.toolDiv)return;const t=l.toolDiv.querySelectorAll('[class="monitor"]');for(const n of t){const t=v(n.id,e);""!==t.value&&(n.textContent=t.value)}}function w(){const e=document.querySelector('div[class="costume-tool-modal"]');e&&e.remove()}function I(){const e=ReduxStore.getState().scratchPaint;delete l.toolDiv,l.format=e.format.startsWith("BITMAP")?"BITMAP":"VECTOR",l.sessionStore={};const t=document.createElement("div");t.classList.add("costume-tool-modal"),t.setAttribute("style","color: var(--paint-text-primary, #575e75); width: 275px; height: 350px; z-index: 99999; display: block; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); background: var(--ui-secondary, hsla(215, 75%, 95%, 1)); border: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); border-radius: 5px; padding: 15px;"),t.id="draggable";const n=document.createElement("span");n.setAttribute("style","display: block; text-align: center; justify-content: center; border-bottom: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); padding-bottom: 10px; margin: 0 25px 0 25px; font-weight: 600;"),n.id="draggable",n.textContent="Object Editor";const o=document.createElement("button");o.setAttribute("style","position: absolute; top: 10px; right: 5px; transform: scale(1.2); filter: saturate(0); justify-content: center; transition: transform 0.2s, filter 0.2s; background: transparent; border: none;");const r=document.createElement("img");r.src=y("exit"),r.setAttribute("width",20),o.appendChild(r),o.addEventListener("mouseover",()=>{o.style.transform="scale(1.5)",o.style.filter="saturate(1)"}),o.addEventListener("mouseout",()=>{o.style.transform="scale(1.2)",o.style.filter="saturate(0)"}),o.addEventListener("click",e=>{w(),e.stopPropagation()});const s=document.createElement("div");s.id="tool-display",s.setAttribute("style","display: block; overflow-y: scroll;width: auto;height: 300px; margin-top: 15px;background: var(--ui-white);border: solid 2px grey;border-radius: 5px;"),l.toolDiv=s,function(){if(!l.toolDiv)return;l.id=paper.project.selectedItems.map(e=>e.id).join("."),l.toolDiv.innerHTML="";const e=g(),t=m(e),n=[];for(const t of c){if(t.noBitmap&&"BITMAP"===l.format)continue;const o=document.createElement("div");o.setAttribute("style","border-bottom: dotted 2px grey; padding: 5px;");const r=document.createElement("span");r.setAttribute("style","display: block; text-align: center; border-bottom: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); padding-bottom: 5px; margin: 0 25px 0 25px; font-size: 14px; font-weight: 600;"),r.textContent=t.title;const s=document.createElement("div");s.setAttribute("style","display: flex; flex-wrap: wrap; justify-content: center; align-items: center; padding: 5px 10px 5px 10px;");for(const n of t.items){if("br"===n){const e=document.createElement("div");e.setAttribute("style","flex-basis: 100%; height: 0;"),s.appendChild(e);continue}const o=document.createElement("span");o.setAttribute("style","margin: 5px; font-size: 12px;"),o.textContent=n.title;const r="".concat(t.title,"/").concat(n.title);let i;if("monitor"===n.input){i=document.createElement("div"),i.setAttribute("style","text-align: center; font-size: 13px; margin: 5px; padding: 5px; border: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); border-radius: 5px;"),i.classList.add("monitor"),i.id=r;const t=v(r,e);i.textContent=t.value}else if("select"===n.input){i=document.createElement("select"),i.setAttribute("style","text-align: center; font-size: 13px; height: 25px; margin: 5px; border: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); border-radius: 5px;"),i.id=r;const t=v(r,e);i.append(...t.options),i.value=t.value,i.addEventListener("change",t=>{f(e,k(r),t.target.value),t.stopPropagation()})}else if("toggler"===n.input){i=document.createElement("button"),i.setAttribute("style","background: transparent; border: none; margin-left: 3px; padding: 5px 0 0 0;"),i.id=r,l[n.id]||(i.style.filter="saturate(0)");const e=document.createElement("img");e.src=y(l[n.id]?"lock":"unlock"),e.setAttribute("width",15),i.appendChild(e),i.addEventListener("click",t=>{const o=!l[n.id];l[n.id]=o,i.style.filter=o?"saturate(1)":"saturate(0)",e.src=y(o?"lock":"unlock"),t.stopPropagation()})}else{i=document.createElement("input"),i.setAttribute("style","text-align: center; font-size: 13px; width: 60px; height: 25px; margin: 5px; border: solid 2px var(--ui-black-transparent, hsla(0, 0%, 0%, 0.15)); border-radius: 15px;"),i.id=r,i.type=n.input;const t=v(r,e);t.max&&i.setAttribute("max",t.max),t.min&&i.setAttribute("min",t.min),t.placeholder?i.setAttribute("placeholder",t.placeholder):i.setAttribute("placeholder",""),i.setAttribute("value",t.value),i.addEventListener("input",t=>{f(e,k(r),t.target.value),t.stopPropagation()})}s.append(o,i)}o.append(r,s),n.push(o)}l.toolDiv.append(...n),l.sessionStore.center=t}(),t.append(n,o,s),document.body.appendChild(t),t.addEventListener("mouseenter",()=>{p=!1}),t.addEventListener("mouseleave",()=>{p=!0}),t.addEventListener("mousedown",e=>{if("draggable"!==e.target.id)return;e.preventDefault();const n=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop,r=e=>{const r=e.clientX-n,s=e.clientY-o;t.style.left="".concat(r,"px"),t.style.top="".concat(s,"px"),t.style.boxShadow="black 5px 5px 15px"},s=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",s),t.style.boxShadow=""};document.addEventListener("mousemove",r),document.addEventListener("mouseup",s)})}"undefined"==typeof scaffolding&&ReduxStore.subscribe((e,o)=>{if(!ReduxStore.getState().scratchPaint)return;const s=document.querySelector('div[class^="paint-editor_row_"] div[class^="fixed-tools_row_"]');if(!s)return;d||function(){d=!0;const e=paper.Item.prototype.rotate;paper.Item.prototype.rotate=function(){for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];const i="number"==typeof r[0]?r[0]:0;for(const e of null!==(a=this._children)&&void 0!==a?a:[this]){var a;e[t]||(e[t]=structuredClone(n)),e[t].r+=i}return e.call(this,...r)};const o=paper.Group.prototype.scale;paper.Group.prototype.scale=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const i="number"==typeof r[0]?r[0]:1,a="number"==typeof r[1]?r[1]:i;for(const e of null!==(c=this._children)&&void 0!==c?c:[this]){var c;e[t]||(e[t]=structuredClone(n)),e[t].sx*=i,e[t].sy*=a}return o.call(this,...r)};const s=paper.Item.prototype.shear;paper.Item.prototype.shear=function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];const a="number"==typeof o[0]?o[0]:1,c="number"==typeof o[1]?o[1]:a;for(const e of null!==(l=this._children)&&void 0!==l?l:[this]){var l;e[t]||(e[t]=structuredClone(n)),e[t].kx+=Math.atan(a)*r,e[t].ky+=Math.atan(c)*r}return s.call(this,...o)}}();let i=s.querySelector('div[id="'.concat("costume-editor-panel",'"]'));if(!i){var a;let e=s.querySelectorAll('div[class*="input-group_input-group_"]');e=null!==(a=e[2])&&void 0!==a?a:e[1],i=document.createElement("div"),i.setAttribute("style","border-right: 1px dashed var(--paint-ui-pane-border, #D9D9D9); margin-right: calc(2 * .25rem); display: inline-block; padding: .25rem .325rem; min-width: 3rem; text-align: center;"),i.id="costume-editor-panel";const t=document.createElement("span"),n=document.createElement("img");n.setAttribute("draggable",!1),n.setAttribute("style","width: 1.5rem; vertical-align: middle;");const o=document.createElement("span");o.setAttribute("style","display: block; margin-top: .125rem; font-size: .625rem;"),o.textContent="Tools",t.append(n,o),i.appendChild(t),e.insertAdjacentElement("afterend",i),i.children[0].addEventListener("click",e=>{paper.project.selectedItems.length&&(i.style.opacity="1",w(),I()),e.stopPropagation()})}queueMicrotask(()=>{var e,t;const n=paper.project&&(null===(e=paper)||void 0===e||null===(t=e.project)||void 0===t?void 0:t.selectedItems.length)>0;i.children[0].children[0].src=y("panel"),i.children[0].setAttribute("style","opacity: ".concat(n?1:.5,"; cursor: pointer;")),n?p&&function(){const e=g(),t=l.toolDiv;if(t)for(const n of c)for(const o of n.items){if("br"===o)continue;const r="".concat(n.title,"/").concat(o.title),s=t.querySelector('input[id="'.concat(r,'"], select[id="').concat(r,'"], div[id="').concat(r,'"]'));if(s){const t=v(r,e);""!==t.value&&("monitor"===o.input?s.textContent=t.value:s.value=t.value)}}}():w()})})}}},1933:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(e){let{addon:t}=e;await t.tab.traps.getPaper();const n=e=>{ReduxStore.dispatch({type:"scratch-paint/addon-util/TOGGLE_ROUNDED_RECT_MODE",enabled:e})};n(!0),t.self.addEventListener("disabled",()=>{n(!1)}),t.self.addEventListener("reenabled",()=>{n(!0)})}}},1934:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(e){let{addon:t}=e;await t.tab.traps.getPaper();const n=e=>{const n=t.settings.get("brush"),o=t.settings.get("eraser"),r=t.settings.get("pen"),s=ReduxStore.getState().scratchPaint;e?(10===s.brushMode.simplifySize&&ReduxStore.dispatch({type:"scratch-paint/brush-mode/CHANGE_SIMPLIFY_SIZE",simplifySize:n}),10===s.eraserMode.simplifySize&&ReduxStore.dispatch({type:"scratch-paint/eraser-mode/CHANGE_ERASER_SIMPLIFY_SIZE",simplifySize:o}),2===s.penMode.simplifySize&&ReduxStore.dispatch({type:"scratch-paint/pen-mode/CHANGE_PEN_SIMPLIFY_SIZE",simplifySize:r})):(s.brushMode.simplifySize===n&&ReduxStore.dispatch({type:"scratch-paint/brush-mode/CHANGE_SIMPLIFY_SIZE",simplifySize:10}),s.eraserMode.simplifySize===o&&ReduxStore.dispatch({type:"scratch-paint/eraser-mode/CHANGE_ERASER_SIMPLIFY_SIZE",simplifySize:10}),s.penMode.simplifySize===r&&ReduxStore.dispatch({type:"scratch-paint/pen-mode/CHANGE_PEN_SIMPLIFY_SIZE",simplifySize:2}))};n(!0),t.self.addEventListener("disabled",()=>{n(!1)}),t.self.addEventListener("reenabled",()=>{n(!0)})}}},1935:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return r}));var o=n(1832);const r={"userscript.js":async function(e){let{addon:t,console:n,msg:o}=e;const r=await t.tab.traps.getBlockly(),s=t.tab.traps.vm,i=["RENAME_VARIABLE_ID","DELETE_VARIABLE_ID","NEW_BROADCAST_MESSAGE_ID","RENAME_BROADCAST_MESSAGE_ID"],a=(e,t)=>!s.runtime.getAllVarNamesOfType(t).includes(e),c=(e,t)=>!s.editingTarget.lookupVariableByNameAndType(e,t),l={createGlobalVariable:{enabled:e=>a(e,""),createVariable:(e,t)=>e.createVariable(t)},createLocalVariable:{enabled:e=>c(e,""),createVariable:(e,t)=>e.createVariable(t,"",null,!0)},createGlobalList:{enabled:e=>a(e,"list"),createVariable:(e,t)=>e.createVariable(t,"list")},createLocalList:{enabled:e=>c(e,"list"),createVariable:(e,t)=>e.createVariable(t,"list",null,!0)},createBroadcast:{enabled:e=>a(e,"broadcast_msg"),createVariable:(e,t)=>e.createVariable(t,"broadcast_msg")}};let d=null,u=null,p=null,h=[],g=[],f=[],m=[];const b=r.DropDownDiv.show;r.DropDownDiv.show=function(){u=document.querySelector(".blocklyDropdownMenu");for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(!u)return b.call(this,...n);u.focus=()=>{},p=document.createElement("input"),t.tab.displayNoneWhileDisabled(p,{display:"flex"}),p.type="text",p.addEventListener("input",I),p.addEventListener("keydown",_),p.classList.add("u-dropdown-searchbar"),u.insertBefore(p,u.firstChild),h=Array.from(u.children).filter(e=>"INPUT"!==e.tagName).map(e=>({element:e,text:e.textContent})),f=m,I();const s=b.call(this,...n);return d=r.DropDownDiv.getContentDiv(),d.style.width=getComputedStyle(d).width,d.style.height=getComputedStyle(d).height,u.insertBefore(p,u.firstChild),p.focus(),s};const y=r.DropDownDiv.clearContent;r.DropDownDiv.clearContent=function(){y.call(this),h=[],g=[],r.DropDownDiv.content_.style.height=""};const v=r.FieldDropdown.prototype.getOptions;r.FieldDropdown.prototype.getOptions=function(){const e=v.call(this),t=this.sourceBlock_,n=s.editingTarget&&s.editingTarget.isStage;return t&&("data"===t.category_?(e.push(S("createGlobalVariable")),n||e.push(S("createLocalVariable"))):"data-lists"===t.category_?(e.push(S("createGlobalList")),n||e.push(S("createLocalList"))):"event_broadcast_menu"!==t.type&&"event_whenbroadcastreceived"!==t.type||e.push(S("createBroadcast"))),m=e,e};const k=r.FieldTextDropdown.prototype.getOptions;r.FieldTextDropdown.prototype.getOptions=function(){const e=k.call(this),t=this.sourceBlock_,n=s.editingTarget&&s.editingTarget.isStage;return t&&("data"===t.category_?(e.push(S("createGlobalVariable")),n||e.push(S("createLocalVariable"))):"data-lists"===t.category_?(e.push(S("createGlobalList")),n||e.push(S("createLocalList"))):"event_broadcast_menu"!==t.type&&"event_whenbroadcastreceived"!==t.type||e.push(S("createBroadcast"))),m=e,e};const x=r.FieldVariable.prototype.onItemSelected;function w(e,t){e.dispatchEvent(new MouseEvent("mousedown",{relatedTarget:e,bubbles:!0})),t&&e.dispatchEvent(new MouseEvent("mouseup",{relatedTarget:e,bubbles:!0}));const n=e.offsetTop,o=n+e.offsetHeight,r=d.scrollTop,s=d.offsetHeight,i=r+s;r>n?d.scrollTop=n:o>i&&(d.scrollTop=o-s)}function I(){const e=g;g=function(){const e=p.value.trim(),t=e.trim().toLowerCase(),n=(n,o)=>{const r=f[o][1];if(i.includes(r))return t?-1:0;if(Object.prototype.hasOwnProperty.call(l,r)){if(!t)return-1;return l[r].enabled(e)?(n.element.lastChild.lastChild.textContent=S(r)[0],0):-1}const s=n.text.toLowerCase();return t===s?2:s.startsWith(t)?1:s.includes(t)?0:-1};return h.map((e,t)=>({item:e,score:n(e,t)})).sort((e,t)=>{let{score:n}=e,{score:o}=t;return Math.max(0,o)-Math.max(0,n)})}();let t=e.length!==g.length;if(!t)for(let n=0;n<g.length;n++)if(g[n].item!==e[n].item){t=!0;break}if(t&&e.length>0){for(const{item:t}of e)t.element.remove();for(const{item:e}of g)u.appendChild(e.element)}for(const{item:e,score:t}of g)e.element.hidden=t<0}function _(e){if("Enter"===e.key){e.stopPropagation(),e.preventDefault();const t=document.querySelector(".goog-menuitem-highlight");if(t&&!t.hidden)return void w(t,!0);const n=r.selected;if(""===p.value&&n&&("event_broadcast"===n.type||"event_broadcastandwait"===n.type||"event_whenbroadcastreceived"===n.type))return void r.DropDownDiv.hide();for(const{item:e}of g)if(!e.element.hidden){w(e.element,!0);break}}else if("Escape"===e.key)r.DropDownDiv.hide();else if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault(),e.stopPropagation();const t=g.filter(e=>e.score>=0).map(e=>e.item);if(0===t.length)return;let n=-1;for(let e=0;e<t.length;e++)if(t[e].element.classList.contains("goog-menuitem-highlight")){n=e;break}const o=t.length-1;let r=0;r="ArrowDown"===e.key?-1===n||n===o?0:n+1:-1===n||0===n?o:n-1,w(t[r].element,!1)}}function S(e){var t;return[o(e,{name:(null===(t=p)||void 0===t?void 0:t.value.trim())||""}),e]}r.FieldVariable.prototype.onItemSelected=function(e,t){const n=this.sourceBlock_;if(n&&n.workspace&&0!==p.value.length){const e=n.workspace,o=t.getValue();if(Object.prototype.hasOwnProperty.call(l,o)){const t=l[o];r.Events.setGroup(!0);const n=t.createVariable(e,p.value.trim());return this.sourceBlock_&&this.setValue(n.getId()),void r.Events.setGroup(!1)}}return x.call(this,e,t)}},"userscript.css":n.n(o).a}},1941:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async e=>{let{addon:t,console:n}=e;if(!t.tab.redux.state)return n.warn("Redux is not available!");t.tab.redux.initialize(),t.tab.redux.addEventListener("statechanged",e=>{let{detail:o}=e;if(t.self.disabled)return;const r=o;if(!r.action||"scratch-paint/clipboard/SET"!==r.action.type)return;const s=r.next.scratchPaint.clipboard.items;if(1!==s.length)return;const i=s[0];if(!Array.isArray(i)||"Raster"!==i[0])return n.log("copied element is vector");const a=i[1].source;t.tab.copyImage(a).then(()=>n.log("Image successfully copied")).catch(e=>n.error("Image could not be copied: ".concat(e)))})}}},1942:function(e,t,n){"use strict";function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"resources",(function(){return a}));var i=n(1863);const a={"userscript.js":async function(e){let{addon:t,msg:n,console:o}=e;const s=Symbol(),i=e=>document.body.classList.toggle("sa-stage-color-picker-picking",e);let a=!1;document.addEventListener("click",e=>{a=e.isTrusted},{capture:!0}),t.tab.redux.initialize(),t.tab.redux.addEventListener("statechanged",e=>{const n=e.detail.action;n[s]||(!t.self.disabled&&a&&"scratch-paint/eye-dropper/ACTIVATE_COLOR_PICKER"===n.type&&(i(!0),t.tab.redux.dispatch({type:"scratch-gui/color-picker/ACTIVATE_COLOR_PICKER",callback:e=>{queueMicrotask(()=>{t.tab.redux.dispatch(r(r({},n),{},{[s]:!0})),n.callback(e),n.previousMode&&n.previousMode.activate(),t.tab.redux.dispatch({type:"scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER",[s]:!0}),i(!1)})}})),"scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER"===n.type&&(i(!1),t.tab.redux.state.scratchGui.colorPicker.active&&t.tab.redux.dispatch({type:"scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER",[s]:!0})))})},"style.css":n.n(i).a}},1950:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(e){let{addon:t,console:n,msg:o}=e;const r=await t.tab.traps.getBlockly(),s=t.tab.traps.vm;let i={},a={};const c={isNoop:!0},l=()=>{const e=Math.floor(256*Math.random()*256*256);return"#".concat(e.toString(16).padStart(6,"0"))},d=()=>{if(i={},a={},t.settings.get("motion")&&(i.motion_turnright=[c,{opcode:"motion_turnleft"}],i.motion_turnleft=[{opcode:"motion_turnright"},c],i.motion_gotoxy=[c,{opcode:"motion_changebyxy",remapInputName:{X:"DX",Y:"DY"}}],i.motion_changebyxy=[{opcode:"motion_gotoxy",remapInputName:{DX:"X",DY:"Y"}},c],i.motion_setx=[c,{opcode:"motion_changexby",remapInputName:{X:"DX"}},{opcode:"motion_sety",remapInputName:{X:"Y"}},{opcode:"motion_changeyby",remapInputName:{X:"DY"}}],i.motion_changexby=[{opcode:"motion_setx",remapInputName:{DX:"X"}},c,{opcode:"motion_sety",remapInputName:{DX:"Y"}},{opcode:"motion_changeyby",remapInputName:{DX:"DY"}}],i.motion_sety=[{opcode:"motion_setx",remapInputName:{Y:"X"}},{opcode:"motion_changexby",remapInputName:{Y:"DX"}},c,{opcode:"motion_changeyby",remapInputName:{Y:"DY"}}],i.motion_changeyby=[{opcode:"motion_setx",remapInputName:{DY:"X"}},{opcode:"motion_changexby",remapInputName:{DY:"DX"}},{opcode:"motion_sety",remapInputName:{DY:"Y"}},c],i.motion_xposition=[c,{opcode:"motion_yposition"}],i.motion_yposition=[{opcode:"motion_xposition"},c]),t.settings.get("looks")&&(i.looks_seteffectto=[c,{opcode:"looks_changeeffectby",remapInputName:{VALUE:"CHANGE"}}],i.looks_changeeffectby=[{opcode:"looks_seteffectto",remapInputName:{CHANGE:"VALUE"}},c],i.looks_setsizeto=[c,{opcode:"looks_changesizeby",remapInputName:{SIZE:"CHANGE"}}],i.looks_changesizeby=[{opcode:"looks_setsizeto",remapInputName:{CHANGE:"SIZE"}},c],i.looks_costumenumbername=[c,{opcode:"looks_backdropnumbername"}],i.looks_backdropnumbername=[{opcode:"looks_costumenumbername"},c],i.looks_show=[c,{opcode:"looks_hide"}],i.looks_hide=[{opcode:"looks_show"},c],i.looks_setShape=[{opcode:"looks_setShape"},c],i.looks_setColor=[{opcode:"looks_setColor"},c],i.looks_setFont=[{opcode:"looks_setFont"},c],i.looks_nextcostume=[c,{opcode:"looks_nextbackdrop"}],i.looks_nextbackdrop=[{opcode:"looks_nextcostume"},c],i.looks_say=[c,{opcode:"looks_sayforsecs",createInputs:{SECS:{shadowType:"math_number",value:"2"}}},{opcode:"looks_think"},{opcode:"looks_thinkforsecs",createInputs:{SECS:{shadowType:"math_number",value:"2"}}}],i.looks_think=[{opcode:"looks_say"},{opcode:"looks_sayforsecs",createInputs:{SECS:{shadowType:"math_number",value:"2"}}},c,{opcode:"looks_thinkforsecs",createInputs:{SECS:{shadowType:"math_number",value:"2"}}}],i.looks_sayforsecs=[{opcode:"looks_say",splitInputs:["SECS"]},{opcode:"looks_think",splitInputs:["SECS"]},c,{opcode:"looks_thinkforsecs"}],i.looks_thinkforsecs=[{opcode:"looks_say",splitInputs:["SECS"]},{opcode:"looks_think",splitInputs:["SECS"]},{opcode:"looks_sayforsecs"},c],i.looks_switchbackdropto=[c,{opcode:"looks_switchbackdroptoandwait"}],i.looks_switchbackdroptoandwait=[{opcode:"looks_switchbackdropto"},c],i.looks_gotofrontback=[c,{opcode:"looks_goforwardbackwardlayers",remapInputName:{FRONT_BACK:"FORWARD_BACKWARD"},mapFieldValues:{FRONT_BACK:{front:"forward",back:"backward"}},createInputs:{NUM:{shadowType:"math_integer",value:"1"}}}],i.looks_goforwardbackwardlayers=[{opcode:"looks_gotofrontback",splitInputs:["NUM"],remapInputName:{FORWARD_BACKWARD:"FRONT_BACK"},mapFieldValues:{FORWARD_BACKWARD:{forward:"front",backward:"back"}}},c]),t.settings.get("sound")&&(i.sound_play=[c,{opcode:"sound_playuntildone"}],i.sound_playuntildone=[{opcode:"sound_play"},c],i.sound_seteffectto=[c,{opcode:"sound_changeeffectby"}],i.sound_changeeffectby=[{opcode:"sound_seteffectto"},c],i.sound_setvolumeto=[c,{opcode:"sound_changevolumeby"}],i.sound_changevolumeby=[{opcode:"sound_setvolumeto"},c]),t.settings.get("event")&&(i.event_broadcast=[c,{opcode:"event_broadcastandwait"}],i.event_broadcastandwait=[{opcode:"event_broadcast"},c]),t.settings.get("control")&&(i.control_if=[c,{opcode:"control_if_else"}],i.control_if_else=[{opcode:"control_if",splitInputs:["SUBSTACK2"]},c],i.control_repeat_until=[c,{opcode:"control_while"},{opcode:"control_wait_until",splitInputs:["SUBSTACK"]},{opcode:"control_forever",splitInputs:["CONDITION"]}],i.control_forever=[{opcode:"control_repeat_until"},{opcode:"control_while"},c],i.control_wait_until=[{opcode:"control_repeat_until"},c],i.control_while=[{opcode:"control_repeat_until"},c,{opcode:"control_forever",splitInputs:["CONDITION"]}]),t.settings.get("operator")&&(i.operator_equals=[{opcode:"operator_gt"},{opcode:"operator_gtorequal"},{opcode:"operator_lt"},{opcode:"operator_ltorequal"},c,{opcode:"operator_notequal"}],i.operator_gt=[c,{opcode:"operator_gtorequal"},{opcode:"operator_lt"},{opcode:"operator_ltorequal"},{opcode:"operator_equals"},{opcode:"operator_notequal"}],i.operator_lt=[{opcode:"operator_gt"},{opcode:"operator_gtorequal"},c,{opcode:"operator_ltorequal"},{opcode:"operator_equals"},{opcode:"operator_notequal"}],i.operator_notequal=[{opcode:"operator_gt"},{opcode:"operator_gtorequal"},{opcode:"operator_lt"},{opcode:"operator_ltorequal"},{opcode:"operator_equals"},c],i.operator_gtorequal=[{opcode:"operator_gt"},c,{opcode:"operator_lt"},{opcode:"operator_ltorequal"},{opcode:"operator_equals"},{opcode:"operator_notequal"}],i.operator_ltorequal=[{opcode:"operator_gt"},{opcode:"operator_gtorequal"},{opcode:"operator_lt"},c,{opcode:"operator_equals"},{opcode:"operator_notequal"}],i.operator_add=[c,{opcode:"operator_subtract"},{opcode:"operator_multiply"},{opcode:"operator_divide"},{opcode:"operator_power"},{opcode:"operator_mod"}],i.operator_subtract=[{opcode:"operator_add"},c,{opcode:"operator_multiply"},{opcode:"operator_divide"},{opcode:"operator_power"},{opcode:"operator_mod"}],i.operator_multiply=[{opcode:"operator_add"},{opcode:"operator_subtract"},c,{opcode:"operator_divide"},{opcode:"operator_power"},{opcode:"operator_mod"}],i.operator_divide=[{opcode:"operator_add"},{opcode:"operator_subtract"},{opcode:"operator_multiply"},c,{opcode:"operator_power"},{opcode:"operator_mod"}],i.operator_power=[{opcode:"operator_add"},{opcode:"operator_subtract"},{opcode:"operator_multiply"},{opcode:"operator_divide"},c,{opcode:"operator_mod"}],i.operator_mod=[{opcode:"operator_add"},{opcode:"operator_subtract"},{opcode:"operator_multiply"},{opcode:"operator_divide"},{opcode:"operator_power"},c],i.operator_and=[c,{opcode:"operator_or"}],i.operator_or=[{opcode:"operator_and"},c],i.operator_trueBoolean=[c,{opcode:"operator_falseBoolean"}],i.operator_falseBoolean=[{opcode:"operator_trueBoolean"},c]),t.settings.get("sensing")&&(i.sensing_mousex=[c,{opcode:"sensing_mousey"}],i.sensing_mousey=[{opcode:"sensing_mousex"},c],i.sensing_touchingcolor=[c,{opcode:"sensing_coloristouchingcolor",createInputs:{COLOR2:{shadowType:"colour_picker",value:l}}}],i.sensing_coloristouchingcolor=[{opcode:"sensing_touchingcolor",splitInputs:["COLOR2"]},c]),t.settings.get("data")&&(i.data_setvariableto=[c,{opcode:"data_changevariableby",remapShadowType:{VALUE:"math_number"}}],i.data_changevariableby=[{opcode:"data_setvariableto",remapShadowType:{VALUE:"text"}},c],i.data_showvariable=[c,{opcode:"data_hidevariable"}],i.data_hidevariable=[{opcode:"data_showvariable"},c],i.data_showlist=[c,{opcode:"data_hidelist"}],i.data_hidelist=[{opcode:"data_showlist"},c],i.data_replaceitemoflist=[c,{opcode:"data_insertatlist"}],i.data_insertatlist=[{opcode:"data_replaceitemoflist"},c],i.data_deleteoflist=[c,{opcode:"data_deletealloflist",splitInputs:["INDEX"]}],i.data_deletealloflist=[{opcode:"data_deleteoflist",createInputs:{INDEX:{shadowType:"math_integer",value:"1"}}},c]),t.settings.get("extension")){if(i.pen_penDown=[c,{opcode:"pen_penUp"}],i.pen_penUp=[{opcode:"pen_penDown"},c],i.pen_setPenColorParamTo=[c,{opcode:"pen_changePenColorParamBy"}],i.pen_changePenColorParamBy=[{opcode:"pen_setPenColorParamTo"},c],i.pen_setPenHueToNumber=[c,{opcode:"pen_changePenHueBy"}],i.pen_changePenHueBy=[{opcode:"pen_setPenHueToNumber"},c],i.pen_setPenShadeToNumber=[c,{opcode:"pen_changePenShadeBy"}],i.pen_changePenShadeBy=[{opcode:"pen_setPenShadeToNumber"},c],i.pen_setPenSizeTo=[c,{opcode:"pen_changePenSizeBy"}],i.pen_changePenSizeBy=[{opcode:"pen_setPenSizeTo"},c],i.music_setTempo=[c,{opcode:"music_changeTempo"}],i.music_changeTempo=[{opcode:"music_setTempo"},c],s.extensionManager){const e=s.extensionManager.getAddonBlockSwitches();Object.getOwnPropertyNames(e).forEach(t=>{Object.getOwnPropertyNames(e[t]).forEach(n=>{i["".concat(t,"_").concat(n)]=e[t][n]})})}s.runtime.on("EXTENSION_ADDED",()=>{const e=s.extensionManager.getAddonBlockSwitches();Object.getOwnPropertyNames(e).forEach(t=>{Object.getOwnPropertyNames(e[t]).forEach(n=>{i["".concat(t,"_").concat(n)]=e[t][n]})})})}if(t.settings.get("sa")){const e="â€‹â€‹logâ€‹â€‹ %s",t="â€‹â€‹warnâ€‹â€‹ %s",n="â€‹â€‹errorâ€‹â€‹ %s",r=o("debugger_log"),s=o("debugger_warn"),i=o("debugger_error"),c={mutate:{proccode:e},msg:r},l={mutate:{proccode:t},msg:s},d={mutate:{proccode:n},msg:i};a[e]=[{msg:r,isNoop:!0},l,d],a[t]=[c,{msg:s,isNoop:!0},d],a[n]=[c,l,{msg:i,isNoop:!0}]}i.data_variable=[],i.data_listcontents=[]};d(),t.settings.addEventListener("change",d);const u=e=>"text"===e?"TEXT":"colour_picker"===e?"COLOUR":"NUM",p=(e,t)=>()=>{var n;if(!t.isNoop)if(t.fieldValue)e.setFieldValue(t.fieldValue,"VALUE");else try{r.Events.setGroup(!0);const o=e.workspace,s=[];if(t.splitInputs)for(const n of t.splitInputs){const t=e.getInput(n);if(!t)continue;const o=t.connection;if(o&&o.isConnected()){const e=o.targetBlock();e.isShadow()||(o.disconnect(),s.push(e))}}const i=r.Xml.blockToDom(e),a=e.getRelativeToSurfaceXY();i.setAttribute("x",a.x),i.setAttribute("y",a.y),t.opcode&&i.setAttribute("type",t.opcode);const c=e.getParent();let l,d;if(c){l=c.getConnections_().find(t=>t.targetConnection&&t.targetConnection.sourceBlock_===e);const t=e.getConnections_().find(e=>e.targetConnection&&e.targetConnection.sourceBlock_===c);d=t.type}for(const e of Array.from(i.children)){const n=e.getAttribute("name");if(t.splitInputs&&t.splitInputs.includes(n)){i.removeChild(e);continue}const o=t.remapInputName&&t.remapInputName[n];o&&e.setAttribute("name",o);const r=t.remapShadowType&&t.remapShadowType[n];if(r){const t=e.firstChild,n=t.firstChild;t.setAttribute("type",r),n.setAttribute("name",u(r))}const s=t.mapFieldValues&&t.mapFieldValues[n];if(s&&"FIELD"===e.tagName){const t=s[e.innerText];"string"==typeof t&&(e.innerText=t)}}if(t.mutate){const e=i.querySelector("mutation");for(const[n,o]of Object.entries(t.mutate))e.setAttribute(n,o)}if(t.createInputs)for(const[e,o]of Object.entries(t.createInputs)){const t=document.createElement("value");t.setAttribute("name",e);const r=document.createElement("shadow");r.setAttribute("type",o.shadowType);const s=document.createElement("field");s.setAttribute("name",u(o.shadowType)),s.innerText="function"==typeof(n=o.value)?n():n,r.appendChild(s),t.appendChild(r),i.appendChild(t)}e.dispose();const p=((e,t)=>{const n=r.Xml.domToBlock(t,e),o=+t.getAttribute("x"),s=+t.getAttribute("y");return n.moveBy(o,s),n})(o,i);if(l){const e=p.getConnections_();e.find(e=>e.type===d).connect(l)}for(const e of s){const t=e.getSvgRoot();t.parentNode.appendChild(t)}}finally{r.Events.setGroup(!1)}};t.tab.createBlockContextMenu((e,n)=>{if(!t.self.disabled){const c=n.type;let l=i[n.type]||[];const d=t.settings.get("customargs")?t.settings.get("customargsmode"):"off";if("off"!==d&&["argument_reporter_boolean","argument_reporter_string_number"].includes(c)&&!n.isShadow()){const t=h();if("all"===d)switch(c){case"argument_reporter_string_number":l=Object.values(t).map(e=>e.stringArgs).flat(1);break;case"argument_reporter_boolean":l=Object.values(t).map(e=>e.boolArgs).flat(1)}else if("defOnly"===d){const o=n.getRootBlock();if("procedures_definition"!==o.type||"procedures_definition_return"!==o.type)return e;const r=t[o.getChildren(!0)[0].getProcCode()];switch(c){case"argument_reporter_string_number":l=r.stringArgs;break;case"argument_reporter_boolean":l=r.boolArgs}}const o=n.getFieldValue("VALUE");l=(s=l,[...new Set(s)]).map(e=>({isNoop:e===o,fieldValue:e,msg:e}))}if("procedures_call"===n.type){const e=n.getProcCode();a[e]&&(l=a[e])}if(t.settings.get("noop")||(l=l.filter(e=>!e.isNoop)),l.forEach((t,r)=>{const s=e.findIndex(e=>e._isDevtoolsFirstItem),i=-1!==s?s:e.length,a=t.msg?t.msg:t.opcode?o(t.opcode):o(n.type);e.splice(i,0,{enabled:!0,text:a,callback:p(n,t),separator:0===r})}),"data_variable"===n.type||"data_listcontents"===n.type){const t=e.findIndex(e=>e.text===r.Msg.DELETE_BLOCK),n=e[t+1];n&&(n.separator=!0)}}var s;return e},{blocks:!0});const h=()=>{const e={},t=s.editingTarget;return Object.values(t.blocks._blocks).filter(e=>"procedures_prototype"===e.opcode).forEach(t=>{const n=t.mutation.proccode,o=JSON.parse(t.mutation.argumentnames),r=n.split(/(?=[^\\]%[nbs])/g).map(e=>e.trim()).filter(e=>"%"===e.charAt(0)).map(e=>e.substring(0,2));const s=[],i=[];for(let e=0;e<o.length;e++)"%b"===r[e]?i.push(o[e]):s.push(o[e]);e[n]={stringArgs:s,boolArgs:i}}),e}}}},1956:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return r}));var o=n(1804);const r={"userscript.js":async function(e){let{addon:t,console:n}=e;const r=()=>{o.b(!t.self.disabled,t.settings.get("invertDrag"))};t.self.addEventListener("disabled",r),t.self.addEventListener("reenabled",r),t.settings.addEventListener("change",r),r(),o.a(t)}}},1961:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async e=>{let{addon:t,console:n,msg:o}=e;const r=["sound","costume"];t.tab.createEditorContextMenu(e=>{const n=t.tab.traps.vm.editingTarget;"sound"===e.type?n.reorderSound(e.index,0):n.reorderCostume(e.index,0),queueMicrotask(()=>{t.tab.traps.vm.emitTargetsUpdate(),t.tab.traps.vm.runtime.emitProjectChanged(),e.target.click()})},{types:r,position:"assetContextMenuAfterExport",order:1,label:o("top"),condition:e=>0!==e.index}),t.tab.createEditorContextMenu(e=>{const n=t.tab.traps.vm.editingTarget;"sound"===e.type?n.reorderSound(e.index,1/0):n.reorderCostume(e.index,1/0),queueMicrotask(()=>{t.tab.traps.vm.emitTargetsUpdate(),t.tab.traps.vm.runtime.emitProjectChanged(),e.target.click()})},{types:r,position:"assetContextMenuAfterExport",order:2,label:o("bottom"),condition:e=>e.index!==e.target.parentNode.parentNode.childElementCount-1})}}},1963:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return r}));var o=n(1804);const r={"userscript.js":async function(e){let{addon:t,console:n}=e;const r=()=>{o.c(!t.self.disabled)};t.self.addEventListener("disabled",r),t.self.addEventListener("reenabled",r),r(),o.a(t)}}},1965:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return r}));var o=n(1894);const r={"userscript.js":async function(e){let{addon:t}=e;await t.tab.traps.getBlockly();const n="--Category_Order_ADDON-config",o="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r=void 0;const s=()=>{const e=document.createElement("sep");return e.setAttribute("gap","36"),e},i=e=>{for(const t of e)if(t.startsWith("scratchCategoryId-"))return t.replace("scratchCategoryId-","")},a=ScratchBlocks.Toolbox.CategoryMenu.prototype.populate;ScratchBlocks.Toolbox.CategoryMenu.prototype.populate=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!r)return void a.call(this,...t);const o=t[0],i=Array.from(o.children),c=i.filter(e=>"category"===e.tagName);for(c.sort((e,t)=>{const n=r.indexOf(e.getAttribute("id")),o=r.indexOf(t.getAttribute("id"));return(-1===n?999:n)-(-1===o?999:o)});o.firstChild;)o.removeChild(o.firstChild);o.appendChild(s()),c.forEach(e=>{o.appendChild(e),o.appendChild(s())}),a.call(this,...t)};const c=vm.toJSON;function l(e){const t=vm.runtime.getTargetForStage();if(!t)return;let o;const r=Object.values(t.comments);for(const e of r)if(e.text.endsWith(n)){o=e.text;break}if(o){if(!e)return!0;const t=o.split("\n").find(e=>e.endsWith(n));if(!t)return;return t.substr(0,t.length-n.length)}return!!e&&void 0}function d(){if(l())return;const e=vm.runtime.getTargetForStage();if(!e)return;const t="Configuration for 'Category Ordering' Addon\nYou can move, resize, and minimize this comment, but don't edit it by hand. This comment can be deleted to remove the stored settings.\n".concat(JSON.stringify(r)).concat(n);e.createComment((()=>{const e=[];for(let t=0;t<20;t++)e[t]=o.charAt(Math.random()*o.length);return e.join("")})(),null,t,50,50,350,170,!1),vm.runtime.emitProjectChanged()}function u(){const e=ScratchBlocks.getMainWorkspace(),t=e.getToolbox();if(!t)return;const n=t.categoryMenu_;n&&(n.secondTable||(n.dispose(),n.createDom(),t.populate_(e.options.languageTree),t.position()))}function p(e){const t=e.target.closest('div[class="scratchCategoryMenuRow"]');if(!t)return;const n=h.querySelectorAll('div[class*="scratchCategoryMenuRow"]'),o=t.getBoundingClientRect(),s=o.height,a=e.clientX-o.left,c=e.clientY-o.top,l=t.cloneNode(!0);t.style.opacity=.5,l.setAttribute("style","position: absolute; z-index: 99999; left: ".concat(o.left,"px; top: ").concat(o.top,"px; width: ").concat(o.width,"px; pointer-events: none;")),l.firstChild.setAttribute("style","box-shadow: #000 5px 5px 10px; border-radius: 8px;"),l.dataset.dragger=!0,document.body.appendChild(l);let d=null;const p=e=>{const o=e.clientX-a,r=e.clientY-c;l.style.left="".concat(o,"px"),l.style.top="".concat(r,"px");const i=h.getBoundingClientRect();let u;e.clientY<i.top+40?h.scrollTop-=4:e.clientY>i.bottom-40&&(h.scrollTop+=4);for(const o of n){if(o===t)continue;const n=o.getBoundingClientRect(),r=n.top+n.height/2,s=n.left+n.width/2,i=Math.abs(e.clientX-s);if(e.clientY<r&&i<100){u=o;break}}for(const e of n)e.style.transform="";if(u){d=u;let e=u;for(;e;){if(e===t)return;e.style.transform="translateY(".concat(s,"px)"),e=e.nextSibling}}else d=null},g=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g);for(const e of n)e.style.transform="";if(t.style.opacity="",l.remove(),d){const e=i(t.firstChild.classList);t.parentNode.insertBefore(t,d);!function(e){const t=[];for(const n of e){const e=i(n.firstChild.classList);e&&t.push(e)}r=t}(h.querySelectorAll('div[class*="scratchCategoryMenuRow"]')),setTimeout(()=>{u(),e&&ScratchBlocks.mainWorkspace.toolbox_.setSelectedCategoryById(e)},100)}};document.addEventListener("mousemove",p),document.addEventListener("mouseup",g)}vm.toJSON=function(){void 0!==r&&d();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.call(this,...t)},vm.runtime.on("PROJECT_LOADED",()=>{const e=l(!0);if(e)try{r=JSON.parse(e),setTimeout(u,100)}catch(e){}});const h=document.querySelector('div[class*="blocklyToolboxDiv"');h.addEventListener("mousedown",e=>{const t=setTimeout(()=>p(e),500),n=()=>clearTimeout(t);document.addEventListener("mouseup",n,{once:!0}),document.addEventListener("mouseleave",n,{once:!0})})},"userstyle.css":n.n(o).a}},1966:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return r}));var o=n(1895);const r={"userscript.js":async function(e){let{addon:t,console:n}=e;const o=t.tab.traps.vm,r=()=>{u.classList.toggle("sa-comment-preview-delay","none"!==t.settings.get("delay")),u.classList.toggle("sa-comment-preview-reduce-transparency",t.settings.get("reduce-transparency")),u.classList.toggle("sa-comment-preview-fade",!t.settings.get("reduce-animation"))};let s=null,i=null,a=0,c=0,l=!1;const d=document.createElement("div");d.classList.add("sa-comment-preview-outer");const u=document.createElement("div");u.classList.add("sa-comment-preview-inner"),u.classList.add("sa-comment-preview-hidden"),r(),t.settings.addEventListener("change",r),d.appendChild(u),document.body.appendChild(d);const p=e=>o.editingTarget.blocks.getBlock(e)||o.runtime.flyoutBlocks.getBlock(e),h=e=>e&&e.comment&&o.editingTarget.comments[e.comment],g=()=>{d.style.transform="translate(".concat(a+8,"px, ").concat(c+8,"px)")},f=()=>{s&&(s=null,u.classList.add("sa-comment-preview-hidden"))};document.addEventListener("mouseover",e=>{if(t.self.disabled)return;if(clearTimeout(i),l)return;const n=e.target.closest(".blocklyBubbleCanvas > g, .blocklyBlockCanvas .blocklyDraggable[data-id]");if(n===s)return;if(!n)return void f();let r=null;if(t.settings.get("hover-view")&&e.target.closest(".blocklyBubbleCanvas > g")&&!e.target.closest("line")){const e=n.querySelector("text.scratchCommentText");if(!e)return;if("none"!==e.getAttribute("display")){const e=n.querySelector("textarea");r=e.value}}else if(e.target.closest(".blocklyBlockCanvas .blocklyDraggable[data-id]")){const e=n.dataset.id,s=p(e),i=h(s);if(t.settings.get("hover-view-block")&&i)r=i.text;else if(s&&"procedures_call"===s.opcode&&t.settings.get("hover-view-procedure")){const e=(e=>{const t=Object.values(o.editingTarget.blocks._blocks).find(t=>"procedures_prototype"===t.opcode&&t.mutation.proccode===e);if(t){if(t.parent)return p(t.parent);const e=t.id;return Object.values(o.editingTarget.blocks._blocks).find(t=>("procedures_definition"===t.opcode||"procedures_definition_return"===t.opcode)&&t.inputs.custom_block&&t.inputs.custom_block.block===e)}return null})(s.mutation.proccode),t=h(e);t&&(r=t.text)}}null!==r&&""!==r.trim()?i=(e=>{if(!u.classList.contains("sa-comment-preview-hidden"))return void e();const n=t.settings.get("delay");return"long"===n?setTimeout(e,500):"short"===n?setTimeout(e,300):void e()})(()=>{s=n,(e=>{u.innerText=e,u.classList.remove("sa-comment-preview-hidden"),g()})(r)}):f()}),document.addEventListener("mousemove",e=>{a=e.clientX,c=e.clientY,l=!1,t.settings.get("follow-mouse")&&!u.classList.contains("sa-comment-preview-hidden")&&g()}),document.addEventListener("mousedown",()=>{f(),l=!0},{capture:!0})},"userstyle.css":n.n(o).a}},1974:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(e){let{addon:t}=e,n=t.settings.get("quality");const o=()=>{ReduxStore.dispatch({type:"scratch-gui/addon-util/SET_SOUND_EDITOR_WAVEFORM_CHUNK_SIZE",chunkSize:n})};o(),t.self.addEventListener("disabled",()=>{n=1024,o()}),t.self.addEventListener("reenabled",()=>{n=t.settings.get("quality"),o()})}}},1975:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(e){let{addon:t}=e;const n=window.matchMedia("(prefers-reduced-motion: reduce)"),o="addonAnimations-",r={default:"cubic-bezier(0.63, 0.32, 0.08, 0.95)",easeIn:"cubic-bezier(0.42, 0, 1.0, 1.0)",easeOut:"cubic-bezier(0, 0, 0.58, 1.0)",easeInOut:"cubic-bezier(0.42, 0, 0.58, 1.0)",smoothStep:"cubic-bezier(0.25, 0.1, 0.25, 1.0)",fastInSlowOut:"cubic-bezier(0.4, 0.0, 0.2, 1.0)",sineIn:"cubic-bezier(0.47, 0, 0.745, 0.715)",sineOut:"cubic-bezier(0.39, 0.575, 0.565, 1)",sineInOut:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",quadIn:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",quadOut:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",quadInOut:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",cubicIn:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",cubicOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",cubicInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",quartIn:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",quartOut:"cubic-bezier(0.165, 0.84, 0.44, 1)",quartInOut:"cubic-bezier(0.77, 0, 0.175, 1)",quintIn:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",quintOut:"cubic-bezier(0.23, 1, 0.32, 1)",quintInOut:"cubic-bezier(0.86, 0, 0.07, 1)",backIn:"cubic-bezier(0.6, -0.28, 0.74, 0.05)",backOut:"cubic-bezier(0.18, 0.89, 0.32, 1.28)",backInOut:"cubic-bezier(0.68, -0.55, 0.27, 1.55)",elastic:"linear(0 0%, 0.22 2.1%, 0.86 6.5%, 1.11 8.6%, 1.3 10.7%, 1.35 11.8%, 1.37 12.9%, 1.37 13.7%, 1.36 14.5%, 1.32 16.2%, 1.03 21.8%, 0.94 24%, 0.89 25.9%, 0.88 26.85%, 0.87 27.8%, 0.87 29.25%, 0.88 30.7%, 0.91 32.4%, 0.98 36.4%, 1.01 38.3%, 1.04 40.5%, 1.05 42.7%, 1.05 44.1%, 1.04 45.7%, 1 53.3%, 0.99 55.4%, 0.98 57.5%, 0.99 60.7%, 1 68.1%, 1.01 72.2%, 1 86.7%, 1 100%)",bounce:"linear(0 0%, 0 2.27%, 0.02 4.53%, 0.04 6.8%, 0.06 9.07%, 0.1 11.33%, 0.14 13.6%, 0.25 18.15%, 0.39 22.7%, 0.56 27.25%, 0.77 31.8%, 1 36.35%, 0.89 40.9%, 0.85 43.18%, 0.81 45.45%, 0.79 47.72%, 0.77 50%, 0.75 52.27%, 0.75 54.55%, 0.75 56.82%, 0.77 59.1%, 0.79 61.38%, 0.81 63.65%, 0.85 65.93%, 0.89 68.2%, 1 72.7%, 0.97 74.98%, 0.95 77.25%, 0.94 79.53%, 0.94 81.8%, 0.94 84.08%, 0.95 86.35%, 0.97 88.63%, 1 90.9%, 0.99 93.18%, 0.98 95.45%, 0.99 97.73%, 1 100%)",emphasis:"linear(0 0%, 0 1.8%, 0.01 3.6%, 0.03 6.35%, 0.07 9.1%, 0.13 11.4%, 0.19 13.4%, 0.27 15%, 0.34 16.1%, 0.54 18.35%, 0.66 20.6%, 0.72 22.4%, 0.77 24.6%, 0.81 27.3%, 0.85 30.4%, 0.88 35.1%, 0.92 40.6%, 0.94 47.2%, 0.96 55%, 0.98 64%, 0.99 74.4%, 1 86.4%, 1 100%)"},s=["default","fastInSlowOut","smoothStep","elastic","bounce","emphasis"];let i=!0,a=!0,c=!0,l=!0,d=1,u="default",p="InOut",h=!1,g=!1,f=!1,m=!1;const b=()=>"\n/* Top Bar Items */\n.".concat(o,"top-bar-scaler {\n    transition: transform ").concat(x(.1),";\n    transform-origin: center center;\n    transform-box: fill-box;\n}\n.").concat(o,'top-bar-scaler:hover:not([addon-scale-stop="true"]) {\n    transform: scale(1.05);\n}\n.').concat(o,'top-bar-scaler:active:not([addon-scale-stop="true"]) {\n    transform: scale(.95);\n}\n\n/*\n  Assets, Blockly Button Texts\n  Costume/Extension/Sprite/Sound Library UI\n*/\n.').concat(o,"static-scaler {\n    transition: transform ").concat(x(.1),";\n    transform-origin: center center;\n    transform-box: fill-box;\n}\n.").concat(o,'static-scaler:hover:not([addon-scale-stop="true"]) {\n    transform: scale(1.05);\n}\n.').concat(o,'static-scaler:active:not([addon-scale-stop="true"]) {\n    transform: scale(.95);\n}\n\n/*\n  Sound & Costume Editor Buttons,\n  Project Controls, Blockly Zoom\n*/\n.').concat(o,"static-scaler-big {\n    transition: transform ").concat(x(.2)," !important;\n    transform-origin: center center;\n    transform-box: fill-box;\n}\n.").concat(o,"static-scaler-big:hover {\n    transform: scale(1.1);\n}\n.").concat(o,"static-scaler-big:active {\n    transform: scale(.9);\n}\n\n/* Custom Extension Button (Library) */\n.").concat(o,"custom-ext-hover {\n  transition: transform ").concat(x(.2),", border ").concat(x(.5),";\n  justify-content: center;\n  border: none;\n}\n.").concat(o,"custom-ext-hover:hover {\n  border: solid 3px #00000050;\n}\n.").concat(o,"custom-ext-hover:active {\n  transform: scale(.95);\n  border: none;\n}\n\n/* Library Items */\n.").concat(o,'library-item-scaler div[class^="library-item_library-item"] {\n    transition: transform ').concat(x(.1),";\n    transform-origin: center center;\n    transform-box: fill-box;\n}\n.").concat(o,'library-item-scaler div[class^="library-item_library-item"]:hover {\n    transform: scale(1.05);\n}\n.').concat(o,'library-item-scaler div[class^="library-item_library-item"]:active {\n    transform: scale(.95);\n}\n\n/* Categories */\n.').concat(o,'category-scaler div div[class="scratchCategoryMenuRow"] {\n    transition: transform ').concat(x(.1),";\n    transform-origin: center center;\n    transform-box: fill-box;\n}\n.").concat(o,'category-scaler div div[class="scratchCategoryMenuRow"]:hover {\n    transform: scale(1.05);\n}\n.').concat(o,'category-scaler div div[class="scratchCategoryMenuRow"]:active {\n    transform: scale(.95);\n}\n'),y=document.createElement("style");y.classList.add("addon-editorAnimations"),y.textContent=b(),document.head.appendChild(y);let v=!n.matches;function k(){return s.includes(u)?r[u]:r[u+p]}function x(e){return"".concat(e*=d,"s ").concat(k())}function w(e,t,n){if(!a)return;if(e.hasAttribute("addon-scale-listeners-bound"))return;const o=()=>e.setAttribute("addon-scale-stop",!0),r=()=>e.setAttribute("addon-scale-stop",!1);e.addEventListener("mouseover",o),e.addEventListener("mouseout",r),e.setAttribute("addon-scale-listeners-bound","true"),e.setAttribute("addon-scale-stop",!0);const s=new MutationObserver(()=>{var t,n;e.classList.contains("menu-bar_active")||"1"===(null===(t=e.querySelector("nav"))||void 0===t||null===(n=t.style)||void 0===n?void 0:n.opacity)||(e.removeEventListener("mouseover",o),e.removeEventListener("mouseout",r),e.removeAttribute("addon-scale-listeners-bound"),e.setAttribute("addon-scale-stop",!1),s.disconnect())});s.observe(e,{subtree:t,attributes:!0,attributeFilter:n})}function I(e){var t;const n=e.endsWith("Library")?"library":e.endsWith("Menu")?"menu":"modal";if(!c&&"library"===n)return;if(!a&&"library"!==n)return;let o,r=200;if("menu"!==n)o="addonModal"===e?document.querySelector('div[class^="modal_modal-overlay"] div[class*="modal_modal-content"]'):null===(t=document.querySelector('div[class="ReactModalPortal"] div[class*="ReactModal__Overlay"]'))||void 0===t?void 0:t.firstChild,o&&("library"===n&&(r=500,o.style.transformOrigin="extensionLibrary"===e||"costumeLibrary"===e?"left bottom":"center bottom"),o.animate([{transform:"scale(0)",opacity:0},{transform:"scale(1)",opacity:1}],{duration:r*d,easing:k()}));else{if("ctxMenu"===e)o=document.querySelector('div[class*="blocklyContextMenu"]');else if("guiCtxMenu"===e)o=document.querySelector('nav[class*="context-menu_context-menu"][class*="react-contextmenu--visible"]');else{if(o=Array.from(document.querySelectorAll('div[class*="menu-bar_menu-bar-menu_"] ul[class*="menu_menu_"]')),!o.length)return;o=o.find(e=>!e.hasAttribute("style"))}if(!o)return;if("menu"===n){const e=o.parentNode.parentNode;setTimeout(()=>w(e,!1,["class"]),10)}const t=o.getBoundingClientRect().height;o.style.overflow="hidden",o.style.transition="transform ".concat(x(.2)),o.style.transformOrigin="left top","guiCtxMenu"===e?r=500:o.style.transform="translateY(-2px) scale(.999)";o.animate([{height:"0px",opacity:0},{height:"".concat(t,"px"),opacity:1}],{duration:r*d,easing:k()}).onfinish=()=>{o.style.overflow=""}}}function _(e){const t=e.endsWith("Library")?"library":e.endsWith("Menu")?"menu":"modal";if("menu"===t||h)return;if(!c&&"library"===t)return;if(!a&&"library"!==t)return;const n=document.body.constructor.prototype.removeChild;document.body.constructor.prototype.removeChild=function(o){const r="addonModal"===e?document.querySelector('div[class^="modal_modal-overlay"]'):document.querySelector('div[class="ReactModalPortal"]');if(!r)return n.call(this,o);let s=200;if(h=!0,o===r){const o=r.firstChild;if(o){const i=o.cloneNode(!0);i.style.position="fixed",i.style.top=o.getBoundingClientRect().top+"px",i.style.left=o.getBoundingClientRect().left+"px",i.style.zIndex="99999",i.style.pointerEvents="none","library"===t&&(s=500,i.style.transformOrigin="extensionLibrary"===e||"costumeLibrary"===e?"left bottom":"center bottom"),document.body.appendChild(i),i.animate([{opacity:1},{opacity:0}],{duration:s*d,easing:k()});return i.firstChild.animate([{transform:"scale(1)",opacity:1},{transform:"scale(0)",opacity:0}],{duration:s*d,easing:k()}).onfinish=()=>{i.remove(),n.call(r.parentNode,r)},document.body.constructor.prototype.removeChild=n,h=!1,o}}return n.call(this,o)}}function S(e){if(!l)return;const t=new Map;if(e){const n=document.querySelector('button[class^="library_library-filter-collapse"]'),o=document.querySelector('div[class^="library_library-filter-bar"]');n.style.transform="rotateY(180deg)",n.addEventListener("click",e=>{e.preventDefault();if(n.hasAttribute("closed"))n.style.transform="rotateY(180deg)",n.removeAttribute("closed"),o.style.display="",o.animate([{width:"0px",opacity:0},{width:"342px",opacity:1}],{duration:300,easing:k()});else{n.style.transform="rotateY(0deg)";o.animate([{width:"342px",opacity:1},{width:"0px",opacity:0}],{duration:300,easing:k()}).onfinish=()=>{n.setAttribute("closed","true"),o.style.display="none"}}e.stopPropagation()}),"extensionLibrary"===e&&t.set("custom-ext-hover",[document.querySelector('span[class*="button_outlined-button"][class*="tag-button_tag-button"]')]),t.set("library-item-scaler",[document.querySelector('div[class*="library_library-scroll-grid"]')]),t.set("static-scaler",[document.querySelector('span[class*="modal_back-button_"]'),n])}else t.set("top-bar-scaler",document.querySelectorAll('div[class*="menu-bar_main-menu"] div[class*="menu-bar_menu-bar-item"][class*="hoverable"]')),t.set("category-scaler",[document.querySelector('div[class="blocklyToolboxDiv"]')]),t.set("static-scaler",[...document.querySelectorAll('g[class="blocklyFlyoutButton"] text[class="blocklyText"]'),...document.querySelectorAll('div[class*="selector_list-item"][class*="sprite-selector-item"]'),...document.querySelectorAll('div[class*="sprite-selector_sprite"][class*="sprite-selector-item"]'),...document.querySelectorAll('div[class*="backpack_backpack-item"][class*="sprite-selector-item"]')]),t.set("static-scaler-big",[...document.querySelectorAll('div[class*="sound-editor_effect-button"]'),...document.querySelectorAll('div[class*="sound-editor_tool-button"]'),...document.querySelectorAll('button[class*="sound-editor_round-button"]'),...document.querySelectorAll('span[class*="tool-select-base_mod-tool-select"]'),...document.querySelectorAll('div[class^="controls_controls-container"] img'),...document.querySelectorAll('g[class="blocklyZoom"] image')]);t.forEach((e,t)=>{for(const n of e)n&&n.classList.add(o+t)}),i=!1}n.addEventListener("change",e=>{v=!e.matches}),"undefined"==typeof scaffolding&&function(){let e,t;window.vm.on("workspaceUpdate",()=>{queueMicrotask(()=>S())}),ReduxStore.subscribe(()=>{const n=ReduxStore.getState().scratchGui;let o=Object.entries(n.modals);o.push(...Object.entries(n.menus));const r=[...o,["tab",n.editorTab.activeTabIndex]].map(e=>e[1]).join("."),s=!ReduxStore.getState().scratchGui.mode.isPlayerOnly;t!==s&&(t=s,t&&(g=!1,m=!1)),g||"object"==typeof ScratchBlocks&&(g=!0,queueMicrotask(()=>{const e=ScratchBlocks.prompt;ScratchBlocks.prompt=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.call(this,...n),I("modal"),_("modal")};const t=ScratchBlocks.customPrompt;if(ScratchBlocks.customPrompt=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];const r=t.call(this,...n);return r?I("modal"):queueMicrotask(()=>I("modal")),_("modal"),r},f)return;f=!0;const n=ScratchBlocks.Procedures.createProcedureDefCallback_;ScratchBlocks.Procedures.createProcedureDefCallback_=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];n.call(this,...t),I("modal"),_("modal")};const o=ScratchBlocks.Procedures.editProcedureCallback_;ScratchBlocks.Procedures.editProcedureCallback_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.call(this,...t),I("modal"),_("modal")};const r=ScratchBlocks.ContextMenu.show;ScratchBlocks.ContextMenu.show=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.call(this,...t),I("ctxMenu")};const s=ScratchBlocks.FlyoutButton.prototype.show;ScratchBlocks.FlyoutButton.prototype.show=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.call(this,...t),queueMicrotask(()=>S())},window.vm.on("ADDON_WORKER_MODAL",()=>{I("addonModal"),_("addonModal")})})),m||document.querySelector('div[class^="sprite-selector_items-wrapper"]')&&(document.addEventListener("contextmenu",e=>{let t=e.target.closest('div[class*="sprite-selector_sprite-wrapper"]');t=t?t.firstChild:e.target.closest('div[class^="react-contextmenu-wrapper"][class*="sprite-selector-item_sprite-selector"]'),t&&setTimeout(()=>{t.querySelector("nav").style.opacity=1,I("guiCtxMenu"),w(t,!0,["class","style"])},10)}),m=!0),(i||e!==r)&&(e=r,queueMicrotask(()=>{S();for(const e of o)if(!0===e[1]){const t=e[0];I(t),_(t),S(t.endsWith("Library")?t:void 0);break}}))})}(),t.settings.addEventListener("change",(function(){a=t.settings.get("animateModals"),c=t.settings.get("animateLibraries"),l=t.settings.get("animateButtons"),u=t.settings.get("animationType"),p=t.settings.get("animationDir");const e=d;d=1/(Number(t.settings.get("animateSpeed"))/100),e!==d&&(y.textContent=b())})),t.self.addEventListener("disabled",()=>{a=!1,c=!1,l=!1}),t.self.addEventListener("reenabled",()=>{a=!0,c=!0,l=!0})}}},1976:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(){let e;async function t(e,t){const n=["https://corsproxy.io?url=","https://api.codetabs.com/v1/proxy?quest="];for(const o of n)try{const n=await fetch(o+e);if(n.ok)return await n[t]();if(400===n.status)return;continue}catch(t){console.warn("Failed to fetch ".concat(e," with proxy: ").concat(o),t)}}async function n(){let e,n,o,r,s=void 0;const i=await ScratchBlocks.customPrompt({title:"Newgrounds Audio"},{content:{width:"500px"}},[{name:"Add Track",role:"ok",callback:()=>{e&&n&&r&&async function(e,n){const o=await t(e,"arrayBuffer");if(!o)return void alert("Failed to Fetch Song!");const r=vm.runtime.storage,s=r.createAsset(r.AssetType.Sound,r.DataFormat.MP3,new Uint8Array(o),null,!0);try{await vm.addSound({asset:s,name:n,md5:s.assetId+"."+s.dataFormat},vm.editingTarget.id)}catch(e){console.warn(e)}}(r,"".concat(n," -- ").concat(o))}},{name:"Cancel",role:"close",callback:()=>{}}]),a=i.parentNode.querySelector('button[class^="prompt_ok-button"]');a.style.filter="brightness(70%)",a.style.pointerEvents="none";const c=document.createElement("div");c.innerHTML='Import <a href="https://www.newgrounds.com/audio" target="_blank">Newgrounds</a> audio directly into your Project.<br><b>Not all tracks are fully free-to-use, read the report after searching.</b>',c.setAttribute("style","text-align: center; font-size: .85rem;");const l=document.createElement("div");l.setAttribute("style","width: 100%; margin: 15px 0; padding: 10px 20px; border-radius: 15px; border: dashed 2px grey; text-align: center; font-size: .85rem;");const d=document.createElement("b");d.textContent="Track ID/URL: ";const u=document.createElement("input");u.setAttribute("style","margin-left: 5px; width: 70%; height: 25px; text-align: center; background: #ffffff20; border-radius: 15px; border: solid grey 1px;"),u.type="text",u.placeholder="https://www.newgrounds.com/audio/listen/1395716",u.value="1395716",e=u.placeholder,u.addEventListener("change",t=>{e=String(t.target.value),e.startsWith("https://www.newgrounds.com/audio/listen/")||(e="https://www.newgrounds.com/audio/listen/"+e),t.stopPropagation()});const p=document.createElement("button");p.setAttribute("style","border: none; border-radius: 5px; padding: 10px 20px; margin: 10px 0 0; background: hsla(194, 100%, 50%, 1); cursor: pointer; font-weight: 600; font-size: 0.85rem; color: white;"),p.textContent="Search",p.addEventListener("click",async c=>{var l,d,u;const p=await t(e,"text");if(!p)return void alert("Failed to Fetch Track URL!");o=(null===(l=p.match(/"artist":"([^"]+)"/))||void 0===l?void 0:l[1])||"",n=(null===(d=p.match(/<title>(.*?)<\/title>/i))||void 0===d?void 0:d[1])||"";let h=p.match(/<meta property="og:audio" content="(https:\/\/audio\.ngfiles\.com\/[^"]+\.mp3\?[^"]+)">/);if(!h){const e=new RegExp('"params":\\{"filename":"(https:\\/\\/audio\\.ngfiles\\.com\\/[^"]+\\.mp3\\?[^"]+)"}');h=p.match(e)}r=h?h[1].replace(/\\/g,""):"";const g=p.match(/<dt>\s*Listens\s*<\/dt>[\s\S]*?<dd>\d+<\/dd>[\s\S]*?<dt>\s*Downloads\s*<\/dt>[\s\S]*?<dd>(\d+)<\/dd>[\s\S]*?<dt>\s*Score\s*<\/dt>/i),f=(null===(u=p.match(/<div class="pod-body creative-commons">[\s\S]*?<p>\s*([\s\S]*?)\s*<\/p>/i))||void 0===u?void 0:u[1])||"",m=g?function(e){e=String(e).toLowerCase().trim();const t=["you may only use this piece for commercial purposes if your work is a web-based game or animation,"];for(const n of t)if(e.startsWith(n))return"good";const n=["you may not use this work for any purposes"];for(const t of n)if(e.startsWith(t))return"bad";const o=["you are free to copy, distribute and transmit this work under the following conditions:","please contact me if you would like to use this in a project. we can discuss the details."];for(const t of o)if(e.startsWith(t))return"warn";return"warn"}(f):"unwhitelisted";s&&s.remove(),s=function(e,t,n){const o="good"===e?"#00ff00":"bad"===e||"unwhitelisted"===e?"#ff0000":"#ffc400",r=document.createElement("div");r.setAttribute("style","display: flex; width: 100%; margin: 15px 0; padding: 10px 20px 10px 30px; border-radius: 15px; border: solid 2px ".concat(o,"; background: ").concat(o,"30; text-align: center; font-size: .9rem; font-weight: bold;"));const s=document.createElement("img");s.setAttribute("style","width:35px; margin-right: 5px;"),s.src="good"===e?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAuNzc0IiBoZWlnaHQ9IjEwNS45MDUiIHZpZXdCb3g9IjAgMCAxMjAuNzc0IDEwNS45MDUiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCB4MT0iMjM5Ljg2IiB5MT0iMTMwLjA2IiB4Mj0iMjM5Ljg2IiB5Mj0iMjMyLjQ2NSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMwMGZjMWQiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMGI0MTYiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iMjM5Ljg2IiB5MT0iMTMwLjA2IiB4Mj0iMjM5Ljg2IiB5Mj0iMjMyLjQ2NSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJiIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMwMGFlMTQiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDZkMGQiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJtMjAwLjMgMTc0LjEwOCAyMi40NDYgMjAuNDgxIDU0LjcwOS02NC41MjkgMjEuMDQyIDE3LjM5NS03Mi45NDYgODUuMDEtNDQuMzI5LTM4Ljk5OHoiIGZpbGw9InVybCgjYSkiIHN0cm9rZT0idXJsKCNiKSIgc3Ryb2tlLXdpZHRoPSIzLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTc5LjQ3MiAtMTI4LjMxKSIvPjwvc3ZnPg==":"bad"===e||"unwhitelisted"===e?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjUuNTc4IiBoZWlnaHQ9IjEyNS44ODMiIHZpZXdCb3g9IjAgMCAxMjUuNTc4IDEyNS44ODMiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCB4MT0iMjM5Ljg2IiB5MT0iMTE5LjY3OSIgeDI9IjIzOS44NiIgeTI9IjI0MC42MDEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iYSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmUwMDUwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjOWIwMDA3Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjIzOS44NiIgeTE9IjExOS42NzkiIHgyPSIyMzkuODYiIHkyPSIyNDAuNjAxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgaWQ9ImIiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzdlMDAyNyIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzNiMDAwMSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxwYXRoIGQ9Im0xOTcuMjE0IDEyMC44MDIgNDIuNjQ2IDQxLjgwMyA0MS41MjMtNDIuOTI2IDE3Ljk1NiAxNy42NzYtNDEuNTIzIDQyLjM2NCA0Mi4zNjQgNDAuOTYyLTE3LjM5NCAxOC41MTctNDIuMDg1LTQxLjI0MkwxOTkuNDYgMjQwLjZsLTE4LjIzNy0xNy42NzVMMjIyLjE4NCAxODBsLTQyLjY0NS00MC45NjJ6IiBmaWxsPSJ1cmwoI2EpIiBzdHJva2U9InVybCgjYikiIHN0cm9rZS13aWR0aD0iMy41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3Ny4wNTkgLTExNy4xOTQpIi8+PC9zdmc+":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjMuODYxIiBoZWlnaHQ9IjEwMC4yOTQiIHZpZXdCb3g9IjAgMCAxMjMuODYxIDEwMC4yOTQiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCB4MT0iMjQwIiB5MT0iMTMwLjM0MSIgeDI9IjI0MCIgeTI9IjIyNy4xMzQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iYSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZlYzEwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZhYzBjIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjI0MCIgeTE9IjEzMC4zNDEiIHgyPSIyNDAiIHkyPSIyMjcuMTM0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgaWQ9ImIiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzhiNGUwMiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzgyMjcwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSIyNDAiIHkxPSIxNTAuODkyIiB4Mj0iMjQwIiB5Mj0iMjIxLjQ1MyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJjIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiM4OTQ1MDEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM4MjI5MDAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyBzdHJva2Utd2lkdGg9IjMuNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIj48cGF0aCBkPSJtMjQwIDEzMC4zNCA2MC4xOCA5Ni43OTRIMTc5LjgyeiIgZmlsbD0idXJsKCNhKSIgc3Ryb2tlPSJ1cmwoI2IpIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTc4LjA3IC0xMjguNTkpIi8+PHBhdGggZD0iTTIzMi41NjUgMjE0LjAxOGE3LjQzNSA3LjQzNSAwIDEgMSAxNC44NyAwIDcuNDM1IDcuNDM1IDAgMCAxLTE0Ljg3IDBtNy4xMjItMTIuOTA2YTYgNiAwIDAgMS02LTZ2LTM4LjIyYTYgNiAwIDAgMSA2LTZoLjYyNmE2IDYgMCAwIDEgNiA2djM4LjIyYTYgNiAwIDAgMS02IDZ6IiBmaWxsPSJ1cmwoI2MpIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTc4LjA3IC0xMjguNTkpIi8+PC9nPjwvc3ZnPg==";const i=document.createElement("span");i.innerHTML="good"===e?"The Track: ".concat(t," by ").concat(n,", can freely be used for web-based games"):"bad"===e?"The Track: ".concat(t," by ").concat(n,", is not allowed for use!"):"unwhitelisted"===e?"The Track: ".concat(t," by ").concat(n,", is not allowed for use. ").concat(n," is not scouted on Newgrounds!"):"The Track: ".concat(t," by ").concat(n,", can only be used for non-profit web-based games WITH credit. Further use requires permission from ").concat(n);return r.append(s,i),r}(m,n,o),"bad"===m||"unwhitelisted"===m?(n=void 0,a.style.filter="brightness(70%)",a.style.pointerEvents="none"):(a.style.filter="",a.style.pointerEvents=""),i.appendChild(s),c.stopPropagation()}),l.append(d,u,p),i.append(c,l)}"undefined"==typeof scaffolding&&ReduxStore.subscribe(()=>queueMicrotask(()=>{const t=ReduxStore.getState().scratchGui;t.mode.isPlayerOnly||2!==t.editorTab.activeTabIndex?e=void 0:e||function(){const t=document.querySelector('div[class^="action-menu_menu-container"] div[class^="action-menu_more-buttons-outer"] div[class^="action-menu_more-buttons"]');e=t.children[0].cloneNode(!0);const o=e.firstChild;o.setAttribute("data-tip","Newgrounds Sound"),o.setAttribute("aria-label","Newgrounds Sound");for(var r=1;r<o.children.length;r++){const e=o.children[r];e&&e.remove()}o.firstChild.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yLjUgLTIuNSAyNSAyNSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj48cGF0aCBkPSJNNy4wNjkgMS43NzhhMi4wMiAyLjAyIDAgMCAxIDIuMDIgMi4wMnYxMy44MDZhLjg0Ljg0IDAgMCAxLS44NDIuODRINi4zOTZhLjg0Ljg0IDAgMCAxLS44NDItLjg0MlY2LjExOWEuODQuODQgMCAwIDAtLjg0Mi0uODQyaC0uMzM3YS44NC44NCAwIDAgMC0uODQxLjg0MnYxMS40ODRhLjg0Ljg0IDAgMCAxLS44NDEuODQxSC44NDJBLjg0Ljg0IDAgMCAxIDAgMTcuNjAzVjIuNjE5YS44NC44NCAwIDAgMSAuODQyLS44NDF6bTEwLjkxMiAwQTIuMDIgMi4wMiAwIDAgMSAyMCAzLjc5N3YzLjQ3NGEuNjczLjY3MyAwIDAgMS0uNjczLjY3M2gtMi4zNTZhLjY3My42NzMgMCAwIDEtLjY3My0uNjczVjUuNzgzYS41MDQuNTA0IDAgMCAwLS41MDUtLjUwNWgtLjg0MmEuNTA0LjUwNCAwIDAgMC0uNTA1LjUwNXY4LjY1OGMwIC4xODYuMTUxLjMzNy4zMzcuMzM3aDEuMzQ2YS4zMzYuMzM2IDAgMCAwIC4zMzYtLjMzN3YtMS42NjNoLS4zMzZhLjY3My42NzMgMCAwIDEtLjY3My0uNjczVjkuOTUyYS42NzMuNjczIDAgMCAxIC42NzMtLjY3M2gzLjE5OGEuNjczLjY3MyAwIDAgMSAuNjczLjY3MnY2LjQ3NGEyLjAyIDIuMDIgMCAwIDEtMi4wMiAyLjAxOWgtNS4wNDlhMi4wMiAyLjAyIDAgMCAxLTIuMDItMi4wMlYzLjc5N2EyLjAyIDIuMDIgMCAwIDEgMi4wMi0yLjAxOWg1LjA0OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",e.addEventListener("click",n),t.insertBefore(e,t.children[0])}()}))}}},1977:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(e){let t,{addon:n}=e,o=8,r="square";function s(){o=Math.min(25,Math.max(3,n.settings.get("handleSize"))),r=n.settings.get("handleShape")}function i(){t||(t=paper.Path.prototype._drawSelected),paper.Path.prototype._drawSelected=function(e,t){const n=paper.settings.handleSize;e.beginPath(),function(e,t,n){var o,r,s,i,a,c,l,d,u=t._segments,p=u.length,h=Array(6),g=!0;function f(t){if(n)t._transformCoordinates(n,h),o=h[0],r=h[1];else{var u=t._point;o=u._x,r=u._y}if(g)e.moveTo(o,r),g=!1;else{if(n)a=h[2],c=h[3];else{var p=t._handleIn;a=o+p._x,c=r+p._y}a===o&&c===r&&l===s&&d===i?e.lineTo(o,r):e.bezierCurveTo(l,d,a,c,o,r)}if(s=o,i=r,n)l=h[4],d=h[5];else{p=t._handleOut;l=s+p._x,d=i+p._y}}for(var m=0;m<p;m++)f(u[m]);t._closed&&p>0&&f(u[0])}(e,this,t),e.stroke(),function(e,t,n,o){if(!(o<=0))for(var s,i,a=o/2,c=o-2,l=a-1,d=new Array(6),u=0,p=t.length;u<p;u++){var h=t[u],g=h._selection;if(h._transformCoordinates(n,d),s=d[0],i=d[1],2&g&&m(2),4&g&&m(4),e.fillRect(s-a,i-a,o,o),c>0&&!(1&g)){var f=e.fillStyle;e.fillStyle="#ffffff80",e.fillRect(s-l,i-l,c,c),e.fillStyle=f}}function m(t){var n=d[t],o=d[t+1];s==n&&i==o||(e.beginPath(),e.moveTo(s,i),e.lineTo(n,o),e.stroke(),e.beginPath(),"square"===r?e.rect(n-a,o-a,2*a,2*a):e.arc(n,o,a,0,2*Math.PI,!0),e.fill())}}(e,this._segments,t,0===n?0:o)}}if("undefined"==typeof scaffolding){s();const e=ReduxStore.subscribe(()=>{"object"==typeof paper&&queueMicrotask(()=>{i(),e()})})}n.settings.addEventListener("change",s),n.self.addEventListener("disabled",()=>{paper.Path.prototype._drawSelected=t}),n.self.addEventListener("reenabled",i)}}}}]);